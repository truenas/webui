{"file":"/Users/macbook/karpov-work/TrueNAS/webui/src/app/services/url-options.service.spec.ts","mappings":"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","names":[],"sources":["/Users/macbook/karpov-work/TrueNAS/webui/src/app/services/url-options.service.spec.ts"],"sourcesContent":["import { Location } from '@angular/common';\nimport { createServiceFactory, SpectatorService } from '@ngneat/spectator/jest';\nimport { SortDirection } from 'app/modules/ix-table/enums/sort-direction.enum';\nimport { UrlOptionsService } from 'app/services/url-options.service';\n\ndescribe('UrlOptionsService', () => {\n  let spectator: SpectatorService<UrlOptionsService>;\n  const createService = createServiceFactory({\n    service: UrlOptionsService,\n    providers: [Location],\n  });\n\n  beforeEach(() => {\n    spectator = createService();\n    spectator.inject(Location).replaceState('/test/url');\n  });\n\n  describe('setUrlOptions', () => {\n    it('sets url options', () => {\n      const location = spectator.inject(Location);\n      spectator.service.setUrlOptions('/test/url', {\n        searchQuery: { isBasicQuery: true, query: 'search query' },\n        pagination: { pageNumber: 2, pageSize: 10 },\n        sorting: {\n          active: 1,\n          direction: SortDirection.Desc,\n          propertyName: 'test_column',\n          sortBy: jest.fn(),\n        },\n      });\n\n      expect(decodeURIComponent(location.path())).toBe('/test/url/{'\n        + '\"searchQuery\":{\"isBasicQuery\":true,\"query\":\"search query\"},'\n        + '\"pagination\":{\"pageNumber\":2,\"pageSize\":10},'\n        + '\"sorting\":{\"active\":1,\"direction\":\"desc\",\"propertyName\":\"test_column\"}'\n      + '}');\n    });\n\n    it('sets empty url options', () => {\n      const location = spectator.inject(Location);\n      spectator.service.setUrlOptions('/test/url', {\n        searchQuery: { isBasicQuery: true, query: '' },\n        pagination: { pageNumber: null, pageSize: null },\n        sorting: {\n          active: 1,\n          direction: null,\n          propertyName: 'test_column',\n          sortBy: jest.fn(),\n        },\n      });\n\n      expect(location.path()).toBe('/test/url');\n    });\n  });\n\n  describe('buildUrlOptions', () => {\n    it('returns a string with URL options encoded', () => {\n      const url = spectator.service.buildUrl('/test/url', {\n        searchQuery: { isBasicQuery: false, filters: [['username', '=', 'Боб']] },\n        pagination: { pageNumber: 2, pageSize: 10 },\n        sorting: {\n          active: 1,\n          direction: SortDirection.Desc,\n          propertyName: 'test_column',\n          sortBy: jest.fn(),\n        },\n      });\n\n      expect(url).toEqual('/test/url/{'\n        + '\"searchQuery\":{\"isBasicQuery\":false,\"filters\":[[\"username\",\"=\",\"Боб\"]]},'\n        + '\"pagination\":{\"pageNumber\":2,\"pageSize\":10},'\n        + '\"sorting\":{\"active\":1,\"direction\":\"desc\",\"propertyName\":\"test_column\"}'\n        + '}');\n    });\n  });\n\n  describe('parseUrlOptions', () => {\n    it('parses url options', () => {\n      const url = '{'\n        + '\"searchQuery\":{\"isBasicQuery\":true,\"query\":\"search query\"},'\n        + '\"pagination\":{\"pageNumber\":3,\"pageSize\":50},'\n        + '\"sorting\":{\"active\":3,\"direction\":\"asc\",\"propertyName\":\"test_column\"}'\n      + '}';\n\n      const options = spectator.service.parseUrlOptions(url);\n      expect(options).toEqual({\n        pagination: {\n          pageNumber: 3,\n          pageSize: 50,\n        },\n        searchQuery: {\n          isBasicQuery: true,\n          query: 'search query',\n        },\n        sorting: {\n          active: 3,\n          direction: SortDirection.Asc,\n          propertyName: 'test_column',\n        },\n      });\n    });\n\n    it('parses empty url options', () => {\n      const options = spectator.service.parseUrlOptions('');\n      expect(options).toEqual({});\n    });\n\n    it('parses undefined url options', () => {\n      const options = spectator.service.parseUrlOptions(undefined);\n      expect(options).toEqual({});\n    });\n  });\n});\n"],"version":3}