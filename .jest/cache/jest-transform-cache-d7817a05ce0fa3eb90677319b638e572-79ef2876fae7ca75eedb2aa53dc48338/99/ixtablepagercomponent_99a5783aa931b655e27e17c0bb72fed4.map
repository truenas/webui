{"file":"/Users/macbook/karpov-work/TrueNAS/webui/src/app/modules/ix-table/components/ix-table-pager/ix-table-pager.component.ts","mappings":"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","names":[],"sources":["/Users/macbook/karpov-work/TrueNAS/webui/src/app/modules/ix-table/components/ix-table-pager/ix-table-pager.component.ts"],"sourcesContent":["import {\n  AfterContentChecked, ChangeDetectionStrategy, ChangeDetectorRef, Component, Input, OnInit,\n} from '@angular/core';\nimport { MatIconButton } from '@angular/material/button';\nimport { MatOption } from '@angular/material/core';\nimport { MatFormField } from '@angular/material/form-field';\nimport { MatSelectChange, MatSelect } from '@angular/material/select';\nimport { UntilDestroy } from '@ngneat/until-destroy';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { IxIconComponent } from 'app/modules/ix-icon/ix-icon.component';\nimport { DataProvider } from 'app/modules/ix-table/interfaces/data-provider.interface';\nimport { TestDirective } from 'app/modules/test-id/test.directive';\n\n@UntilDestroy()\n@Component({\n  selector: 'ix-table-pager',\n  templateUrl: './ix-table-pager.component.html',\n  styleUrls: ['./ix-table-pager.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  standalone: true,\n  imports: [\n    MatFormField,\n    MatSelect,\n    MatOption,\n    MatIconButton,\n    IxIconComponent,\n    TranslateModule,\n    TestDirective,\n  ],\n})\nexport class IxTablePagerComponent<T> implements OnInit, AfterContentChecked {\n  @Input() dataProvider!: DataProvider<T>;\n  @Input() pageSize = 50;\n  @Input() pageSizeOptions = [10, 20, 50, 100];\n  @Input() currentPage = 1;\n\n  totalItems = 0;\n\n  get totalPages(): number {\n    return Math.ceil(this.totalItems / this.pageSize);\n  }\n\n  get firstPage(): number {\n    return (this.currentPage - 1) * this.pageSize + 1;\n  }\n\n  get lastPage(): number {\n    const lastPage = this.currentPage * this.pageSize;\n    return lastPage < this.totalItems ? lastPage : this.totalItems;\n  }\n\n  constructor(\n    private cdr: ChangeDetectorRef,\n  ) {}\n\n  ngOnInit(): void {\n    this.dataProvider.setPagination({\n      pageNumber: this.currentPage,\n      pageSize: this.pageSize,\n    });\n  }\n\n  ngAfterContentChecked(): void {\n    this.totalItems = this.dataProvider.totalRows;\n    if (this.currentPage > this.totalPages && this.currentPage !== 1) {\n      this.goToPage(1);\n    }\n    this.cdr.markForCheck();\n  }\n\n  goToPage(pageNumber: number): void {\n    if (pageNumber >= 1 && pageNumber <= this.totalPages) {\n      this.currentPage = pageNumber;\n      this.dataProvider.setPagination({\n        pageNumber,\n        pageSize: this.pageSize,\n      });\n    }\n  }\n\n  previousPage(): void {\n    if (this.currentPage > 1) {\n      this.goToPage(this.currentPage - 1);\n    }\n  }\n\n  nextPage(): void {\n    if (this.currentPage < this.totalPages) {\n      this.goToPage(this.currentPage + 1);\n    }\n  }\n\n  onPageSizeChange($event: MatSelectChange): void {\n    this.pageSize = $event.value as number;\n    this.goToPage(1);\n  }\n}\n"],"version":3}