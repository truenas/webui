0a5b4cbd0d1f3d345bd8f97d8346e53e
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.IxTableHeadComponent = void 0;
const common_1 = require("@angular/common");
const core_1 = require("@angular/core");
const until_destroy_1 = require("@ngneat/until-destroy");
const core_2 = require("@ngx-translate/core");
const ix_icon_component_1 = require("app/modules/ix-icon/ix-icon.component");
const ix_header_cell_directive_1 = require("app/modules/ix-table/directives/ix-header-cell.directive");
const sort_direction_enum_1 = require("app/modules/ix-table/enums/sort-direction.enum");
const test_directive_1 = require("app/modules/test-id/test.directive");
const tooltip_component_1 = require("app/modules/tooltip/tooltip.component");
let IxTableHeadComponent = class IxTableHeadComponent {
    get displayedColumns() {
        var _a;
        return (_a = this.columns) === null || _a === void 0 ? void 0 : _a.filter((column) => !(column === null || column === void 0 ? void 0 : column.hidden));
    }
    constructor(cdr) {
        this.cdr = cdr;
        this.SortDirection = sort_direction_enum_1.SortDirection;
    }
    ngAfterViewInit() {
        this.dataProvider.currentPage$.pipe((0, until_destroy_1.untilDestroyed)(this)).subscribe(() => {
            this.cdr.detectChanges();
        });
    }
    onSort(columnId) {
        var _a;
        if ((_a = this.displayedColumns[columnId]) === null || _a === void 0 ? void 0 : _a.disableSorting) {
            return;
        }
        const currentDirection = this.dataProvider.sorting.direction;
        const currentActive = this.dataProvider.sorting.active;
        let direction = currentDirection;
        let active = currentActive;
        if (currentActive !== columnId) {
            direction = null;
            active = columnId;
        }
        if (direction === null) {
            direction = sort_direction_enum_1.SortDirection.Asc;
        }
        else if (currentDirection === sort_direction_enum_1.SortDirection.Asc) {
            direction = sort_direction_enum_1.SortDirection.Desc;
        }
        else if (currentDirection === sort_direction_enum_1.SortDirection.Desc) {
            direction = null;
        }
        const sortBy = (this.displayedColumns[columnId].sortBy
            || this.displayedColumns[columnId].getValue);
        this.dataProvider.setSorting({
            propertyName: this.displayedColumns[columnId].propertyName,
            sortBy,
            direction,
            active,
        });
    }
};
exports.IxTableHeadComponent = IxTableHeadComponent;
IxTableHeadComponent.ctorParameters = () => [
    { type: core_1.ChangeDetectorRef }
];
IxTableHeadComponent.propDecorators = {
    columns: [{ type: core_1.Input }],
    dataProvider: [{ type: core_1.Input }]
};
exports.IxTableHeadComponent = IxTableHeadComponent = __decorate([
    (0, until_destroy_1.UntilDestroy)(),
    (0, core_1.Component)({
        selector: 'ix-table-head, thead[ix-table-head]',
        template: require("./ix-table-head.component.html"),
        changeDetection: core_1.ChangeDetectionStrategy.OnPush,
        standalone: true,
        imports: [
            common_1.NgClass,
            common_1.NgStyle,
            ix_header_cell_directive_1.IxTableHeaderCellDirective,
            ix_icon_component_1.IxIconComponent,
            test_directive_1.TestDirective,
            tooltip_component_1.TooltipComponent,
            core_2.TranslateModule,
        ],
    })
], IxTableHeadComponent);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL21hY2Jvb2sva2FycG92LXdvcmsvVHJ1ZU5BUy93ZWJ1aS9zcmMvYXBwL21vZHVsZXMvaXgtdGFibGUvY29tcG9uZW50cy9peC10YWJsZS1oZWFkL2l4LXRhYmxlLWhlYWQuY29tcG9uZW50LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLDRDQUFtRDtBQUNuRCx3Q0FFdUI7QUFDdkIseURBQXFFO0FBQ3JFLDhDQUFzRDtBQUN0RCw2RUFBd0U7QUFDeEUsdUdBQXNHO0FBQ3RHLHdGQUErRTtBQUcvRSx1RUFBbUU7QUFDbkUsNkVBQXlFO0FBbUJsRSxJQUFNLG9CQUFvQixHQUExQixNQUFNLG9CQUFvQjtJQU0vQixJQUFJLGdCQUFnQjs7UUFDbEIsT0FBTyxNQUFBLElBQUksQ0FBQyxPQUFPLDBDQUFFLE1BQU0sQ0FBQyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFBLE1BQU0sYUFBTixNQUFNLHVCQUFOLE1BQU0sQ0FBRSxNQUFNLENBQUEsQ0FBQyxDQUFDO0lBQzNELENBQUM7SUFFRCxZQUNVLEdBQXNCO1FBQXRCLFFBQUcsR0FBSCxHQUFHLENBQW1CO1FBUHZCLGtCQUFhLEdBQUcsbUNBQWEsQ0FBQztJQVFwQyxDQUFDO0lBRUosZUFBZTtRQUNiLElBQUksQ0FBQyxZQUFZLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxJQUFBLDhCQUFjLEVBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFO1lBQ3ZFLElBQUksQ0FBQyxHQUFHLENBQUMsYUFBYSxFQUFFLENBQUM7UUFDM0IsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsTUFBTSxDQUFDLFFBQWdCOztRQUNyQixJQUFJLE1BQUEsSUFBSSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsQ0FBQywwQ0FBRSxjQUFjLEVBQUUsQ0FBQztZQUNwRCxPQUFPO1FBQ1QsQ0FBQztRQUVELE1BQU0sZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDO1FBQzdELE1BQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQztRQUV2RCxJQUFJLFNBQVMsR0FBRyxnQkFBZ0IsQ0FBQztRQUNqQyxJQUFJLE1BQU0sR0FBRyxhQUFhLENBQUM7UUFFM0IsSUFBSSxhQUFhLEtBQUssUUFBUSxFQUFFLENBQUM7WUFDL0IsU0FBUyxHQUFHLElBQUksQ0FBQztZQUNqQixNQUFNLEdBQUcsUUFBUSxDQUFDO1FBQ3BCLENBQUM7UUFDRCxJQUFJLFNBQVMsS0FBSyxJQUFJLEVBQUUsQ0FBQztZQUN2QixTQUFTLEdBQUcsbUNBQWEsQ0FBQyxHQUFHLENBQUM7UUFDaEMsQ0FBQzthQUFNLElBQUksZ0JBQWdCLEtBQUssbUNBQWEsQ0FBQyxHQUFHLEVBQUUsQ0FBQztZQUNsRCxTQUFTLEdBQUcsbUNBQWEsQ0FBQyxJQUFJLENBQUM7UUFDakMsQ0FBQzthQUFNLElBQUksZ0JBQWdCLEtBQUssbUNBQWEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztZQUNuRCxTQUFTLEdBQUcsSUFBSSxDQUFDO1FBQ25CLENBQUM7UUFFRCxNQUFNLE1BQU0sR0FBRyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsQ0FBQyxNQUFNO2VBQ2pELElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsQ0FBQyxRQUFRLENBQWdDLENBQUM7UUFFOUUsSUFBSSxDQUFDLFlBQVksQ0FBQyxVQUFVLENBQUM7WUFDM0IsWUFBWSxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsQ0FBQyxZQUFZO1lBQzFELE1BQU07WUFDTixTQUFTO1lBQ1QsTUFBTTtTQUNQLENBQUMsQ0FBQztJQUNMLENBQUM7O0FBcERVLG9EQUFvQjs7Ozs7c0JBQzlCLFlBQUs7MkJBQ0wsWUFBSzs7K0JBRkssb0JBQW9CO0lBakJoQyxJQUFBLDRCQUFZLEdBQUU7SUFDZCxJQUFBLGdCQUFTLEVBQUM7UUFDVCxRQUFRLEVBQUUscUNBQXFDO1FBQy9DLG1EQUE2QztRQUU3QyxlQUFlLEVBQUUsOEJBQXVCLENBQUMsTUFBTTtRQUMvQyxVQUFVLEVBQUUsSUFBSTtRQUNoQixPQUFPLEVBQUU7WUFDUCxnQkFBTztZQUNQLGdCQUFPO1lBQ1AscURBQTBCO1lBQzFCLG1DQUFlO1lBQ2YsOEJBQWE7WUFDYixvQ0FBZ0I7WUFDaEIsc0JBQWU7U0FDaEI7S0FDRixDQUFDO0dBQ1csb0JBQW9CLENBcURoQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvbWFjYm9vay9rYXJwb3Ytd29yay9UcnVlTkFTL3dlYnVpL3NyYy9hcHAvbW9kdWxlcy9peC10YWJsZS9jb21wb25lbnRzL2l4LXRhYmxlLWhlYWQvaXgtdGFibGUtaGVhZC5jb21wb25lbnQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmdDbGFzcywgTmdTdHlsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQge1xuICBBZnRlclZpZXdJbml0LCBDaGFuZ2VEZXRlY3RvclJlZiwgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENvbXBvbmVudCwgSW5wdXQsXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgVW50aWxEZXN0cm95LCB1bnRpbERlc3Ryb3llZCB9IGZyb20gJ0BuZ25lYXQvdW50aWwtZGVzdHJveSc7XG5pbXBvcnQgeyBUcmFuc2xhdGVNb2R1bGUgfSBmcm9tICdAbmd4LXRyYW5zbGF0ZS9jb3JlJztcbmltcG9ydCB7IEl4SWNvbkNvbXBvbmVudCB9IGZyb20gJ2FwcC9tb2R1bGVzL2l4LWljb24vaXgtaWNvbi5jb21wb25lbnQnO1xuaW1wb3J0IHsgSXhUYWJsZUhlYWRlckNlbGxEaXJlY3RpdmUgfSBmcm9tICdhcHAvbW9kdWxlcy9peC10YWJsZS9kaXJlY3RpdmVzL2l4LWhlYWRlci1jZWxsLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBTb3J0RGlyZWN0aW9uIH0gZnJvbSAnYXBwL21vZHVsZXMvaXgtdGFibGUvZW51bXMvc29ydC1kaXJlY3Rpb24uZW51bSc7XG5pbXBvcnQgeyBDb2x1bW4sIENvbHVtbkNvbXBvbmVudCB9IGZyb20gJ2FwcC9tb2R1bGVzL2l4LXRhYmxlL2ludGVyZmFjZXMvY29sdW1uLWNvbXBvbmVudC5jbGFzcyc7XG5pbXBvcnQgeyBEYXRhUHJvdmlkZXIgfSBmcm9tICdhcHAvbW9kdWxlcy9peC10YWJsZS9pbnRlcmZhY2VzL2RhdGEtcHJvdmlkZXIuaW50ZXJmYWNlJztcbmltcG9ydCB7IFRlc3REaXJlY3RpdmUgfSBmcm9tICdhcHAvbW9kdWxlcy90ZXN0LWlkL3Rlc3QuZGlyZWN0aXZlJztcbmltcG9ydCB7IFRvb2x0aXBDb21wb25lbnQgfSBmcm9tICdhcHAvbW9kdWxlcy90b29sdGlwL3Rvb2x0aXAuY29tcG9uZW50JztcblxuQFVudGlsRGVzdHJveSgpXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdpeC10YWJsZS1oZWFkLCB0aGVhZFtpeC10YWJsZS1oZWFkXScsXG4gIHRlbXBsYXRlVXJsOiAnLi9peC10YWJsZS1oZWFkLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJ2l4LXRhYmxlLWhlYWQuY29tcG9uZW50LnNjc3MnXSxcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gIHN0YW5kYWxvbmU6IHRydWUsXG4gIGltcG9ydHM6IFtcbiAgICBOZ0NsYXNzLFxuICAgIE5nU3R5bGUsXG4gICAgSXhUYWJsZUhlYWRlckNlbGxEaXJlY3RpdmUsXG4gICAgSXhJY29uQ29tcG9uZW50LFxuICAgIFRlc3REaXJlY3RpdmUsXG4gICAgVG9vbHRpcENvbXBvbmVudCxcbiAgICBUcmFuc2xhdGVNb2R1bGUsXG4gIF0sXG59KVxuZXhwb3J0IGNsYXNzIEl4VGFibGVIZWFkQ29tcG9uZW50PFQ+IGltcGxlbWVudHMgQWZ0ZXJWaWV3SW5pdCB7XG4gIEBJbnB1dCgpIGNvbHVtbnM6IENvbHVtbjxULCBDb2x1bW5Db21wb25lbnQ8VD4+W107XG4gIEBJbnB1dCgpIGRhdGFQcm92aWRlcjogRGF0YVByb3ZpZGVyPFQ+O1xuXG4gIHJlYWRvbmx5IFNvcnREaXJlY3Rpb24gPSBTb3J0RGlyZWN0aW9uO1xuXG4gIGdldCBkaXNwbGF5ZWRDb2x1bW5zKCk6IENvbHVtbjxULCBDb2x1bW5Db21wb25lbnQ8VD4+W10ge1xuICAgIHJldHVybiB0aGlzLmNvbHVtbnM/LmZpbHRlcigoY29sdW1uKSA9PiAhY29sdW1uPy5oaWRkZW4pO1xuICB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBjZHI6IENoYW5nZURldGVjdG9yUmVmLFxuICApIHt9XG5cbiAgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xuICAgIHRoaXMuZGF0YVByb3ZpZGVyLmN1cnJlbnRQYWdlJC5waXBlKHVudGlsRGVzdHJveWVkKHRoaXMpKS5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgdGhpcy5jZHIuZGV0ZWN0Q2hhbmdlcygpO1xuICAgIH0pO1xuICB9XG5cbiAgb25Tb3J0KGNvbHVtbklkOiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5kaXNwbGF5ZWRDb2x1bW5zW2NvbHVtbklkXT8uZGlzYWJsZVNvcnRpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJyZW50RGlyZWN0aW9uID0gdGhpcy5kYXRhUHJvdmlkZXIuc29ydGluZy5kaXJlY3Rpb247XG4gICAgY29uc3QgY3VycmVudEFjdGl2ZSA9IHRoaXMuZGF0YVByb3ZpZGVyLnNvcnRpbmcuYWN0aXZlO1xuXG4gICAgbGV0IGRpcmVjdGlvbiA9IGN1cnJlbnREaXJlY3Rpb247XG4gICAgbGV0IGFjdGl2ZSA9IGN1cnJlbnRBY3RpdmU7XG5cbiAgICBpZiAoY3VycmVudEFjdGl2ZSAhPT0gY29sdW1uSWQpIHtcbiAgICAgIGRpcmVjdGlvbiA9IG51bGw7XG4gICAgICBhY3RpdmUgPSBjb2x1bW5JZDtcbiAgICB9XG4gICAgaWYgKGRpcmVjdGlvbiA9PT0gbnVsbCkge1xuICAgICAgZGlyZWN0aW9uID0gU29ydERpcmVjdGlvbi5Bc2M7XG4gICAgfSBlbHNlIGlmIChjdXJyZW50RGlyZWN0aW9uID09PSBTb3J0RGlyZWN0aW9uLkFzYykge1xuICAgICAgZGlyZWN0aW9uID0gU29ydERpcmVjdGlvbi5EZXNjO1xuICAgIH0gZWxzZSBpZiAoY3VycmVudERpcmVjdGlvbiA9PT0gU29ydERpcmVjdGlvbi5EZXNjKSB7XG4gICAgICBkaXJlY3Rpb24gPSBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHNvcnRCeSA9ICh0aGlzLmRpc3BsYXllZENvbHVtbnNbY29sdW1uSWRdLnNvcnRCeVxuICAgICAgfHwgdGhpcy5kaXNwbGF5ZWRDb2x1bW5zW2NvbHVtbklkXS5nZXRWYWx1ZSkgYXMgKHJvdzogVCkgPT4gc3RyaW5nIHwgbnVtYmVyO1xuXG4gICAgdGhpcy5kYXRhUHJvdmlkZXIuc2V0U29ydGluZyh7XG4gICAgICBwcm9wZXJ0eU5hbWU6IHRoaXMuZGlzcGxheWVkQ29sdW1uc1tjb2x1bW5JZF0ucHJvcGVydHlOYW1lLFxuICAgICAgc29ydEJ5LFxuICAgICAgZGlyZWN0aW9uLFxuICAgICAgYWN0aXZlLFxuICAgIH0pO1xuICB9XG59XG4iXSwidmVyc2lvbiI6M30=