{"file":"/Users/macbook/karpov-work/TrueNAS/webui/src/app/services/error-handler.service.spec.ts","mappings":"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","names":[],"sources":["/Users/macbook/karpov-work/TrueNAS/webui/src/app/services/error-handler.service.spec.ts"],"sourcesContent":["import { HttpErrorResponse, HttpEventType, HttpHeaders } from '@angular/common/http';\nimport { Injector } from '@angular/core';\nimport { createServiceFactory, mockProvider, SpectatorService } from '@ngneat/spectator/jest';\nimport { TranslateService } from '@ngx-translate/core';\nimport { of } from 'rxjs';\nimport { JobState } from 'app/enums/job-state.enum';\nimport { ResponseErrorType } from 'app/enums/response-error-type.enum';\nimport { WebSocketErrorName } from 'app/enums/websocket-error-name.enum';\nimport { Job } from 'app/interfaces/job.interface';\nimport { WebSocketError } from 'app/interfaces/websocket-error.interface';\nimport { DialogService } from 'app/modules/dialog/dialog.service';\nimport { ErrorHandlerService } from 'app/services/error-handler.service';\n\nconst error = new Error('Dummy Error');\nconst wsError = {\n  error: 11,\n  errname: WebSocketErrorName.Again,\n  type: ResponseErrorType.Validation,\n  reason: '[EINVAL] user_update.smb: This attribute cannot be changed\\n[EINVAL] user_update.smb: Password must be changed in order to enable SMB authentication\\n',\n  trace: {},\n  extra: [],\n} as WebSocketError;\n\nconst failedJob = {\n  method: 'cloudsync.sync_onetime',\n  description: null,\n  error: 'DUMMY_ERROR',\n  exception: 'EXCEPTION',\n  exc_info: null,\n  logs_excerpt: 'LOGS',\n  state: JobState.Failed,\n} as Job;\n\nconst excInfo = {\n  repr: 'ValidationErrors()',\n  type: 'VALIDATION',\n  extra: [\n    [\n      'cloud_sync_sync_onetime.path',\n      'DUMMY_ERROR',\n      22,\n    ],\n  ],\n};\n\nconst httpError: HttpErrorResponse = {\n  error: { name: 'This error' },\n  name: 'HttpErrorResponse',\n  message: 'This error occurred',\n  headers: new HttpHeaders(),\n  ok: false,\n  status: 409,\n  statusText: 'Conflict',\n  type: HttpEventType.Response,\n  url: '',\n};\n\ndescribe('ErrorHandlerService', () => {\n  let spectator: SpectatorService<ErrorHandlerService>;\n  const createService = createServiceFactory({\n    service: ErrorHandlerService,\n    providers: [\n      mockProvider(Injector, {\n        get: jest.fn(),\n      }),\n    ],\n  });\n\n  beforeEach(() => {\n    jest.resetAllMocks();\n    spectator = createService();\n\n    const dialogService = spectator.inject(DialogService);\n    Object.defineProperty(dialogService, 'error', {\n      value: jest.fn(() => of(true)),\n    });\n\n    Object.defineProperty(spectator.service, 'dialog', {\n      get: () => dialogService,\n    });\n\n    const translateService = spectator.inject(TranslateService);\n    Object.defineProperty(spectator.service, 'translate', {\n      value: translateService,\n    });\n\n    Object.defineProperty(spectator.service, 'logToSentry', {\n      value: jest.fn(),\n    });\n\n    jest.spyOn(console, 'error').mockImplementation();\n  });\n\n  afterAll(() => {\n    jest.restoreAllMocks();\n  });\n\n  describe('handleError', () => {\n    it('logs normal error to console and sentry', () => {\n      jest.spyOn(spectator.service, 'parseError');\n      spectator.service.handleError(error);\n\n      expect(console.error).toHaveBeenCalledWith(error);\n      expect(spectator.service.parseError).toHaveBeenCalledWith(error);\n      expect(spectator.service.logToSentry).toHaveBeenCalledWith({\n        message: 'Dummy Error',\n        title: 'Error',\n      });\n    });\n\n    it('does not log Websocket CloseEvent to Sentry', () => {\n      spectator.service.handleError(new CloseEvent('close'));\n\n      expect(spectator.service.logToSentry).not.toHaveBeenCalled();\n    });\n\n    it('logs websocket error', () => {\n      spectator.service.handleError(wsError);\n\n      expect(spectator.service.logToSentry).toHaveBeenCalledWith({\n        backtrace: '',\n        message: wsError.reason,\n        title: 'VALIDATION',\n      });\n    });\n\n    it('logs job errors', () => {\n      spectator.service.handleError(failedJob);\n\n      expect(spectator.service.logToSentry).toHaveBeenCalledWith({\n        title: 'FAILED',\n        backtrace: 'LOGS',\n        message: 'DUMMY_ERROR',\n      });\n    });\n\n    it('logs job error for jobs with `extra` available', () => {\n      spectator.service.handleError({\n        ...failedJob,\n        exc_info: excInfo,\n      });\n\n      expect(spectator.service.logToSentry).toHaveBeenCalledWith([{\n        backtrace: 'EXCEPTION',\n        message: 'DUMMY_ERROR',\n        title: 'Error: path',\n      }]);\n    });\n  });\n\n  describe('parseHttpError', () => {\n    it('returns correct error object with 409 error', () => {\n      const errorReport = spectator.service.parseHttpError(httpError);\n      expect(errorReport).toEqual([{ message: 'This error', title: 'Error' }]);\n    });\n\n    it('returns correct error object with 409 error with object', () => {\n      const errorReport = spectator.service.parseHttpError({\n        ...httpError,\n        error: { name: ['This error'] },\n      });\n      expect(errorReport).toEqual([{ message: 'This error', title: 'Error' }]);\n    });\n\n    it('returns correct object with 400 error', () => {\n      const errorReport = spectator.service.parseHttpError({\n        ...httpError,\n        status: 400,\n        statusText: 'Bad Request',\n      });\n      expect(errorReport).toEqual([{ message: 'This error', title: 'Error' }]);\n    });\n\n    it('returns correct object with 400 error without error object', () => {\n      const errorReport = spectator.service.parseHttpError({\n        ...httpError,\n        status: 400,\n        statusText: 'Bad Request',\n        error: 'That error',\n      });\n      expect(errorReport).toEqual({ message: 'That error', title: 'Error (400)' });\n    });\n\n    it('returns correct object with 404 error', () => {\n      const errorReport = spectator.service.parseHttpError({\n        ...httpError,\n        status: 404,\n        statusText: 'Not Found',\n      });\n      expect(errorReport).toEqual({ message: 'This error occurred', title: 'Not Found' });\n    });\n\n    it('returns correct object with 500 error', () => {\n      const errorReport = spectator.service.parseHttpError({\n        ...httpError,\n        status: 500,\n        statusText: 'Bad Request',\n        error: { error_message: 'Even error' },\n      });\n      expect(errorReport).toEqual({ message: 'Even error', title: 'Error (500)' });\n    });\n\n    it('returns correct object with 500 error and string', () => {\n      const errorReport = spectator.service.parseHttpError({\n        ...httpError,\n        status: 500,\n        statusText: 'Bad Request',\n        message: 'Odd error',\n      });\n      expect(errorReport).toEqual({ message: 'Server error: Odd error', title: 'Error (500)' });\n    });\n\n    it('returns proper object when unknown error', () => {\n      const errorReport = spectator.service.parseHttpError({\n        ...httpError,\n        status: 510,\n        statusText: 'Bad Request',\n        error: 'Odd error',\n      });\n\n      expect(console.error).toHaveBeenCalledWith({\n        ...httpError,\n        status: 510,\n        statusText: 'Bad Request',\n        error: 'Odd error',\n      });\n\n      expect(errorReport).toEqual({ message: 'This error occurred', title: 'Error (510)' });\n    });\n  });\n\n  describe('parseError', () => {\n    it('parses a websocket error', () => {\n      const errorReport = spectator.service.parseError(wsError);\n\n      expect(errorReport).toEqual({\n        title: 'VALIDATION',\n        message: wsError.reason,\n        backtrace: '',\n      });\n    });\n\n    it('parses a failed job', () => {\n      const errorReport = spectator.service.parseError(failedJob);\n\n      expect(errorReport).toEqual({\n        title: 'FAILED',\n        message: 'DUMMY_ERROR',\n        backtrace: 'LOGS',\n      });\n    });\n\n    it('parses a failed job with exc info', () => {\n      const errorReport = spectator.service.parseError({\n        ...failedJob,\n        exc_info: excInfo,\n      });\n\n      expect(errorReport).toEqual([{\n        title: 'Error: path',\n        message: 'DUMMY_ERROR',\n        backtrace: 'EXCEPTION',\n      }]);\n    });\n\n    it('parses a generic JS error', () => {\n      const errorReport = spectator.service.parseError(error);\n\n      expect(errorReport).toEqual({\n        title: 'Error',\n        message: 'Dummy Error',\n      });\n    });\n  });\n});\n"],"version":3}