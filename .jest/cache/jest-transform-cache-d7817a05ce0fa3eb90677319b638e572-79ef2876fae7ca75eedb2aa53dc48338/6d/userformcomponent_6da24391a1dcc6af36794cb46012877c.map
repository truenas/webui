{"file":"/Users/macbook/karpov-work/TrueNAS/webui/src/app/pages/credentials/users/user-form/user-form.component.ts","mappings":"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","names":[],"sources":["/Users/macbook/karpov-work/TrueNAS/webui/src/app/pages/credentials/users/user-form/user-form.component.ts"],"sourcesContent":["import {\n  Component, ChangeDetectionStrategy, ChangeDetectorRef, Inject, OnInit,\n} from '@angular/core';\nimport { Validators, ReactiveFormsModule } from '@angular/forms';\nimport { MatButton } from '@angular/material/button';\nimport { MatDivider } from '@angular/material/divider';\nimport { FormBuilder } from '@ngneat/reactive-forms';\nimport { untilDestroyed, UntilDestroy } from '@ngneat/until-destroy';\nimport { Store } from '@ngrx/store';\nimport { TranslateService, TranslateModule } from '@ngx-translate/core';\nimport {\n  from, Observable, of, Subscription,\n} from 'rxjs';\nimport {\n  debounceTime, filter, map, switchMap, take,\n} from 'rxjs/operators';\nimport { allCommands } from 'app/constants/all-commands.constant';\nimport { RequiresRolesDirective } from 'app/directives/requires-roles/requires-roles.directive';\nimport { WarnAboutUnsavedChangesDirective } from 'app/directives/warn-about-unsaved-changes/warn-about-unsaved-changes.directive';\nimport { Role } from 'app/enums/role.enum';\nimport { choicesToOptions } from 'app/helpers/operators/options.operators';\nimport { helptextUsers } from 'app/helptext/account/user-form';\nimport { Option } from 'app/interfaces/option.interface';\nimport { User, UserUpdate } from 'app/interfaces/user.interface';\nimport { DialogService } from 'app/modules/dialog/dialog.service';\nimport { SimpleAsyncComboboxProvider } from 'app/modules/forms/ix-forms/classes/simple-async-combobox-provider';\nimport { FormActionsComponent } from 'app/modules/forms/ix-forms/components/form-actions/form-actions.component';\nimport { IxCheckboxComponent } from 'app/modules/forms/ix-forms/components/ix-checkbox/ix-checkbox.component';\nimport { ChipsProvider } from 'app/modules/forms/ix-forms/components/ix-chips/chips-provider';\nimport { IxChipsComponent } from 'app/modules/forms/ix-forms/components/ix-chips/ix-chips.component';\nimport { IxComboboxComponent } from 'app/modules/forms/ix-forms/components/ix-combobox/ix-combobox.component';\nimport { IxExplorerComponent } from 'app/modules/forms/ix-forms/components/ix-explorer/ix-explorer.component';\nimport { IxFieldsetComponent } from 'app/modules/forms/ix-forms/components/ix-fieldset/ix-fieldset.component';\nimport { IxFileInputComponent } from 'app/modules/forms/ix-forms/components/ix-file-input/ix-file-input.component';\nimport { IxInputComponent } from 'app/modules/forms/ix-forms/components/ix-input/ix-input.component';\nimport { IxPermissionsComponent } from 'app/modules/forms/ix-forms/components/ix-permissions/ix-permissions.component';\nimport { IxSelectComponent } from 'app/modules/forms/ix-forms/components/ix-select/ix-select.component';\nimport {\n  IxModalHeaderComponent,\n} from 'app/modules/forms/ix-forms/components/ix-slide-in/components/ix-modal-header/ix-modal-header.component';\nimport { IxSlideInRef } from 'app/modules/forms/ix-forms/components/ix-slide-in/ix-slide-in-ref';\nimport { SLIDE_IN_DATA } from 'app/modules/forms/ix-forms/components/ix-slide-in/ix-slide-in.token';\nimport {\n  IxSlideToggleComponent,\n} from 'app/modules/forms/ix-forms/components/ix-slide-toggle/ix-slide-toggle.component';\nimport { IxTextareaComponent } from 'app/modules/forms/ix-forms/components/ix-textarea/ix-textarea.component';\nimport { FormErrorHandlerService } from 'app/modules/forms/ix-forms/services/form-error-handler.service';\nimport { IxValidatorsService } from 'app/modules/forms/ix-forms/services/ix-validators.service';\nimport { emailValidator } from 'app/modules/forms/ix-forms/validators/email-validation/email-validation';\nimport { forbiddenValues } from 'app/modules/forms/ix-forms/validators/forbidden-values-validation/forbidden-values-validation';\nimport { matchOthersFgValidator } from 'app/modules/forms/ix-forms/validators/password-validation/password-validation';\nimport { SnackbarService } from 'app/modules/snackbar/services/snackbar.service';\nimport { TestDirective } from 'app/modules/test-id/test.directive';\nimport { userAdded, userChanged } from 'app/pages/credentials/users/store/user.actions';\nimport { selectUsers } from 'app/pages/credentials/users/store/user.selectors';\nimport { DownloadService } from 'app/services/download.service';\nimport { FilesystemService } from 'app/services/filesystem.service';\nimport { StorageService } from 'app/services/storage.service';\nimport { UserService } from 'app/services/user.service';\nimport { WebSocketService } from 'app/services/ws.service';\nimport { AppState } from 'app/store';\n\nconst defaultHomePath = '/var/empty';\n\n@UntilDestroy({ arrayName: 'subscriptions' })\n@Component({\n  selector: 'ix-user-form',\n  templateUrl: './user-form.component.html',\n  styleUrls: ['./user-form.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  standalone: true,\n  imports: [\n    IxModalHeaderComponent,\n    ReactiveFormsModule,\n    IxFieldsetComponent,\n    IxInputComponent,\n    IxSlideToggleComponent,\n    MatDivider,\n    IxChipsComponent,\n    IxComboboxComponent,\n    IxExplorerComponent,\n    IxPermissionsComponent,\n    IxCheckboxComponent,\n    IxTextareaComponent,\n    IxFileInputComponent,\n    IxSelectComponent,\n    FormActionsComponent,\n    RequiresRolesDirective,\n    MatButton,\n    TestDirective,\n    TranslateModule,\n    WarnAboutUnsavedChangesDirective,\n  ],\n})\nexport class UserFormComponent implements OnInit {\n  isFormLoading = false;\n  subscriptions: Subscription[] = [];\n  homeModeOldValue = '';\n  protected readonly requiredRoles = [Role.AccountWrite];\n\n  get isNewUser(): boolean {\n    return !this.editingUser;\n  }\n\n  get title(): string {\n    return this.isNewUser ? this.translate.instant('Add User') : this.translate.instant('Edit User');\n  }\n\n  get isEditingBuiltinUser(): boolean {\n    return !this.isNewUser && this.editingUser.builtin;\n  }\n\n  form = this.fb.group({\n    full_name: ['', [Validators.required]],\n    username: ['', [\n      Validators.required,\n      Validators.pattern(UserService.namePattern),\n      Validators.maxLength(32),\n    ]],\n    email: ['', [emailValidator()]],\n    password: ['', [\n      this.validatorsService.validateOnCondition(\n        () => this.isNewUser,\n        Validators.required,\n      ),\n    ]],\n    password_conf: ['', [\n      this.validatorsService.validateOnCondition(\n        () => this.isNewUser,\n        Validators.required,\n      ),\n    ]],\n    uid: [null as number, [Validators.required]],\n    group: [null as number],\n    group_create: [true],\n    groups: [[] as number[]],\n    home: [defaultHomePath, []],\n    home_mode: ['700'],\n    home_create: [false],\n    sshpubkey: [null as string],\n    sshpubkey_file: [null as File[]],\n    password_disabled: [false],\n    shell: [null as string],\n    locked: [false],\n    sudo_commands: [[] as string[]],\n    sudo_commands_all: [false],\n    sudo_commands_nopasswd: [[] as string[]],\n    sudo_commands_nopasswd_all: [false],\n    smb: [true],\n    ssh_password_enabled: [false],\n  });\n\n  readonly tooltips = {\n    full_name: helptextUsers.user_form_full_name_tooltip,\n    username: helptextUsers.user_form_username_tooltip,\n    email: helptextUsers.user_form_email_tooltip,\n    password: helptextUsers.user_form_password_tooltip,\n    password_edit: helptextUsers.user_form_password_edit_tooltip,\n    password_conf_edit: helptextUsers.user_form_password_edit_tooltip,\n    uid: helptextUsers.user_form_uid_tooltip,\n    group: helptextUsers.user_form_primary_group_tooltip,\n    group_create: helptextUsers.user_form_group_create_tooltip,\n    groups: helptextUsers.user_form_aux_groups_tooltip,\n    home: helptextUsers.user_form_dirs_explorer_tooltip,\n    home_mode: helptextUsers.user_form_home_dir_permissions_tooltip,\n    home_create: helptextUsers.user_form_home_create_tooltip,\n    sshpubkey: helptextUsers.user_form_auth_sshkey_tooltip,\n    password_disabled: helptextUsers.user_form_auth_pw_enable_tooltip,\n    shell: helptextUsers.user_form_shell_tooltip,\n    locked: helptextUsers.user_form_lockuser_tooltip,\n    smb: helptextUsers.user_form_smb_tooltip,\n    smbBuiltin: helptextUsers.smbBuiltin,\n  };\n\n  readonly groupOptions$ = this.ws.call('group.query').pipe(\n    map((groups) => groups.map((group) => ({ label: group.group, value: group.id }))),\n  );\n\n  shellOptions$: Observable<Option[]>;\n  readonly treeNodeProvider = this.filesystemService.getFilesystemNodeProvider({ directoriesOnly: true });\n  readonly groupProvider = new SimpleAsyncComboboxProvider(this.groupOptions$);\n  autocompleteProvider: ChipsProvider = (query: string) => {\n    return this.userService.groupQueryDsCache(query).pipe(\n      map((groups) => groups.map((group) => group.group)),\n    );\n  };\n\n  get homeCreateWarning(): string {\n    const homeCreate = this.form.value.home_create;\n    const home = this.form.value.home;\n    const homeMode = this.form.value.home_mode;\n    if (this.isNewUser) {\n      if (!homeCreate && home !== defaultHomePath) {\n        return this.translate.instant(\n          'With this configuration, the existing directory {path} will be used as a home directory without creating a new directory for the user.',\n          { path: '\\'' + this.form.value.home + '\\'' },\n        );\n      }\n    } else {\n      if (this.editingUser.immutable || home === defaultHomePath) {\n        return '';\n      }\n      if (!homeCreate && this.editingUser.home !== home) {\n        return this.translate.instant(\n          'Operation will change permissions on path: {path}',\n          { path: '\\'' + this.form.value.home + '\\'' },\n        );\n      }\n      if (!homeCreate && !!homeMode && this.homeModeOldValue !== homeMode) {\n        return this.translate.instant(\n          'Operation will change permissions on path: {path}',\n          { path: '\\'' + this.form.value.home + '\\'' },\n        );\n      }\n    }\n    return '';\n  }\n\n  constructor(\n    private ws: WebSocketService,\n    private errorHandler: FormErrorHandlerService,\n    private cdr: ChangeDetectorRef,\n    private fb: FormBuilder,\n    private translate: TranslateService,\n    private validatorsService: IxValidatorsService,\n    private filesystemService: FilesystemService,\n    private slideInRef: IxSlideInRef<UserFormComponent>,\n    private snackbar: SnackbarService,\n    private storageService: StorageService,\n    private downloadService: DownloadService,\n    private store$: Store<AppState>,\n    private dialog: DialogService,\n    private userService: UserService,\n    @Inject(SLIDE_IN_DATA) private editingUser: User,\n  ) {\n    this.form.controls.smb.errors$.pipe(\n      filter((error) => error?.manualValidateErrorMsg),\n      switchMap(() => this.form.controls.password.valueChanges),\n      untilDestroyed(this),\n    ).subscribe(() => {\n      if (this.form.controls.smb.invalid) {\n        this.form.controls.smb.updateValueAndValidity();\n      }\n    });\n  }\n\n  ngOnInit(): void {\n    this.setupForm();\n  }\n\n  setupForm(): void {\n    this.form.controls.sshpubkey_file.valueChanges.pipe(\n      switchMap((files: File[]) => {\n        return !files?.length ? of('') : from(files[0].text());\n      }),\n      untilDestroyed(this),\n    ).subscribe((key) => {\n      this.form.controls.sshpubkey.setValue(key);\n    });\n\n    this.form.controls.group.valueChanges.pipe(debounceTime(300), untilDestroyed(this)).subscribe((group) => {\n      this.updateShellOptions(group, this.form.value.groups);\n    });\n\n    this.form.controls.groups.valueChanges.pipe(debounceTime(300), untilDestroyed(this)).subscribe((groups) => {\n      this.updateShellOptions(this.form.value.group, groups);\n    });\n\n    this.form.controls.home.valueChanges.pipe(untilDestroyed(this)).subscribe((home) => {\n      if (home === defaultHomePath || this.editingUser?.immutable) {\n        this.form.controls.home_mode.disable();\n      } else {\n        this.form.controls.home_mode.enable();\n      }\n    });\n\n    this.form.controls.home_create.valueChanges.pipe(untilDestroyed(this)).subscribe((checked) => {\n      if (checked) {\n        this.form.patchValue({ home_mode: '700' });\n      }\n    });\n\n    this.form.addValidators(\n      matchOthersFgValidator(\n        'password_conf',\n        ['password'],\n        this.translate.instant(this.isNewUser ? 'Password and confirmation should match.' : 'New password and confirmation should match.'),\n      ),\n    );\n\n    if (this.editingUser?.home && this.editingUser.home !== defaultHomePath) {\n      this.storageService.filesystemStat(this.editingUser.home).pipe(untilDestroyed(this)).subscribe((stat) => {\n        this.form.patchValue({ home_mode: stat.mode.toString(8).substring(2, 5) });\n        this.homeModeOldValue = stat.mode.toString(8).substring(2, 5);\n      });\n    } else {\n      this.form.patchValue({ home_mode: '700' });\n      this.form.controls.home_mode.disable();\n    }\n    this.subscriptions.push(\n      this.form.controls.locked.disabledWhile(this.form.controls.password_disabled.value$),\n      this.form.controls.password.disabledWhile(this.form.controls.password_disabled.value$),\n      this.form.controls.password_conf.disabledWhile(this.form.controls.password_disabled.value$),\n      this.form.controls.group.disabledWhile(this.form.controls.group_create.value$),\n      this.form.controls.sudo_commands.disabledWhile(this.form.controls.sudo_commands_all.value$),\n      this.form.controls.sudo_commands_nopasswd.disabledWhile(this.form.controls.sudo_commands_nopasswd_all.value$),\n    );\n\n    if (this.isNewUser) {\n      this.setupNewUserForm();\n    } else {\n      this.setupEditUserForm(this.editingUser);\n    }\n  }\n\n  onSubmit(): void {\n    const values = this.form.value;\n    const body: UserUpdate = {\n      email: values.email ? values.email : null,\n      full_name: values.full_name,\n      group: values.group,\n      groups: values.groups,\n      home_mode: this.homeModeOldValue !== values.home_mode ? values.home_mode : undefined,\n      home_create: values.home_create,\n      home: values.home,\n      locked: values.password_disabled ? false : values.locked,\n      password_disabled: values.password_disabled,\n      shell: values.shell,\n      smb: values.smb,\n      ssh_password_enabled: values.ssh_password_enabled,\n      sshpubkey: values.sshpubkey ? values.sshpubkey.trim() : values.sshpubkey,\n      sudo_commands: values.sudo_commands_all ? [allCommands] : values.sudo_commands,\n      sudo_commands_nopasswd: values.sudo_commands_nopasswd_all ? [allCommands] : values.sudo_commands_nopasswd,\n      username: values.username,\n    };\n\n    let homeCreateWarningConfirmation$ = of(true);\n    if (this.homeCreateWarning) {\n      homeCreateWarningConfirmation$ = this.dialog.confirm({\n        title: this.translate.instant('Warning!'),\n        message: this.homeCreateWarning,\n      });\n    }\n\n    homeCreateWarningConfirmation$.pipe(\n      filter(Boolean),\n      untilDestroyed(this),\n    ).subscribe({\n      next: () => {\n        this.isFormLoading = true;\n        this.cdr.markForCheck();\n\n        let request$: Observable<number>;\n        let nextRequest$: Observable<number>;\n        if (this.isNewUser) {\n          request$ = this.ws.call('user.create', [{\n            ...body,\n            group_create: values.group_create,\n            password: values.password,\n            uid: values.uid,\n          }]);\n        } else {\n          const passwordNotEmpty = values.password !== '' && values.password_conf !== '';\n          if (passwordNotEmpty && !values.password_disabled) {\n            body.password = values.password;\n          }\n          if (body.home_create) {\n            request$ = this.ws.call('user.update', [this.editingUser.id, { home_create: true, home: body.home }]);\n            delete body.home_create;\n            delete body.home;\n            nextRequest$ = this.ws.call('user.update', [this.editingUser.id, body]);\n          } else {\n            request$ = this.ws.call('user.update', [this.editingUser.id, body]);\n          }\n        }\n\n        request$.pipe(\n          switchMap((id) => nextRequest$ || of(id)),\n          filter(Boolean),\n          switchMap((id) => this.ws.call('user.query', [[['id', '=', id]]])),\n          map((users) => users[0]),\n          untilDestroyed(this),\n        ).subscribe({\n          next: (user) => {\n            if (this.isNewUser) {\n              this.snackbar.success(this.translate.instant('User added'));\n              this.store$.dispatch(userAdded({ user }));\n            } else {\n              this.snackbar.success(this.translate.instant('User updated'));\n              this.store$.dispatch(userChanged({ user }));\n            }\n            this.isFormLoading = false;\n            this.slideInRef.close();\n            this.cdr.markForCheck();\n          },\n          error: (error: unknown) => {\n            this.isFormLoading = false;\n            this.errorHandler.handleWsFormError(error, this.form);\n            this.cdr.markForCheck();\n          },\n        });\n      },\n      complete: () => {\n      },\n    });\n  }\n\n  onDownloadSshPublicKey(): void {\n    const name = this.form.controls.username.value;\n    const key = this.form.controls.sshpubkey.value;\n    const blob = new Blob([key], { type: 'text/plain' });\n    this.downloadService.downloadBlob(blob, `${name}_public_key_rsa`);\n  }\n\n  private setupNewUserForm(): void {\n    this.setNamesInUseValidator();\n    this.setHomeSharePath();\n    this.setNextUserId();\n    this.setFirstShellOption();\n    this.detectFullNameChanges();\n\n    this.subscriptions.push(\n      this.form.controls.password.disabledWhile(this.form.controls.password_disabled.value$),\n      this.form.controls.password_conf.disabledWhile(this.form.controls.password_disabled.value$),\n      this.form.controls.locked.disabledWhile(this.form.controls.password_disabled.value$),\n    );\n  }\n\n  private setupEditUserForm(user: User): void {\n    this.form.patchValue({\n      email: user.email,\n      full_name: user.full_name,\n      group_create: false,\n      group: user.group.id,\n      groups: user.groups,\n      home: user.home,\n      locked: user.locked,\n      password_disabled: user.password_disabled,\n      shell: user.shell,\n      smb: user.smb,\n      sshpubkey: user.sshpubkey,\n      ssh_password_enabled: user.ssh_password_enabled,\n      sudo_commands: user.sudo_commands?.includes(allCommands) ? [] : user.sudo_commands,\n      sudo_commands_all: user.sudo_commands?.includes(allCommands),\n      sudo_commands_nopasswd: user.sudo_commands_nopasswd?.includes(allCommands) ? [] : user.sudo_commands_nopasswd,\n      sudo_commands_nopasswd_all: user.sudo_commands_nopasswd?.includes(allCommands),\n      uid: user.uid,\n      username: user.username,\n    });\n\n    this.form.controls.uid.disable();\n    this.form.controls.group_create.disable();\n\n    if (user.immutable) {\n      this.form.controls.group.disable();\n      this.form.controls.home_mode.disable();\n      this.form.controls.home.disable();\n      this.form.controls.home_create.disable();\n      this.form.controls.username.disable();\n    }\n\n    if (user.builtin) {\n      this.form.controls.smb.disable();\n    }\n\n    this.setNamesInUseValidator(user.username);\n  }\n\n  private detectFullNameChanges(): void {\n    this.form.controls.full_name.valueChanges.pipe(\n      map((fullName) => this.getUserName(fullName)),\n      filter((username) => !!username),\n      untilDestroyed(this),\n    ).subscribe((username) => {\n      this.form.patchValue({ username });\n      this.form.controls.username.markAsTouched();\n    });\n  }\n\n  private setHomeSharePath(): void {\n    this.ws.call('sharing.smb.query', [[\n      ['enabled', '=', true],\n      ['home', '=', true],\n    ]]).pipe(\n      filter((shares) => !!shares.length),\n      map((shares) => shares[0].path),\n      untilDestroyed(this),\n    ).subscribe((homeSharePath) => {\n      this.form.patchValue({ home: homeSharePath });\n    });\n  }\n\n  private setNextUserId(): void {\n    this.ws.call('user.get_next_uid').pipe(untilDestroyed(this)).subscribe((nextUid) => {\n      this.form.patchValue({ uid: nextUid });\n    });\n  }\n\n  private setFirstShellOption(): void {\n    this.ws.call('user.shell_choices', [this.form.value.groups]).pipe(\n      choicesToOptions(),\n      filter((shells) => !!shells.length),\n      map((shells) => shells[0].value),\n      untilDestroyed(this),\n    ).subscribe((firstShell: string) => {\n      this.form.patchValue({ shell: firstShell });\n    });\n  }\n\n  private setNamesInUseValidator(currentName?: string): void {\n    this.store$.select(selectUsers).pipe(untilDestroyed(this)).subscribe((users) => {\n      let forbiddenNames = users.map((user) => user.username);\n      if (currentName) {\n        forbiddenNames = forbiddenNames.filter((name) => name !== currentName);\n      }\n      this.form.controls.username.addValidators(forbiddenValues(forbiddenNames));\n    });\n  }\n\n  private getUserName(fullName: string): string {\n    let username: string;\n    const formatted = fullName.trim().split(/[\\s,]+/);\n    if (formatted.length === 1) {\n      username = formatted[0];\n    } else {\n      username = formatted[0][0] + formatted.pop();\n    }\n    if (username.length >= 8) {\n      username = username.substring(0, 8);\n    }\n\n    return username.toLocaleLowerCase();\n  }\n\n  private updateShellOptions(group: number, groups: number[]): void {\n    const ids = new Set<number>(groups);\n    if (group) {\n      ids.add(group);\n    }\n\n    this.ws.call('user.shell_choices', [Array.from(ids)])\n      .pipe(choicesToOptions(), take(1), untilDestroyed(this))\n      .subscribe((options) => {\n        this.shellOptions$ = of(options);\n        this.cdr.markForCheck();\n      });\n  }\n}\n"],"version":3}