{"file":"/Users/macbook/karpov-work/TrueNAS/webui/src/app/helpers/operators/apply-api-event.operator.ts","mappings":";;AAMA,sCAgBC;AAtBD,+BAA6C;AAC7C,2EAAyE;AAKzE,SAAgB,aAAa;IAG3B,OAAO,IAAA,UAAG,EAAC,CAAC,CAAC,KAAK,EAAE,KAAK,CAAC,EAAE,EAAE;QAC5B,QAAQ,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,GAAG,EAAE,CAAC;YACnB,KAAK,8CAAsB,CAAC,KAAK;gBAC/B,OAAO,CAAC,GAAG,KAAK,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC;YAClC,KAAK,8CAAsB,CAAC,OAAO;gBACjC,OAAO,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,EAAE,KAAK,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;YAC3E,KAAK,8CAAsB,CAAC,OAAO;gBACjC,OAAO,KAAK,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,EAAE,KAAK,KAAK,CAAC,EAAE,CAAC,CAAC;YACtD;gBACE,MAAM;QACV,CAAC;QACD,OAAO,KAAK,CAAC;IACf,CAAC,CAAC,CAAC;AACL,CAAC","names":[],"sources":["/Users/macbook/karpov-work/TrueNAS/webui/src/app/helpers/operators/apply-api-event.operator.ts"],"sourcesContent":["import { OperatorFunction, map } from 'rxjs';\nimport { IncomingApiMessageType } from 'app/enums/api-message-type.enum';\nimport { ApiCallAndSubscribeMethod, ApiCallAndSubscribeResponse } from 'app/interfaces/api/api-call-and-subscribe-directory.interface';\nimport { ApiCallResponse } from 'app/interfaces/api/api-call-directory.interface';\nimport { ApiEventTyped } from 'app/interfaces/api-message.interface';\n\nexport function applyApiEvent<\n  M extends ApiCallAndSubscribeMethod,\n>(): OperatorFunction<[ApiCallResponse<M>, ApiEventTyped<M>], ApiCallAndSubscribeResponse<M>[]> {\n  return map(([items, event]) => {\n    switch (event?.msg) {\n      case IncomingApiMessageType.Added:\n        return [...items, event.fields];\n      case IncomingApiMessageType.Changed:\n        return items.map((item) => (item.id === event.id ? event.fields : item));\n      case IncomingApiMessageType.Removed:\n        return items.filter((item) => item.id !== event.id);\n      default:\n        break;\n    }\n    return items;\n  });\n}\n"],"version":3}