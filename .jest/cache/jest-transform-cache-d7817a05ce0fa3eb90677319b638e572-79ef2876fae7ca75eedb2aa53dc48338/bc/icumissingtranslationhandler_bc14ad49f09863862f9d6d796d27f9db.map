{"file":"/Users/macbook/karpov-work/TrueNAS/webui/src/app/core/classes/icu-missing-translation-handler.ts","mappings":";;;;;;AAAA,+DAAgD;AAGhD;;;;GAIG;AACH,MAAa,4BAA4B;IAAzC;QACU,kBAAa,GAAG,IAAI,cAAa,CAAC,IAAI,CAAC,CAAC;IAclD,CAAC;IAZC,MAAM,CAAC,MAAuC;QAC5C,IAAI,CAAC;YACH,MAAM,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YACxD,IAAI,CAAC,QAAQ,IAAI,CAAC,MAAM,CAAC,iBAAiB,EAAE,CAAC;gBAC3C,OAAO,MAAM,CAAC,GAAG,CAAC;YACpB,CAAC;YACD,OAAO,QAAQ,CAAC,MAAM,CAAC,iBAAwD,CAAC,CAAC;QACnF,CAAC;QAAC,OAAO,KAAc,EAAE,CAAC;YACxB,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YACrB,OAAO,MAAM,CAAC,GAAG,CAAC;QACpB,CAAC;IACH,CAAC;CACF;AAfD,oEAeC","names":[],"sources":["/Users/macbook/karpov-work/TrueNAS/webui/src/app/core/classes/icu-missing-translation-handler.ts"],"sourcesContent":["import MessageFormat from '@messageformat/core';\nimport { MissingTranslationHandler, MissingTranslationHandlerParams } from '@ngx-translate/core';\n\n/**\n * Messages in ICU format only get compiled when they are loaded from json file.\n * If for whatever reason message is absent from a json file, we don't want to show broken strings in the UI.\n * This will assume key is in ICU format and compile on the fly.\n */\nexport class IcuMissingTranslationHandler implements MissingTranslationHandler {\n  private messageFormat = new MessageFormat('en');\n\n  handle(params: MissingTranslationHandlerParams): string {\n    try {\n      const compiled = this.messageFormat.compile(params.key);\n      if (!compiled || !params.interpolateParams) {\n        return params.key;\n      }\n      return compiled(params.interpolateParams as Record<string, unknown> | unknown[]);\n    } catch (error: unknown) {\n      console.error(error);\n      return params.key;\n    }\n  }\n}\n"],"version":3}