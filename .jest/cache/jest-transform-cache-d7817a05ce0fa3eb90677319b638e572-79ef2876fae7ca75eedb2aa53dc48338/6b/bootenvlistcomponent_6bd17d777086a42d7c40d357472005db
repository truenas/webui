5ad912f8cb7d99188aa9b5e5ce304feb
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.BootEnvironmentListComponent = void 0;
const common_1 = require("@angular/common");
const core_1 = require("@angular/core");
const button_1 = require("@angular/material/button");
const dialog_1 = require("@angular/material/dialog");
const slide_toggle_1 = require("@angular/material/slide-toggle");
const router_1 = require("@angular/router");
const until_destroy_1 = require("@ngneat/until-destroy");
const core_2 = require("@ngx-translate/core");
const rxjs_1 = require("rxjs");
const requires_roles_directive_1 = require("app/directives/requires-roles/requires-roles.directive");
const ui_search_directive_1 = require("app/directives/ui-search.directive");
const boot_environment_action_enum_1 = require("app/enums/boot-environment-action.enum");
const boot_environment_active_enum_1 = require("app/enums/boot-environment-active.enum");
const role_enum_1 = require("app/enums/role.enum");
const boot_env_1 = require("app/helptext/system/boot-env");
const dialog_service_1 = require("app/modules/dialog/dialog.service");
const empty_service_1 = require("app/modules/empty/empty.service");
const search_input1_component_1 = require("app/modules/forms/search-input1/search-input1.component");
const icon_marker_util_1 = require("app/modules/ix-icon/icon-marker.util");
const ix_icon_component_1 = require("app/modules/ix-icon/ix-icon.component");
const async_data_provider_1 = require("app/modules/ix-table/classes/async-data-provider/async-data-provider");
const ix_table_component_1 = require("app/modules/ix-table/components/ix-table/ix-table.component");
const ix_cell_actions_component_1 = require("app/modules/ix-table/components/ix-table-body/cells/ix-cell-actions/ix-cell-actions.component");
const ix_cell_checkbox_component_1 = require("app/modules/ix-table/components/ix-table-body/cells/ix-cell-checkbox/ix-cell-checkbox.component");
const ix_cell_date_component_1 = require("app/modules/ix-table/components/ix-table-body/cells/ix-cell-date/ix-cell-date.component");
const ix_cell_size_component_1 = require("app/modules/ix-table/components/ix-table-body/cells/ix-cell-size/ix-cell-size.component");
const ix_cell_text_component_1 = require("app/modules/ix-table/components/ix-table-body/cells/ix-cell-text/ix-cell-text.component");
const ix_cell_yes_no_component_1 = require("app/modules/ix-table/components/ix-table-body/cells/ix-cell-yes-no/ix-cell-yes-no.component");
const ix_table_body_component_1 = require("app/modules/ix-table/components/ix-table-body/ix-table-body.component");
const ix_table_head_component_1 = require("app/modules/ix-table/components/ix-table-head/ix-table-head.component");
const ix_table_pager_component_1 = require("app/modules/ix-table/components/ix-table-pager/ix-table-pager.component");
const ix_table_empty_directive_1 = require("app/modules/ix-table/directives/ix-table-empty.directive");
const sort_direction_enum_1 = require("app/modules/ix-table/enums/sort-direction.enum");
const utils_1 = require("app/modules/ix-table/utils");
const app_loader_service_1 = require("app/modules/loader/app-loader.service");
const page_header_component_1 = require("app/modules/page-header/page-title-header/page-header.component");
const snackbar_service_1 = require("app/modules/snackbar/services/snackbar.service");
const test_directive_1 = require("app/modules/test-id/test.directive");
const boot_pool_delete_dialog_component_1 = require("app/pages/system/bootenv/boot-pool-delete-dialog/boot-pool-delete-dialog.component");
const bootenv_form_component_1 = require("app/pages/system/bootenv/bootenv-form/bootenv-form.component");
const bootenv_list_elements_1 = require("app/pages/system/bootenv/bootenv-list/bootenv-list.elements");
const bootenv_stats_dialog_component_1 = require("app/pages/system/bootenv/bootenv-stats-dialog/bootenv-stats-dialog.component");
const error_handler_service_1 = require("app/services/error-handler.service");
const ix_slide_in_service_1 = require("app/services/ix-slide-in.service");
const ws_service_1 = require("app/services/ws.service");
let BootEnvironmentListComponent = class BootEnvironmentListComponent {
    get selectedBootenvs() {
        return this.bootenvs.filter((bootenv) => bootenv.selected);
    }
    get selectionHasItems() {
        return this.selectedBootenvs.some((bootenv) => [boot_environment_active_enum_1.BootEnvironmentActive.Dash, boot_environment_active_enum_1.BootEnvironmentActive.Empty].includes(bootenv.active));
    }
    constructor(ws, matDialog, translate, slideInService, loader, dialogService, errorHandler, snackbar, emptyService) {
        this.ws = ws;
        this.matDialog = matDialog;
        this.translate = translate;
        this.slideInService = slideInService;
        this.loader = loader;
        this.dialogService = dialogService;
        this.errorHandler = errorHandler;
        this.snackbar = snackbar;
        this.emptyService = emptyService;
        this.requiredRoles = [role_enum_1.Role.FullAdmin];
        this.searchableElements = bootenv_list_elements_1.bootListElements;
        this.filterString = '';
        this.columns = (0, utils_1.createTable)([
            (0, ix_cell_checkbox_component_1.checkboxColumn)({
                propertyName: 'selected',
                onRowCheck: (row, checked) => {
                    this.bootenvs.find((bootenv) => row.id === bootenv.id).selected = checked;
                    this.dataProvider.setRows([]);
                    this.onListFiltered(this.filterString);
                },
                onColumnCheck: (checked) => {
                    this.dataProvider.currentPage$.pipe((0, rxjs_1.take)(1), (0, until_destroy_1.untilDestroyed)(this)).subscribe((bootEnvs) => {
                        bootEnvs.forEach((bootEnv) => bootEnv.selected = checked);
                        this.dataProvider.setRows([]);
                        this.onListFiltered(this.filterString);
                    });
                },
                cssClass: 'checkboxs-column',
            }),
            (0, ix_cell_text_component_1.textColumn)({
                title: this.translate.instant('Name'),
                propertyName: 'name',
            }),
            (0, ix_cell_text_component_1.textColumn)({
                title: this.translate.instant('Active'),
                propertyName: 'active',
                getValue: (row) => {
                    switch (row.active) {
                        case boot_environment_active_enum_1.BootEnvironmentActive.Now:
                            return this.translate.instant('Now');
                        case boot_environment_active_enum_1.BootEnvironmentActive.Restart:
                            return this.translate.instant('Restart');
                        case boot_environment_active_enum_1.BootEnvironmentActive.NowReboot:
                            return this.translate.instant('Now/Restart');
                        default:
                            return row.active;
                    }
                },
            }),
            (0, ix_cell_date_component_1.dateColumn)({
                title: this.translate.instant('Date Created'),
                propertyName: 'created',
                sortBy: (row) => row.created.$date,
            }),
            (0, ix_cell_size_component_1.sizeColumn)({
                title: this.translate.instant('Space'),
                propertyName: 'rawspace',
            }),
            (0, ix_cell_yes_no_component_1.yesNoColumn)({
                title: this.translate.instant('Keep'),
                propertyName: 'keep',
                cssClass: 'keep-column',
            }),
            (0, ix_cell_actions_component_1.actionsColumn)({
                actions: [
                    {
                        iconName: (0, icon_marker_util_1.iconMarker)('mdi-check-decagram'),
                        requiredRoles: this.requiredRoles,
                        tooltip: this.translate.instant('Activate'),
                        hidden: (row) => (0, rxjs_1.of)(row.active.includes('R')),
                        onClick: (row) => this.doActivate(row),
                    },
                    {
                        iconName: (0, icon_marker_util_1.iconMarker)('mdi-content-copy'),
                        requiredRoles: this.requiredRoles,
                        tooltip: this.translate.instant('Clone'),
                        onClick: (row) => this.doClone(row),
                    },
                    {
                        iconName: (0, icon_marker_util_1.iconMarker)('mdi-rename-box'),
                        requiredRoles: this.requiredRoles,
                        tooltip: this.translate.instant('Rename'),
                        onClick: (row) => this.doRename(row),
                    },
                    {
                        iconName: (0, icon_marker_util_1.iconMarker)('bookmark'),
                        requiredRoles: this.requiredRoles,
                        tooltip: this.translate.instant('Keep'),
                        hidden: (row) => (0, rxjs_1.of)(row.keep),
                        onClick: (row) => this.toggleKeep(row),
                    },
                    {
                        iconName: (0, icon_marker_util_1.iconMarker)('bookmark_border'),
                        requiredRoles: this.requiredRoles,
                        tooltip: this.translate.instant('Unkeep'),
                        hidden: (row) => (0, rxjs_1.of)(!row.keep),
                        onClick: (row) => this.toggleKeep(row),
                    },
                    {
                        iconName: (0, icon_marker_util_1.iconMarker)('mdi-delete'),
                        requiredRoles: this.requiredRoles,
                        tooltip: this.translate.instant('Delete'),
                        hidden: (row) => (0, rxjs_1.of)(![boot_environment_active_enum_1.BootEnvironmentActive.Dash, boot_environment_active_enum_1.BootEnvironmentActive.Empty].includes(row.active)),
                        onClick: (row) => this.doDelete([row]),
                    },
                ],
                cssClass: 'actions-column',
            }),
        ], {
            uniqueRowTag: (row) => `bootenv-${row.name}`,
            ariaLabels: (row) => [row.name, this.translate.instant('Boot Environment')],
        });
        this.bootenvs = [];
    }
    ngOnInit() {
        const request$ = this.ws.call('bootenv.query').pipe((0, rxjs_1.map)((bootenvs) => {
            this.bootenvs = bootenvs.map((bootenv) => (Object.assign(Object.assign({}, bootenv), { selected: false })));
            return this.bootenvs;
        }));
        this.dataProvider = new async_data_provider_1.AsyncDataProvider(request$);
        this.refresh();
        this.setDefaultSort();
        this.dataProvider.emptyType$.pipe((0, until_destroy_1.untilDestroyed)(this)).subscribe(() => {
            this.onListFiltered(this.filterString);
        });
    }
    handleSlideInClosed(slideInRef) {
        slideInRef.slideInClosed$.pipe((0, rxjs_1.filter)(Boolean), (0, until_destroy_1.untilDestroyed)(this)).subscribe(() => this.refresh());
    }
    openBootenvStats() {
        this.matDialog.open(bootenv_stats_dialog_component_1.BootenvStatsDialogComponent);
    }
    doRename(bootenv) {
        const slideInRef = this.slideInService.open(bootenv_form_component_1.BootEnvironmentFormComponent, {
            data: { operation: boot_environment_action_enum_1.BootEnvironmentAction.Rename, name: bootenv.id },
        });
        this.handleSlideInClosed(slideInRef);
    }
    doClone(bootenv) {
        const slideInRef = this.slideInService.open(bootenv_form_component_1.BootEnvironmentFormComponent, {
            data: { operation: boot_environment_action_enum_1.BootEnvironmentAction.Clone, name: bootenv.id },
        });
        this.handleSlideInClosed(slideInRef);
    }
    doScrub() {
        this.dialogService.confirm({
            title: this.translate.instant('Scrub'),
            message: this.translate.instant('Start the scrub now?'),
            buttonText: this.translate.instant('Start Scrub'),
        }).pipe((0, rxjs_1.filter)(Boolean), (0, rxjs_1.switchMap)(() => {
            return this.ws.startJob('boot.scrub').pipe(this.loader.withLoader(), this.errorHandler.catchError());
        }), (0, until_destroy_1.untilDestroyed)(this)).subscribe(() => {
            this.snackbar.success(this.translate.instant('Scrub Started'));
        });
    }
    doDelete(bootenvs) {
        bootenvs.forEach((bootenv) => delete bootenv.selected);
        this.matDialog.open(boot_pool_delete_dialog_component_1.BootPoolDeleteDialogComponent, {
            data: bootenvs.filter((bootenv) => [boot_environment_active_enum_1.BootEnvironmentActive.Dash, boot_environment_active_enum_1.BootEnvironmentActive.Empty].includes(bootenv.active)),
        }).afterClosed().pipe((0, rxjs_1.filter)(Boolean), (0, until_destroy_1.untilDestroyed)(this)).subscribe(() => this.refresh());
    }
    doActivate(bootenv) {
        this.dialogService.confirm({
            title: this.translate.instant('Activate'),
            message: this.translate.instant('Activate this Boot Environment?'),
            buttonText: boot_env_1.helptextSystemBootenv.list_dialog_activate_action,
        }).pipe((0, rxjs_1.filter)(Boolean), (0, rxjs_1.switchMap)(() => {
            return this.ws.call('bootenv.activate', [bootenv.id]).pipe(this.loader.withLoader(), this.errorHandler.catchError());
        }), (0, until_destroy_1.untilDestroyed)(this)).subscribe(() => this.refresh());
    }
    toggleKeep(bootenv) {
        if (!bootenv.keep) {
            this.dialogService.confirm({
                title: this.translate.instant('Keep'),
                message: this.translate.instant('Keep this Boot Environment?'),
                buttonText: this.translate.instant('Set Keep Flag'),
            }).pipe((0, rxjs_1.filter)(Boolean), (0, rxjs_1.switchMap)(() => {
                return this.ws.call('bootenv.set_attribute', [bootenv.id, { keep: true }]).pipe(this.loader.withLoader(), this.errorHandler.catchError());
            }), (0, until_destroy_1.untilDestroyed)(this)).subscribe(() => this.refresh());
        }
        else {
            this.dialogService.confirm({
                title: this.translate.instant('Unkeep'),
                message: this.translate.instant('No longer keep this Boot Environment?'),
                buttonText: this.translate.instant('Remove Keep Flag'),
            }).pipe((0, rxjs_1.filter)(Boolean), (0, rxjs_1.switchMap)(() => {
                return this.ws.call('bootenv.set_attribute', [bootenv.id, { keep: false }]).pipe(this.loader.withLoader(), this.errorHandler.catchError());
            }), (0, until_destroy_1.untilDestroyed)(this)).subscribe(() => this.refresh());
        }
    }
    onListFiltered(query) {
        this.filterString = query;
        this.dataProvider.setFilter({ list: this.bootenvs, query, columnKeys: ['name'] });
    }
    setDefaultSort() {
        this.dataProvider.setSorting({
            active: 3,
            direction: sort_direction_enum_1.SortDirection.Desc,
            propertyName: 'created',
            sortBy: (row) => row.created.$date,
        });
    }
    refresh() {
        this.dataProvider.load();
    }
};
exports.BootEnvironmentListComponent = BootEnvironmentListComponent;
BootEnvironmentListComponent.ctorParameters = () => [
    { type: ws_service_1.WebSocketService },
    { type: dialog_1.MatDialog },
    { type: core_2.TranslateService },
    { type: ix_slide_in_service_1.IxSlideInService },
    { type: app_loader_service_1.AppLoaderService },
    { type: dialog_service_1.DialogService },
    { type: error_handler_service_1.ErrorHandlerService },
    { type: snackbar_service_1.SnackbarService },
    { type: empty_service_1.EmptyService }
];
exports.BootEnvironmentListComponent = BootEnvironmentListComponent = __decorate([
    (0, until_destroy_1.UntilDestroy)(),
    (0, core_1.Component)({
        selector: 'ix-bootenv-list',
        template: require("./bootenv-list.component.html"),
        changeDetection: core_1.ChangeDetectionStrategy.OnPush,
        providers: [
            { provide: slide_toggle_1.MAT_SLIDE_TOGGLE_DEFAULT_OPTIONS, useValue: { disableToggleValue: true } },
        ],
        standalone: true,
        imports: [
            page_header_component_1.PageHeaderComponent,
            search_input1_component_1.SearchInput1Component,
            requires_roles_directive_1.RequiresRolesDirective,
            button_1.MatButton,
            test_directive_1.TestDirective,
            ui_search_directive_1.UiSearchDirective,
            router_1.RouterLink,
            ix_icon_component_1.IxIconComponent,
            ix_table_component_1.IxTableComponent,
            ix_table_empty_directive_1.IxTableEmptyDirective,
            ix_table_head_component_1.IxTableHeadComponent,
            ix_table_body_component_1.IxTableBodyComponent,
            ix_table_pager_component_1.IxTablePagerComponent,
            core_2.TranslateModule,
            common_1.AsyncPipe,
        ],
    })
], BootEnvironmentListComponent);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL21hY2Jvb2sva2FycG92LXdvcmsvVHJ1ZU5BUy93ZWJ1aS9zcmMvYXBwL3BhZ2VzL3N5c3RlbS9ib290ZW52L2Jvb3RlbnYtbGlzdC9ib290ZW52LWxpc3QuY29tcG9uZW50LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLDRDQUE0QztBQUM1Qyx3Q0FBMkU7QUFDM0UscURBQXFEO0FBQ3JELHFEQUFxRDtBQUNyRCxpRUFBa0Y7QUFDbEYsNENBQTZDO0FBQzdDLHlEQUFxRTtBQUNyRSw4Q0FBd0U7QUFDeEUsK0JBR2M7QUFDZCxxR0FBZ0c7QUFDaEcsNEVBQXVFO0FBQ3ZFLHlGQUErRTtBQUMvRSx5RkFBK0U7QUFDL0UsbURBQTJDO0FBQzNDLDJEQUFxRTtBQUVyRSxzRUFBa0U7QUFDbEUsbUVBQStEO0FBRS9ELHFHQUFnRztBQUNoRywyRUFBa0U7QUFDbEUsNkVBQXdFO0FBQ3hFLDhHQUF5RztBQUN6RyxvR0FBK0Y7QUFDL0YsNklBQThIO0FBQzlILGdKQUFpSTtBQUNqSSxvSUFBcUg7QUFDckgsb0lBQXFIO0FBQ3JILG9JQUFxSDtBQUNySCwwSUFBMEg7QUFDMUgsbUhBQTZHO0FBQzdHLG1IQUE2RztBQUM3RyxzSEFBZ0g7QUFDaEgsdUdBQWlHO0FBQ2pHLHdGQUErRTtBQUMvRSxzREFBeUQ7QUFDekQsOEVBQXlFO0FBQ3pFLDJHQUFzRztBQUN0RyxxRkFBaUY7QUFDakYsdUVBQW1FO0FBQ25FLDBJQUFtSTtBQUNuSSx5R0FBNEc7QUFDNUcsdUdBQStGO0FBQy9GLGlJQUEySDtBQUMzSCw4RUFBeUU7QUFDekUsMEVBQW9FO0FBQ3BFLHdEQUEyRDtBQW1DcEQsSUFBTSw0QkFBNEIsR0FBbEMsTUFBTSw0QkFBNEI7SUErR3ZDLElBQUksZ0JBQWdCO1FBQ2xCLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUM3RCxDQUFDO0lBRUQsSUFBSSxpQkFBaUI7UUFD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QUUsVUFBVSxFQUFFLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ3BGLENBQUM7SUFFTyxjQUFjO1FBQ3BCLElBQUksQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDO1lBQzNCLE1BQU0sRUFBRSxDQUFDO1lBQ1QsU0FBUyxFQUFFLG1DQUFhLENBQUMsSUFBSTtZQUM3QixZQUFZLEVBQUUsU0FBUztZQUN2QixNQUFNLEVBQUUsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsS0FBSztTQUNuQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRU8sT0FBTztRQUNiLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDM0IsQ0FBQzs7QUFwUlUsb0VBQTRCOzs7Ozs7Ozs7Ozs7dUNBQTVCLDRCQUE0QjtJQTVCeEMsSUFBQSw0QkFBWSxHQUFFO0lBQ2QsSUFBQSxnQkFBUyxFQUFDO1FBQ1QsUUFBUSxFQUFFLGlCQUFpQjtRQUMzQixrREFBNEM7UUFFNUMsZUFBZSxFQUFFLDhCQUF1QixDQUFDLE1BQU07UUFDL0MsU0FBUyxFQUFFO1lBQ1QsRUFBRSxPQUFPLEVBQUUsK0NBQWdDLEVBQUUsUUFBUSxFQUFFLEVBQUUsa0JBQWtCLEVBQUUsSUFBSSxFQUFFLEVBQUU7U0FDdEY7UUFDRCxVQUFVLEVBQUUsSUFBSTtRQUNoQixPQUFPLEVBQUU7WUFDUCwyQ0FBbUI7WUFDbkIsK0NBQXFCO1lBQ3JCLGlEQUFzQjtZQUN0QixrQkFBUztZQUNULDhCQUFhO1lBQ2IsdUNBQWlCO1lBQ2pCLG1CQUFVO1lBQ1YsbUNBQWU7WUFDZixxQ0FBZ0I7WUFDaEIsZ0RBQXFCO1lBQ3JCLDhDQUFvQjtZQUNwQiw4Q0FBb0I7WUFDcEIsZ0RBQXFCO1lBQ3JCLHNCQUFlO1lBQ2Ysa0JBQVM7U0FDVjtLQUNGLENBQUM7R0FDVyw0QkFBNEIsQ0FxUnhDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYWNib29rL2thcnBvdi13b3JrL1RydWVOQVMvd2VidWkvc3JjL2FwcC9wYWdlcy9zeXN0ZW0vYm9vdGVudi9ib290ZW52LWxpc3QvYm9vdGVudi1saXN0LmNvbXBvbmVudC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBc3luY1BpcGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENvbXBvbmVudCwgT25Jbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBNYXRCdXR0b24gfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9idXR0b24nO1xuaW1wb3J0IHsgTWF0RGlhbG9nIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvZGlhbG9nJztcbmltcG9ydCB7IE1BVF9TTElERV9UT0dHTEVfREVGQVVMVF9PUFRJT05TIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvc2xpZGUtdG9nZ2xlJztcbmltcG9ydCB7IFJvdXRlckxpbmsgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHsgVW50aWxEZXN0cm95LCB1bnRpbERlc3Ryb3llZCB9IGZyb20gJ0BuZ25lYXQvdW50aWwtZGVzdHJveSc7XG5pbXBvcnQgeyBUcmFuc2xhdGVTZXJ2aWNlLCBUcmFuc2xhdGVNb2R1bGUgfSBmcm9tICdAbmd4LXRyYW5zbGF0ZS9jb3JlJztcbmltcG9ydCB7XG4gIGZpbHRlciwgbWFwLCBvZiwgc3dpdGNoTWFwLFxuICB0YWtlLFxufSBmcm9tICdyeGpzJztcbmltcG9ydCB7IFJlcXVpcmVzUm9sZXNEaXJlY3RpdmUgfSBmcm9tICdhcHAvZGlyZWN0aXZlcy9yZXF1aXJlcy1yb2xlcy9yZXF1aXJlcy1yb2xlcy5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgVWlTZWFyY2hEaXJlY3RpdmUgfSBmcm9tICdhcHAvZGlyZWN0aXZlcy91aS1zZWFyY2guZGlyZWN0aXZlJztcbmltcG9ydCB7IEJvb3RFbnZpcm9ubWVudEFjdGlvbiB9IGZyb20gJ2FwcC9lbnVtcy9ib290LWVudmlyb25tZW50LWFjdGlvbi5lbnVtJztcbmltcG9ydCB7IEJvb3RFbnZpcm9ubWVudEFjdGl2ZSB9IGZyb20gJ2FwcC9lbnVtcy9ib290LWVudmlyb25tZW50LWFjdGl2ZS5lbnVtJztcbmltcG9ydCB7IFJvbGUgfSBmcm9tICdhcHAvZW51bXMvcm9sZS5lbnVtJztcbmltcG9ydCB7IGhlbHB0ZXh0U3lzdGVtQm9vdGVudiB9IGZyb20gJ2FwcC9oZWxwdGV4dC9zeXN0ZW0vYm9vdC1lbnYnO1xuaW1wb3J0IHsgQm9vdGVudiB9IGZyb20gJ2FwcC9pbnRlcmZhY2VzL2Jvb3RlbnYuaW50ZXJmYWNlJztcbmltcG9ydCB7IERpYWxvZ1NlcnZpY2UgfSBmcm9tICdhcHAvbW9kdWxlcy9kaWFsb2cvZGlhbG9nLnNlcnZpY2UnO1xuaW1wb3J0IHsgRW1wdHlTZXJ2aWNlIH0gZnJvbSAnYXBwL21vZHVsZXMvZW1wdHkvZW1wdHkuc2VydmljZSc7XG5pbXBvcnQgeyBJeFNsaWRlSW5SZWYgfSBmcm9tICdhcHAvbW9kdWxlcy9mb3Jtcy9peC1mb3Jtcy9jb21wb25lbnRzL2l4LXNsaWRlLWluL2l4LXNsaWRlLWluLXJlZic7XG5pbXBvcnQgeyBTZWFyY2hJbnB1dDFDb21wb25lbnQgfSBmcm9tICdhcHAvbW9kdWxlcy9mb3Jtcy9zZWFyY2gtaW5wdXQxL3NlYXJjaC1pbnB1dDEuY29tcG9uZW50JztcbmltcG9ydCB7IGljb25NYXJrZXIgfSBmcm9tICdhcHAvbW9kdWxlcy9peC1pY29uL2ljb24tbWFya2VyLnV0aWwnO1xuaW1wb3J0IHsgSXhJY29uQ29tcG9uZW50IH0gZnJvbSAnYXBwL21vZHVsZXMvaXgtaWNvbi9peC1pY29uLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBBc3luY0RhdGFQcm92aWRlciB9IGZyb20gJ2FwcC9tb2R1bGVzL2l4LXRhYmxlL2NsYXNzZXMvYXN5bmMtZGF0YS1wcm92aWRlci9hc3luYy1kYXRhLXByb3ZpZGVyJztcbmltcG9ydCB7IEl4VGFibGVDb21wb25lbnQgfSBmcm9tICdhcHAvbW9kdWxlcy9peC10YWJsZS9jb21wb25lbnRzL2l4LXRhYmxlL2l4LXRhYmxlLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBhY3Rpb25zQ29sdW1uIH0gZnJvbSAnYXBwL21vZHVsZXMvaXgtdGFibGUvY29tcG9uZW50cy9peC10YWJsZS1ib2R5L2NlbGxzL2l4LWNlbGwtYWN0aW9ucy9peC1jZWxsLWFjdGlvbnMuY29tcG9uZW50JztcbmltcG9ydCB7IGNoZWNrYm94Q29sdW1uIH0gZnJvbSAnYXBwL21vZHVsZXMvaXgtdGFibGUvY29tcG9uZW50cy9peC10YWJsZS1ib2R5L2NlbGxzL2l4LWNlbGwtY2hlY2tib3gvaXgtY2VsbC1jaGVja2JveC5jb21wb25lbnQnO1xuaW1wb3J0IHsgZGF0ZUNvbHVtbiB9IGZyb20gJ2FwcC9tb2R1bGVzL2l4LXRhYmxlL2NvbXBvbmVudHMvaXgtdGFibGUtYm9keS9jZWxscy9peC1jZWxsLWRhdGUvaXgtY2VsbC1kYXRlLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBzaXplQ29sdW1uIH0gZnJvbSAnYXBwL21vZHVsZXMvaXgtdGFibGUvY29tcG9uZW50cy9peC10YWJsZS1ib2R5L2NlbGxzL2l4LWNlbGwtc2l6ZS9peC1jZWxsLXNpemUuY29tcG9uZW50JztcbmltcG9ydCB7IHRleHRDb2x1bW4gfSBmcm9tICdhcHAvbW9kdWxlcy9peC10YWJsZS9jb21wb25lbnRzL2l4LXRhYmxlLWJvZHkvY2VsbHMvaXgtY2VsbC10ZXh0L2l4LWNlbGwtdGV4dC5jb21wb25lbnQnO1xuaW1wb3J0IHsgeWVzTm9Db2x1bW4gfSBmcm9tICdhcHAvbW9kdWxlcy9peC10YWJsZS9jb21wb25lbnRzL2l4LXRhYmxlLWJvZHkvY2VsbHMvaXgtY2VsbC15ZXMtbm8vaXgtY2VsbC15ZXMtbm8uY29tcG9uZW50JztcbmltcG9ydCB7IEl4VGFibGVCb2R5Q29tcG9uZW50IH0gZnJvbSAnYXBwL21vZHVsZXMvaXgtdGFibGUvY29tcG9uZW50cy9peC10YWJsZS1ib2R5L2l4LXRhYmxlLWJvZHkuY29tcG9uZW50JztcbmltcG9ydCB7IEl4VGFibGVIZWFkQ29tcG9uZW50IH0gZnJvbSAnYXBwL21vZHVsZXMvaXgtdGFibGUvY29tcG9uZW50cy9peC10YWJsZS1oZWFkL2l4LXRhYmxlLWhlYWQuY29tcG9uZW50JztcbmltcG9ydCB7IEl4VGFibGVQYWdlckNvbXBvbmVudCB9IGZyb20gJ2FwcC9tb2R1bGVzL2l4LXRhYmxlL2NvbXBvbmVudHMvaXgtdGFibGUtcGFnZXIvaXgtdGFibGUtcGFnZXIuY29tcG9uZW50JztcbmltcG9ydCB7IEl4VGFibGVFbXB0eURpcmVjdGl2ZSB9IGZyb20gJ2FwcC9tb2R1bGVzL2l4LXRhYmxlL2RpcmVjdGl2ZXMvaXgtdGFibGUtZW1wdHkuZGlyZWN0aXZlJztcbmltcG9ydCB7IFNvcnREaXJlY3Rpb24gfSBmcm9tICdhcHAvbW9kdWxlcy9peC10YWJsZS9lbnVtcy9zb3J0LWRpcmVjdGlvbi5lbnVtJztcbmltcG9ydCB7IGNyZWF0ZVRhYmxlIH0gZnJvbSAnYXBwL21vZHVsZXMvaXgtdGFibGUvdXRpbHMnO1xuaW1wb3J0IHsgQXBwTG9hZGVyU2VydmljZSB9IGZyb20gJ2FwcC9tb2R1bGVzL2xvYWRlci9hcHAtbG9hZGVyLnNlcnZpY2UnO1xuaW1wb3J0IHsgUGFnZUhlYWRlckNvbXBvbmVudCB9IGZyb20gJ2FwcC9tb2R1bGVzL3BhZ2UtaGVhZGVyL3BhZ2UtdGl0bGUtaGVhZGVyL3BhZ2UtaGVhZGVyLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBTbmFja2JhclNlcnZpY2UgfSBmcm9tICdhcHAvbW9kdWxlcy9zbmFja2Jhci9zZXJ2aWNlcy9zbmFja2Jhci5zZXJ2aWNlJztcbmltcG9ydCB7IFRlc3REaXJlY3RpdmUgfSBmcm9tICdhcHAvbW9kdWxlcy90ZXN0LWlkL3Rlc3QuZGlyZWN0aXZlJztcbmltcG9ydCB7IEJvb3RQb29sRGVsZXRlRGlhbG9nQ29tcG9uZW50IH0gZnJvbSAnYXBwL3BhZ2VzL3N5c3RlbS9ib290ZW52L2Jvb3QtcG9vbC1kZWxldGUtZGlhbG9nL2Jvb3QtcG9vbC1kZWxldGUtZGlhbG9nLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBCb290RW52aXJvbm1lbnRGb3JtQ29tcG9uZW50IH0gZnJvbSAnYXBwL3BhZ2VzL3N5c3RlbS9ib290ZW52L2Jvb3RlbnYtZm9ybS9ib290ZW52LWZvcm0uY29tcG9uZW50JztcbmltcG9ydCB7IGJvb3RMaXN0RWxlbWVudHMgfSBmcm9tICdhcHAvcGFnZXMvc3lzdGVtL2Jvb3RlbnYvYm9vdGVudi1saXN0L2Jvb3RlbnYtbGlzdC5lbGVtZW50cyc7XG5pbXBvcnQgeyBCb290ZW52U3RhdHNEaWFsb2dDb21wb25lbnQgfSBmcm9tICdhcHAvcGFnZXMvc3lzdGVtL2Jvb3RlbnYvYm9vdGVudi1zdGF0cy1kaWFsb2cvYm9vdGVudi1zdGF0cy1kaWFsb2cuY29tcG9uZW50JztcbmltcG9ydCB7IEVycm9ySGFuZGxlclNlcnZpY2UgfSBmcm9tICdhcHAvc2VydmljZXMvZXJyb3ItaGFuZGxlci5zZXJ2aWNlJztcbmltcG9ydCB7IEl4U2xpZGVJblNlcnZpY2UgfSBmcm9tICdhcHAvc2VydmljZXMvaXgtc2xpZGUtaW4uc2VydmljZSc7XG5pbXBvcnQgeyBXZWJTb2NrZXRTZXJ2aWNlIH0gZnJvbSAnYXBwL3NlcnZpY2VzL3dzLnNlcnZpY2UnO1xuXG4vLyBUT0RPOiBFeGNsdWRlIEFueXRoaW5nVWkgd2hlbiBOQVMtMTI3NjMyIGlzIGRvbmVcbmludGVyZmFjZSBCb290ZW52VWkgZXh0ZW5kcyBCb290ZW52IHtcbiAgc2VsZWN0ZWQ6IGJvb2xlYW47XG59XG5cbkBVbnRpbERlc3Ryb3koKVxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnaXgtYm9vdGVudi1saXN0JyxcbiAgdGVtcGxhdGVVcmw6ICcuL2Jvb3RlbnYtbGlzdC5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2Jvb3RlbnYtbGlzdC5jb21wb25lbnQuc2NzcyddLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgcHJvdmlkZXJzOiBbXG4gICAgeyBwcm92aWRlOiBNQVRfU0xJREVfVE9HR0xFX0RFRkFVTFRfT1BUSU9OUywgdXNlVmFsdWU6IHsgZGlzYWJsZVRvZ2dsZVZhbHVlOiB0cnVlIH0gfSxcbiAgXSxcbiAgc3RhbmRhbG9uZTogdHJ1ZSxcbiAgaW1wb3J0czogW1xuICAgIFBhZ2VIZWFkZXJDb21wb25lbnQsXG4gICAgU2VhcmNoSW5wdXQxQ29tcG9uZW50LFxuICAgIFJlcXVpcmVzUm9sZXNEaXJlY3RpdmUsXG4gICAgTWF0QnV0dG9uLFxuICAgIFRlc3REaXJlY3RpdmUsXG4gICAgVWlTZWFyY2hEaXJlY3RpdmUsXG4gICAgUm91dGVyTGluayxcbiAgICBJeEljb25Db21wb25lbnQsXG4gICAgSXhUYWJsZUNvbXBvbmVudCxcbiAgICBJeFRhYmxlRW1wdHlEaXJlY3RpdmUsXG4gICAgSXhUYWJsZUhlYWRDb21wb25lbnQsXG4gICAgSXhUYWJsZUJvZHlDb21wb25lbnQsXG4gICAgSXhUYWJsZVBhZ2VyQ29tcG9uZW50LFxuICAgIFRyYW5zbGF0ZU1vZHVsZSxcbiAgICBBc3luY1BpcGUsXG4gIF0sXG59KVxuZXhwb3J0IGNsYXNzIEJvb3RFbnZpcm9ubWVudExpc3RDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICByZWFkb25seSByZXF1aXJlZFJvbGVzID0gW1JvbGUuRnVsbEFkbWluXTtcbiAgcHJvdGVjdGVkIHJlYWRvbmx5IHNlYXJjaGFibGVFbGVtZW50cyA9IGJvb3RMaXN0RWxlbWVudHM7XG5cbiAgZGF0YVByb3ZpZGVyOiBBc3luY0RhdGFQcm92aWRlcjxCb290ZW52VWk+O1xuICBmaWx0ZXJTdHJpbmcgPSAnJztcblxuICBjb2x1bW5zID0gY3JlYXRlVGFibGU8Qm9vdGVudlVpPihbXG4gICAgY2hlY2tib3hDb2x1bW4oe1xuICAgICAgcHJvcGVydHlOYW1lOiAnc2VsZWN0ZWQnLFxuICAgICAgb25Sb3dDaGVjazogKHJvdywgY2hlY2tlZCkgPT4ge1xuICAgICAgICB0aGlzLmJvb3RlbnZzLmZpbmQoKGJvb3RlbnYpID0+IHJvdy5pZCA9PT0gYm9vdGVudi5pZCkuc2VsZWN0ZWQgPSBjaGVja2VkO1xuICAgICAgICB0aGlzLmRhdGFQcm92aWRlci5zZXRSb3dzKFtdKTtcbiAgICAgICAgdGhpcy5vbkxpc3RGaWx0ZXJlZCh0aGlzLmZpbHRlclN0cmluZyk7XG4gICAgICB9LFxuICAgICAgb25Db2x1bW5DaGVjazogKGNoZWNrZWQpID0+IHtcbiAgICAgICAgdGhpcy5kYXRhUHJvdmlkZXIuY3VycmVudFBhZ2UkLnBpcGUoXG4gICAgICAgICAgdGFrZSgxKSxcbiAgICAgICAgICB1bnRpbERlc3Ryb3llZCh0aGlzKSxcbiAgICAgICAgKS5zdWJzY3JpYmUoKGJvb3RFbnZzKSA9PiB7XG4gICAgICAgICAgYm9vdEVudnMuZm9yRWFjaCgoYm9vdEVudikgPT4gYm9vdEVudi5zZWxlY3RlZCA9IGNoZWNrZWQpO1xuICAgICAgICAgIHRoaXMuZGF0YVByb3ZpZGVyLnNldFJvd3MoW10pO1xuICAgICAgICAgIHRoaXMub25MaXN0RmlsdGVyZWQodGhpcy5maWx0ZXJTdHJpbmcpO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBjc3NDbGFzczogJ2NoZWNrYm94cy1jb2x1bW4nLFxuICAgIH0pLFxuICAgIHRleHRDb2x1bW4oe1xuICAgICAgdGl0bGU6IHRoaXMudHJhbnNsYXRlLmluc3RhbnQoJ05hbWUnKSxcbiAgICAgIHByb3BlcnR5TmFtZTogJ25hbWUnLFxuICAgIH0pLFxuICAgIHRleHRDb2x1bW4oe1xuICAgICAgdGl0bGU6IHRoaXMudHJhbnNsYXRlLmluc3RhbnQoJ0FjdGl2ZScpLFxuICAgICAgcHJvcGVydHlOYW1lOiAnYWN0aXZlJyxcbiAgICAgIGdldFZhbHVlOiAocm93KSA9PiB7XG4gICAgICAgIHN3aXRjaCAocm93LmFjdGl2ZSkge1xuICAgICAgICAgIGNhc2UgQm9vdEVudmlyb25tZW50QWN0aXZlLk5vdzpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRyYW5zbGF0ZS5pbnN0YW50KCdOb3cnKTtcbiAgICAgICAgICBjYXNlIEJvb3RFbnZpcm9ubWVudEFjdGl2ZS5SZXN0YXJ0OlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNsYXRlLmluc3RhbnQoJ1Jlc3RhcnQnKTtcbiAgICAgICAgICBjYXNlIEJvb3RFbnZpcm9ubWVudEFjdGl2ZS5Ob3dSZWJvb3Q6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50cmFuc2xhdGUuaW5zdGFudCgnTm93L1Jlc3RhcnQnKTtcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHJvdy5hY3RpdmU7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfSksXG4gICAgZGF0ZUNvbHVtbih7XG4gICAgICB0aXRsZTogdGhpcy50cmFuc2xhdGUuaW5zdGFudCgnRGF0ZSBDcmVhdGVkJyksXG4gICAgICBwcm9wZXJ0eU5hbWU6ICdjcmVhdGVkJyxcbiAgICAgIHNvcnRCeTogKHJvdykgPT4gcm93LmNyZWF0ZWQuJGRhdGUsXG4gICAgfSksXG4gICAgc2l6ZUNvbHVtbih7XG4gICAgICB0aXRsZTogdGhpcy50cmFuc2xhdGUuaW5zdGFudCgnU3BhY2UnKSxcbiAgICAgIHByb3BlcnR5TmFtZTogJ3Jhd3NwYWNlJyxcbiAgICB9KSxcbiAgICB5ZXNOb0NvbHVtbih7XG4gICAgICB0aXRsZTogdGhpcy50cmFuc2xhdGUuaW5zdGFudCgnS2VlcCcpLFxuICAgICAgcHJvcGVydHlOYW1lOiAna2VlcCcsXG4gICAgICBjc3NDbGFzczogJ2tlZXAtY29sdW1uJyxcbiAgICB9KSxcbiAgICBhY3Rpb25zQ29sdW1uKHtcbiAgICAgIGFjdGlvbnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIGljb25OYW1lOiBpY29uTWFya2VyKCdtZGktY2hlY2stZGVjYWdyYW0nKSxcbiAgICAgICAgICByZXF1aXJlZFJvbGVzOiB0aGlzLnJlcXVpcmVkUm9sZXMsXG4gICAgICAgICAgdG9vbHRpcDogdGhpcy50cmFuc2xhdGUuaW5zdGFudCgnQWN0aXZhdGUnKSxcbiAgICAgICAgICBoaWRkZW46IChyb3cpID0+IG9mKHJvdy5hY3RpdmUuaW5jbHVkZXMoJ1InKSksXG4gICAgICAgICAgb25DbGljazogKHJvdykgPT4gdGhpcy5kb0FjdGl2YXRlKHJvdyksXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpY29uTmFtZTogaWNvbk1hcmtlcignbWRpLWNvbnRlbnQtY29weScpLFxuICAgICAgICAgIHJlcXVpcmVkUm9sZXM6IHRoaXMucmVxdWlyZWRSb2xlcyxcbiAgICAgICAgICB0b29sdGlwOiB0aGlzLnRyYW5zbGF0ZS5pbnN0YW50KCdDbG9uZScpLFxuICAgICAgICAgIG9uQ2xpY2s6IChyb3cpID0+IHRoaXMuZG9DbG9uZShyb3cpLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWNvbk5hbWU6IGljb25NYXJrZXIoJ21kaS1yZW5hbWUtYm94JyksXG4gICAgICAgICAgcmVxdWlyZWRSb2xlczogdGhpcy5yZXF1aXJlZFJvbGVzLFxuICAgICAgICAgIHRvb2x0aXA6IHRoaXMudHJhbnNsYXRlLmluc3RhbnQoJ1JlbmFtZScpLFxuICAgICAgICAgIG9uQ2xpY2s6IChyb3cpID0+IHRoaXMuZG9SZW5hbWUocm93KSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGljb25OYW1lOiBpY29uTWFya2VyKCdib29rbWFyaycpLFxuICAgICAgICAgIHJlcXVpcmVkUm9sZXM6IHRoaXMucmVxdWlyZWRSb2xlcyxcbiAgICAgICAgICB0b29sdGlwOiB0aGlzLnRyYW5zbGF0ZS5pbnN0YW50KCdLZWVwJyksXG4gICAgICAgICAgaGlkZGVuOiAocm93KSA9PiBvZihyb3cua2VlcCksXG4gICAgICAgICAgb25DbGljazogKHJvdykgPT4gdGhpcy50b2dnbGVLZWVwKHJvdyksXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpY29uTmFtZTogaWNvbk1hcmtlcignYm9va21hcmtfYm9yZGVyJyksXG4gICAgICAgICAgcmVxdWlyZWRSb2xlczogdGhpcy5yZXF1aXJlZFJvbGVzLFxuICAgICAgICAgIHRvb2x0aXA6IHRoaXMudHJhbnNsYXRlLmluc3RhbnQoJ1Vua2VlcCcpLFxuICAgICAgICAgIGhpZGRlbjogKHJvdykgPT4gb2YoIXJvdy5rZWVwKSxcbiAgICAgICAgICBvbkNsaWNrOiAocm93KSA9PiB0aGlzLnRvZ2dsZUtlZXAocm93KSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGljb25OYW1lOiBpY29uTWFya2VyKCdtZGktZGVsZXRlJyksXG4gICAgICAgICAgcmVxdWlyZWRSb2xlczogdGhpcy5yZXF1aXJlZFJvbGVzLFxuICAgICAgICAgIHRvb2x0aXA6IHRoaXMudHJhbnNsYXRlLmluc3RhbnQoJ0RlbGV0ZScpLFxuICAgICAgICAgIGhpZGRlbjogKHJvdykgPT4gb2YoIVtCb290RW52aXJvbm1lbnRBY3RpdmUuRGFzaCwgQm9vdEVudmlyb25tZW50QWN0aXZlLkVtcHR5XS5pbmNsdWRlcyhyb3cuYWN0aXZlKSksXG4gICAgICAgICAgb25DbGljazogKHJvdykgPT4gdGhpcy5kb0RlbGV0ZShbcm93XSksXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgY3NzQ2xhc3M6ICdhY3Rpb25zLWNvbHVtbicsXG4gICAgfSksXG4gIF0sIHtcbiAgICB1bmlxdWVSb3dUYWc6IChyb3cpID0+IGBib290ZW52LSR7cm93Lm5hbWV9YCxcbiAgICBhcmlhTGFiZWxzOiAocm93KSA9PiBbcm93Lm5hbWUsIHRoaXMudHJhbnNsYXRlLmluc3RhbnQoJ0Jvb3QgRW52aXJvbm1lbnQnKV0sXG4gIH0pO1xuXG4gIGdldCBzZWxlY3RlZEJvb3RlbnZzKCk6IEJvb3RlbnZVaVtdIHtcbiAgICByZXR1cm4gdGhpcy5ib290ZW52cy5maWx0ZXIoKGJvb3RlbnYpID0+IGJvb3RlbnYuc2VsZWN0ZWQpO1xuICB9XG5cbiAgZ2V0IHNlbGVjdGlvbkhhc0l0ZW1zKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnNlbGVjdGVkQm9vdGVudnMuc29tZShcbiAgICAgIChib290ZW52KSA9PiBbQm9vdEVudmlyb25tZW50QWN0aXZlLkRhc2gsIEJvb3RFbnZpcm9ubWVudEFjdGl2ZS5FbXB0eV0uaW5jbHVkZXMoYm9vdGVudi5hY3RpdmUpLFxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIGJvb3RlbnZzOiBCb290ZW52VWlbXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgd3M6IFdlYlNvY2tldFNlcnZpY2UsXG4gICAgcHJpdmF0ZSBtYXREaWFsb2c6IE1hdERpYWxvZyxcbiAgICBwcml2YXRlIHRyYW5zbGF0ZTogVHJhbnNsYXRlU2VydmljZSxcbiAgICBwcml2YXRlIHNsaWRlSW5TZXJ2aWNlOiBJeFNsaWRlSW5TZXJ2aWNlLFxuICAgIHByaXZhdGUgbG9hZGVyOiBBcHBMb2FkZXJTZXJ2aWNlLFxuICAgIHByaXZhdGUgZGlhbG9nU2VydmljZTogRGlhbG9nU2VydmljZSxcbiAgICBwcml2YXRlIGVycm9ySGFuZGxlcjogRXJyb3JIYW5kbGVyU2VydmljZSxcbiAgICBwcml2YXRlIHNuYWNrYmFyOiBTbmFja2JhclNlcnZpY2UsXG4gICAgcHJvdGVjdGVkIGVtcHR5U2VydmljZTogRW1wdHlTZXJ2aWNlLFxuICApIHt9XG5cbiAgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgY29uc3QgcmVxdWVzdCQgPSB0aGlzLndzLmNhbGwoJ2Jvb3RlbnYucXVlcnknKS5waXBlKFxuICAgICAgbWFwKChib290ZW52cykgPT4ge1xuICAgICAgICB0aGlzLmJvb3RlbnZzID0gYm9vdGVudnMubWFwKChib290ZW52KSA9PiAoe1xuICAgICAgICAgIC4uLmJvb3RlbnYsXG4gICAgICAgICAgc2VsZWN0ZWQ6IGZhbHNlLFxuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiB0aGlzLmJvb3RlbnZzO1xuICAgICAgfSksXG4gICAgKTtcbiAgICB0aGlzLmRhdGFQcm92aWRlciA9IG5ldyBBc3luY0RhdGFQcm92aWRlcihyZXF1ZXN0JCk7XG4gICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgdGhpcy5zZXREZWZhdWx0U29ydCgpO1xuICAgIHRoaXMuZGF0YVByb3ZpZGVyLmVtcHR5VHlwZSQucGlwZSh1bnRpbERlc3Ryb3llZCh0aGlzKSkuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgIHRoaXMub25MaXN0RmlsdGVyZWQodGhpcy5maWx0ZXJTdHJpbmcpO1xuICAgIH0pO1xuICB9XG5cbiAgaGFuZGxlU2xpZGVJbkNsb3NlZChzbGlkZUluUmVmOiBJeFNsaWRlSW5SZWY8dW5rbm93bj4pOiB2b2lkIHtcbiAgICBzbGlkZUluUmVmLnNsaWRlSW5DbG9zZWQkLnBpcGUoXG4gICAgICBmaWx0ZXIoQm9vbGVhbiksXG4gICAgICB1bnRpbERlc3Ryb3llZCh0aGlzKSxcbiAgICApLnN1YnNjcmliZSgoKSA9PiB0aGlzLnJlZnJlc2goKSk7XG4gIH1cblxuICBvcGVuQm9vdGVudlN0YXRzKCk6IHZvaWQge1xuICAgIHRoaXMubWF0RGlhbG9nLm9wZW4oQm9vdGVudlN0YXRzRGlhbG9nQ29tcG9uZW50KTtcbiAgfVxuXG4gIGRvUmVuYW1lKGJvb3RlbnY6IEJvb3RlbnYpOiB2b2lkIHtcbiAgICBjb25zdCBzbGlkZUluUmVmID0gdGhpcy5zbGlkZUluU2VydmljZS5vcGVuKEJvb3RFbnZpcm9ubWVudEZvcm1Db21wb25lbnQsIHtcbiAgICAgIGRhdGE6IHsgb3BlcmF0aW9uOiBCb290RW52aXJvbm1lbnRBY3Rpb24uUmVuYW1lLCBuYW1lOiBib290ZW52LmlkIH0sXG4gICAgfSk7XG4gICAgdGhpcy5oYW5kbGVTbGlkZUluQ2xvc2VkKHNsaWRlSW5SZWYpO1xuICB9XG5cbiAgZG9DbG9uZShib290ZW52OiBCb290ZW52KTogdm9pZCB7XG4gICAgY29uc3Qgc2xpZGVJblJlZiA9IHRoaXMuc2xpZGVJblNlcnZpY2Uub3BlbihCb290RW52aXJvbm1lbnRGb3JtQ29tcG9uZW50LCB7XG4gICAgICBkYXRhOiB7IG9wZXJhdGlvbjogQm9vdEVudmlyb25tZW50QWN0aW9uLkNsb25lLCBuYW1lOiBib290ZW52LmlkIH0sXG4gICAgfSk7XG4gICAgdGhpcy5oYW5kbGVTbGlkZUluQ2xvc2VkKHNsaWRlSW5SZWYpO1xuICB9XG5cbiAgZG9TY3J1YigpOiB2b2lkIHtcbiAgICB0aGlzLmRpYWxvZ1NlcnZpY2UuY29uZmlybSh7XG4gICAgICB0aXRsZTogdGhpcy50cmFuc2xhdGUuaW5zdGFudCgnU2NydWInKSxcbiAgICAgIG1lc3NhZ2U6IHRoaXMudHJhbnNsYXRlLmluc3RhbnQoJ1N0YXJ0IHRoZSBzY3J1YiBub3c/JyksXG4gICAgICBidXR0b25UZXh0OiB0aGlzLnRyYW5zbGF0ZS5pbnN0YW50KCdTdGFydCBTY3J1YicpLFxuICAgIH0pLnBpcGUoXG4gICAgICBmaWx0ZXIoQm9vbGVhbiksXG4gICAgICBzd2l0Y2hNYXAoKCkgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy53cy5zdGFydEpvYignYm9vdC5zY3J1YicpLnBpcGUoXG4gICAgICAgICAgdGhpcy5sb2FkZXIud2l0aExvYWRlcigpLFxuICAgICAgICAgIHRoaXMuZXJyb3JIYW5kbGVyLmNhdGNoRXJyb3IoKSxcbiAgICAgICAgKTtcbiAgICAgIH0pLFxuICAgICAgdW50aWxEZXN0cm95ZWQodGhpcyksXG4gICAgKS5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgdGhpcy5zbmFja2Jhci5zdWNjZXNzKHRoaXMudHJhbnNsYXRlLmluc3RhbnQoJ1NjcnViIFN0YXJ0ZWQnKSk7XG4gICAgfSk7XG4gIH1cblxuICBkb0RlbGV0ZShib290ZW52czogQm9vdGVudlVpW10pOiB2b2lkIHtcbiAgICBib290ZW52cy5mb3JFYWNoKChib290ZW52KSA9PiBkZWxldGUgYm9vdGVudi5zZWxlY3RlZCk7XG4gICAgdGhpcy5tYXREaWFsb2cub3BlbihCb290UG9vbERlbGV0ZURpYWxvZ0NvbXBvbmVudCwge1xuICAgICAgZGF0YTogYm9vdGVudnMuZmlsdGVyKFxuICAgICAgICAoYm9vdGVudikgPT4gW0Jvb3RFbnZpcm9ubWVudEFjdGl2ZS5EYXNoLCBCb290RW52aXJvbm1lbnRBY3RpdmUuRW1wdHldLmluY2x1ZGVzKGJvb3RlbnYuYWN0aXZlKSxcbiAgICAgICksXG4gICAgfSkuYWZ0ZXJDbG9zZWQoKS5waXBlKFxuICAgICAgZmlsdGVyKEJvb2xlYW4pLFxuICAgICAgdW50aWxEZXN0cm95ZWQodGhpcyksXG4gICAgKS5zdWJzY3JpYmUoKCkgPT4gdGhpcy5yZWZyZXNoKCkpO1xuICB9XG5cbiAgZG9BY3RpdmF0ZShib290ZW52OiBCb290ZW52VWkpOiB2b2lkIHtcbiAgICB0aGlzLmRpYWxvZ1NlcnZpY2UuY29uZmlybSh7XG4gICAgICB0aXRsZTogdGhpcy50cmFuc2xhdGUuaW5zdGFudCgnQWN0aXZhdGUnKSxcbiAgICAgIG1lc3NhZ2U6IHRoaXMudHJhbnNsYXRlLmluc3RhbnQoJ0FjdGl2YXRlIHRoaXMgQm9vdCBFbnZpcm9ubWVudD8nKSxcbiAgICAgIGJ1dHRvblRleHQ6IGhlbHB0ZXh0U3lzdGVtQm9vdGVudi5saXN0X2RpYWxvZ19hY3RpdmF0ZV9hY3Rpb24sXG4gICAgfSkucGlwZShcbiAgICAgIGZpbHRlcihCb29sZWFuKSxcbiAgICAgIHN3aXRjaE1hcCgoKSA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLndzLmNhbGwoJ2Jvb3RlbnYuYWN0aXZhdGUnLCBbYm9vdGVudi5pZF0pLnBpcGUoXG4gICAgICAgICAgdGhpcy5sb2FkZXIud2l0aExvYWRlcigpLFxuICAgICAgICAgIHRoaXMuZXJyb3JIYW5kbGVyLmNhdGNoRXJyb3IoKSxcbiAgICAgICAgKTtcbiAgICAgIH0pLFxuICAgICAgdW50aWxEZXN0cm95ZWQodGhpcyksXG4gICAgKS5zdWJzY3JpYmUoKCkgPT4gdGhpcy5yZWZyZXNoKCkpO1xuICB9XG5cbiAgdG9nZ2xlS2VlcChib290ZW52OiBCb290ZW52VWkpOiB2b2lkIHtcbiAgICBpZiAoIWJvb3RlbnYua2VlcCkge1xuICAgICAgdGhpcy5kaWFsb2dTZXJ2aWNlLmNvbmZpcm0oe1xuICAgICAgICB0aXRsZTogdGhpcy50cmFuc2xhdGUuaW5zdGFudCgnS2VlcCcpLFxuICAgICAgICBtZXNzYWdlOiB0aGlzLnRyYW5zbGF0ZS5pbnN0YW50KCdLZWVwIHRoaXMgQm9vdCBFbnZpcm9ubWVudD8nKSxcbiAgICAgICAgYnV0dG9uVGV4dDogdGhpcy50cmFuc2xhdGUuaW5zdGFudCgnU2V0IEtlZXAgRmxhZycpLFxuICAgICAgfSkucGlwZShcbiAgICAgICAgZmlsdGVyKEJvb2xlYW4pLFxuICAgICAgICBzd2l0Y2hNYXAoKCkgPT4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLndzLmNhbGwoJ2Jvb3RlbnYuc2V0X2F0dHJpYnV0ZScsIFtib290ZW52LmlkLCB7IGtlZXA6IHRydWUgfV0pLnBpcGUoXG4gICAgICAgICAgICB0aGlzLmxvYWRlci53aXRoTG9hZGVyKCksXG4gICAgICAgICAgICB0aGlzLmVycm9ySGFuZGxlci5jYXRjaEVycm9yKCksXG4gICAgICAgICAgKTtcbiAgICAgICAgfSksXG4gICAgICAgIHVudGlsRGVzdHJveWVkKHRoaXMpLFxuICAgICAgKS5zdWJzY3JpYmUoKCkgPT4gdGhpcy5yZWZyZXNoKCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRpYWxvZ1NlcnZpY2UuY29uZmlybSh7XG4gICAgICAgIHRpdGxlOiB0aGlzLnRyYW5zbGF0ZS5pbnN0YW50KCdVbmtlZXAnKSxcbiAgICAgICAgbWVzc2FnZTogdGhpcy50cmFuc2xhdGUuaW5zdGFudCgnTm8gbG9uZ2VyIGtlZXAgdGhpcyBCb290IEVudmlyb25tZW50PycpLFxuICAgICAgICBidXR0b25UZXh0OiB0aGlzLnRyYW5zbGF0ZS5pbnN0YW50KCdSZW1vdmUgS2VlcCBGbGFnJyksXG4gICAgICB9KS5waXBlKFxuICAgICAgICBmaWx0ZXIoQm9vbGVhbiksXG4gICAgICAgIHN3aXRjaE1hcCgoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMud3MuY2FsbCgnYm9vdGVudi5zZXRfYXR0cmlidXRlJywgW2Jvb3RlbnYuaWQsIHsga2VlcDogZmFsc2UgfV0pLnBpcGUoXG4gICAgICAgICAgICB0aGlzLmxvYWRlci53aXRoTG9hZGVyKCksXG4gICAgICAgICAgICB0aGlzLmVycm9ySGFuZGxlci5jYXRjaEVycm9yKCksXG4gICAgICAgICAgKTtcbiAgICAgICAgfSksXG4gICAgICAgIHVudGlsRGVzdHJveWVkKHRoaXMpLFxuICAgICAgKS5zdWJzY3JpYmUoKCkgPT4gdGhpcy5yZWZyZXNoKCkpO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBvbkxpc3RGaWx0ZXJlZChxdWVyeTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5maWx0ZXJTdHJpbmcgPSBxdWVyeTtcbiAgICB0aGlzLmRhdGFQcm92aWRlci5zZXRGaWx0ZXIoeyBsaXN0OiB0aGlzLmJvb3RlbnZzLCBxdWVyeSwgY29sdW1uS2V5czogWyduYW1lJ10gfSk7XG4gIH1cblxuICBwcml2YXRlIHNldERlZmF1bHRTb3J0KCk6IHZvaWQge1xuICAgIHRoaXMuZGF0YVByb3ZpZGVyLnNldFNvcnRpbmcoe1xuICAgICAgYWN0aXZlOiAzLFxuICAgICAgZGlyZWN0aW9uOiBTb3J0RGlyZWN0aW9uLkRlc2MsXG4gICAgICBwcm9wZXJ0eU5hbWU6ICdjcmVhdGVkJyxcbiAgICAgIHNvcnRCeTogKHJvdykgPT4gcm93LmNyZWF0ZWQuJGRhdGUsXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlZnJlc2goKTogdm9pZCB7XG4gICAgdGhpcy5kYXRhUHJvdmlkZXIubG9hZCgpO1xuICB9XG59XG4iXSwidmVyc2lvbiI6M30=