{"file":"/Users/macbook/karpov-work/TrueNAS/webui/src/app/pages/datasets/modules/permissions/utils/nfs-ace-to-permission-item.utils.ts","mappings":";;AAeA,wDAmCC;AAjDD,yDAMgC;AAChC,gEAAkF;AAClF,2HAGqF;AACrF,oHAAwG;AAExG,SAAgB,sBAAsB,CAAC,SAA2B,EAAE,GAAe;IACjF,IAAI,IAAI,GAAG,SAAS,CAAC,OAAO,CAAC,8BAAe,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;IAE3D,IAAI,IAAyB,CAAC;IAC9B,QAAQ,GAAG,CAAC,GAAG,EAAE,CAAC;QAChB,KAAK,wBAAS,CAAC,IAAI,CAAC;QACpB,KAAK,wBAAS,CAAC,KAAK;YAClB,IAAI,GAAG,+CAAmB,CAAC,IAAI,CAAC;YAChC,IAAI,GAAG,GAAG,IAAI,MAAM,IAAA,0CAAe,EAAC,GAAG,CAAC,EAAE,CAAC;YAC3C,MAAM;QACR,KAAK,wBAAS,CAAC,KAAK,CAAC;QACrB,KAAK,wBAAS,CAAC,SAAS;YACtB,IAAI,GAAG,+CAAmB,CAAC,KAAK,CAAC;YACjC,IAAI,GAAG,GAAG,IAAI,MAAM,IAAA,0CAAe,EAAC,GAAG,CAAC,EAAE,CAAC;YAC3C,MAAM;QACR;YACE,IAAI,GAAG,+CAAmB,CAAC,KAAK,CAAC;IACrC,CAAC;IAED,MAAM,MAAM,GAAG,SAAS,CAAC,OAAO,CAAC,+BAAgB,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;IACjE,IAAI,MAAM,GAAG,SAAS,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;IAC1C,IAAI,IAAA,sCAAsB,EAAC,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC;QACtC,MAAM,GAAG,SAAS,CAAC,OAAO,CAAC,uCAAwB,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;IAC5E,CAAC;SAAM,CAAC;QACN,MAAM,WAAW,GAAG,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAA4B,CAAC;QACtE,IAAI,WAAW,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;YAC7B,MAAM,GAAG,SAAS,CAAC,OAAO,CAAC,0CAA2B,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC9E,CAAC;IACH,CAAC;IAED,OAAO;QACL,IAAI;QACJ,IAAI;QACJ,WAAW,EAAE,GAAG,MAAM,MAAM,MAAM,EAAE;KACrC,CAAC;AACJ,CAAC","names":[],"sources":["/Users/macbook/karpov-work/TrueNAS/webui/src/app/pages/datasets/modules/permissions/utils/nfs-ace-to-permission-item.utils.ts"],"sourcesContent":["import { TranslateService } from '@ngx-translate/core';\nimport {\n  NfsAclTag,\n  nfsAclTagLabels,\n  nfsAclTypeLabels,\n  NfsAdvancedPermission, nfsAdvancedPermissionLabels,\n  nfsBasicPermissionLabels,\n} from 'app/enums/nfs-acl.enum';\nimport { areNfsPermissionsBasic, NfsAclItem } from 'app/interfaces/acl.interface';\nimport {\n  PermissionItem,\n  PermissionsItemType,\n} from 'app/pages/datasets/modules/permissions/interfaces/permission-item.interface';\nimport { getAceWhoString } from 'app/pages/datasets/modules/permissions/utils/get-ace-who-string.utils';\n\nexport function nfsAceToPermissionItem(translate: TranslateService, ace: NfsAclItem): PermissionItem {\n  let name = translate.instant(nfsAclTagLabels.get(ace.tag));\n\n  let type: PermissionsItemType;\n  switch (ace.tag) {\n    case NfsAclTag.User:\n    case NfsAclTag.Owner:\n      type = PermissionsItemType.User;\n      name = `${name} - ${getAceWhoString(ace)}`;\n      break;\n    case NfsAclTag.Group:\n    case NfsAclTag.UserGroup:\n      type = PermissionsItemType.Group;\n      name = `${name} - ${getAceWhoString(ace)}`;\n      break;\n    default:\n      type = PermissionsItemType.Other;\n  }\n\n  const access = translate.instant(nfsAclTypeLabels.get(ace.type));\n  let action = translate.instant('Special');\n  if (areNfsPermissionsBasic(ace.perms)) {\n    action = translate.instant(nfsBasicPermissionLabels.get(ace.perms.BASIC));\n  } else {\n    const permissions = Object.keys(ace.perms) as NfsAdvancedPermission[];\n    if (permissions.length === 1) {\n      action = translate.instant(nfsAdvancedPermissionLabels.get(permissions[0]));\n    }\n  }\n\n  return {\n    type,\n    name,\n    description: `${access} | ${action}`,\n  };\n}\n"],"version":3}