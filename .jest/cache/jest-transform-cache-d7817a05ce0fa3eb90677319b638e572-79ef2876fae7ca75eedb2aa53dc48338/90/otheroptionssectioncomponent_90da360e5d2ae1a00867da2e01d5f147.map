{"file":"/Users/macbook/karpov-work/TrueNAS/webui/src/app/pages/datasets/components/dataset-form/sections/other-options-section/other-options-section.component.ts","mappings":"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","names":[],"sources":["/Users/macbook/karpov-work/TrueNAS/webui/src/app/pages/datasets/components/dataset-form/sections/other-options-section/other-options-section.component.ts"],"sourcesContent":["import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  Input,\n  OnChanges,\n  OnInit,\n  output,\n} from '@angular/core';\nimport { FormBuilder } from '@angular/forms';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\nimport { Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport {\n  combineLatest, Observable, of, take,\n} from 'rxjs';\nimport { startWith } from 'rxjs/operators';\nimport { AclMode, aclModeLabels } from 'app/enums/acl-type.enum';\nimport {\n  DatasetAclType,\n  DatasetCaseSensitivity,\n  datasetCaseSensitivityLabels,\n  DatasetChecksum,\n  DatasetPreset,\n  DatasetRecordSize,\n  DatasetSnapdev,\n  datasetSnapdevLabels,\n  DatasetSnapdir,\n  datasetSnapdirLabels,\n  DatasetSync,\n  datasetSyncLabels,\n} from 'app/enums/dataset.enum';\nimport { DeduplicationSetting, deduplicationSettingLabels } from 'app/enums/deduplication-setting.enum';\nimport { LicenseFeature } from 'app/enums/license-feature.enum';\nimport { OnOff, onOffLabels } from 'app/enums/on-off.enum';\nimport { ProductType } from 'app/enums/product-type.enum';\nimport { inherit, WithInherit } from 'app/enums/with-inherit.enum';\nimport { ZfsPropertySource } from 'app/enums/zfs-property-source.enum';\nimport { buildNormalizedFileSize } from 'app/helpers/file-size.utils';\nimport { choicesToOptions, singleArrayToOptions } from 'app/helpers/operators/options.operators';\nimport { mapToOptions } from 'app/helpers/options.helper';\nimport { helptextDatasetForm } from 'app/helptext/storage/volumes/datasets/dataset-form';\nimport { Dataset, DatasetCreate, DatasetUpdate } from 'app/interfaces/dataset.interface';\nimport { Option } from 'app/interfaces/option.interface';\nimport { IxSimpleChanges } from 'app/interfaces/simple-changes.interface';\nimport { DialogService } from 'app/modules/dialog/dialog.service';\nimport { IxFormatterService } from 'app/modules/forms/ix-forms/services/ix-formatter.service';\nimport { DatasetFormService } from 'app/pages/datasets/components/dataset-form/utils/dataset-form.service';\nimport {\n  specialSmallBlockSizeOptions,\n} from 'app/pages/datasets/components/dataset-form/utils/special-small-block-size-options.constant';\nimport { getFieldValue } from 'app/pages/datasets/components/dataset-form/utils/zfs-property.utils';\nimport { SystemGeneralService } from 'app/services/system-general.service';\nimport { WebSocketService } from 'app/services/ws.service';\nimport { AppState } from 'app/store';\nimport { waitForSystemInfo } from 'app/store/system-info/system-info.selectors';\n\n@UntilDestroy()\n@Component({\n  selector: 'ix-other-options-section',\n  styleUrls: ['./other-options-section.component.scss'],\n  templateUrl: './other-options-section.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class OtherOptionsSectionComponent implements OnInit, OnChanges {\n  @Input() parent: Dataset;\n  @Input() existing: Dataset;\n  @Input() datasetPreset: DatasetPreset;\n  @Input() advancedMode: boolean;\n\n  readonly advancedModeChange = output();\n  readonly formValidityChange = output<boolean>();\n\n  hasDeduplication = false;\n  hasRecordsizeWarning = false;\n  wasDedupChecksumWarningShown = false;\n  minimumRecommendedRecordsize = '128K' as DatasetRecordSize;\n\n  readonly form = this.formBuilder.group({\n    comments: [''],\n    sync: [inherit as WithInherit<DatasetSync>],\n    compression: [inherit as WithInherit<string>],\n    atime: [inherit as WithInherit<OnOff>],\n    deduplication: [inherit as WithInherit<DeduplicationSetting>],\n    checksum: [inherit as WithInherit<DatasetChecksum>],\n    readonly: [inherit as WithInherit<OnOff>],\n    exec: [inherit as WithInherit<OnOff>],\n    snapdir: [null as WithInherit<DatasetSnapdir>],\n    snapdev: [inherit as WithInherit<DatasetSnapdev>],\n    copies: [1],\n    recordsize: [inherit as string],\n    acltype: [DatasetAclType.Inherit as DatasetAclType],\n    aclmode: [AclMode.Inherit as AclMode],\n    casesensitivity: [DatasetCaseSensitivity.Sensitive as DatasetCaseSensitivity],\n    special_small_block_size: [inherit as WithInherit<number>],\n  });\n\n  syncOptions$: Observable<Option[]>;\n  compressionOptions$: Observable<Option[]>;\n  atimeOptions$: Observable<Option[]>;\n  deduplicationOptions$: Observable<Option[]>;\n  checksumOptions$: Observable<Option[]>;\n  readonlyOptions$: Observable<Option[]>;\n  execOptions$: Observable<Option[]>;\n  snapdirOptions$ = of(mapToOptions(datasetSnapdirLabels, this.translate));\n  snapdevOptions$: Observable<Option[]>;\n  copiesOptions$ = of([\n    { label: '1', value: 1 },\n    { label: '2', value: 2 },\n    { label: '3', value: 3 },\n  ]);\n  recordsizeOptions$: Observable<Option[]>;\n  caseSensitivityOptions$ = of(mapToOptions(datasetCaseSensitivityLabels, this.translate));\n  specialSmallBlockSizeOptions$: Observable<Option[]>;\n  aclTypeOptions$ = of([\n    { label: this.translate.instant('Inherit'), value: DatasetAclType.Inherit },\n    { label: this.translate.instant('Off'), value: DatasetAclType.Off },\n    { label: this.translate.instant('SMB/NFSv4'), value: DatasetAclType.Nfsv4 },\n    { label: this.translate.instant('POSIX'), value: DatasetAclType.Posix },\n  ]);\n  aclModeOptions$ = of(mapToOptions(aclModeLabels, this.translate));\n\n  private readonly defaultSyncOptions$ = of(mapToOptions(datasetSyncLabels, this.translate));\n  private readonly defaultCompressionOptions$ = this.ws.call('pool.dataset.compression_choices').pipe(choicesToOptions());\n  private readonly defaultAtimeOptions$ = of(mapToOptions(onOffLabels, this.translate));\n  private defaultDeduplicationOptions$ = of(mapToOptions(deduplicationSettingLabels, this.translate));\n  private defaultChecksumOptions$ = this.ws.call('pool.dataset.checksum_choices').pipe(\n    choicesToOptions(),\n  );\n  private onOffOptions$ = of(mapToOptions(onOffLabels, this.translate));\n  private defaultSnapdevOptions$ = of(mapToOptions(datasetSnapdevLabels, this.translate));\n  private defaultRecordSizeOptions$ = this.ws.call('pool.dataset.recordsize_choices').pipe(\n    singleArrayToOptions(),\n  );\n  private defaultSpecialSmallBlockSizeOptions$ = of(specialSmallBlockSizeOptions);\n\n  readonly helptext = helptextDatasetForm;\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private translate: TranslateService,\n    private store$: Store<AppState>,\n    private cdr: ChangeDetectorRef,\n    private systemGeneralService: SystemGeneralService,\n    private dialogService: DialogService,\n    private formatter: IxFormatterService,\n    private ws: WebSocketService,\n    private datasetFormService: DatasetFormService,\n  ) {}\n\n  get hasChecksumWarning(): boolean {\n    return this.form.value.checksum === DatasetChecksum.Sha256\n      && this.form.value.deduplication !== DeduplicationSetting.Off;\n  }\n\n  ngOnChanges(changes: IxSimpleChanges<this>): void {\n    if (changes.datasetPreset?.currentValue) {\n      this.setUpDatasetPresetSelect();\n    }\n\n    if (!changes.existing?.currentValue && !changes.parent?.currentValue) {\n      return;\n    }\n\n    this.setUpRecordsizeWarning();\n    this.setSelectOptions();\n\n    this.setFormValues();\n\n    this.checkDedupChecksum();\n    this.setUpDedupWarning();\n    this.setUpAclTypeWarning();\n    this.updateAclMode();\n    this.disableCaseSensitivityOnEdit();\n    this.listenForSyncChanges();\n  }\n\n  ngOnInit(): void {\n    this.checkIfDedupIsSupported();\n\n    this.form.controls.acltype.valueChanges.pipe(untilDestroyed(this)).subscribe(() => {\n      this.updateAclMode();\n    });\n\n    this.form.statusChanges.pipe(untilDestroyed(this)).subscribe((status) => {\n      this.formValidityChange.emit(status === 'VALID');\n    });\n  }\n\n  getPayload(): Partial<DatasetCreate> | Partial<DatasetUpdate> {\n    const values = this.form.value;\n    const payload = {\n      ...values,\n      checksum: values.checksum as DatasetChecksum,\n      copies: values.copies || 1,\n    };\n    if ([DatasetAclType.Posix, DatasetAclType.Off].includes(values.acltype)) {\n      payload.aclmode = AclMode.Discard;\n    } else if (values.acltype === DatasetAclType.Inherit) {\n      payload.aclmode = AclMode.Inherit;\n    }\n\n    if (!values.snapdir) {\n      delete payload.snapdir;\n    }\n\n    return payload as Partial<DatasetCreate> | Partial<DatasetUpdate>;\n  }\n\n  private checkIfDedupIsSupported(): void {\n    this.hasDeduplication = false;\n    this.cdr.markForCheck();\n\n    if (this.systemGeneralService.getProductType() !== ProductType.ScaleEnterprise) {\n      this.hasDeduplication = true;\n      this.cdr.markForCheck();\n      return;\n    }\n\n    this.store$.pipe(waitForSystemInfo, untilDestroyed(this)).subscribe((systemInfo) => {\n      if (!systemInfo.license || !systemInfo.license.features.includes(LicenseFeature.Dedup)) {\n        return;\n      }\n\n      this.hasDeduplication = true;\n      this.cdr.markForCheck();\n    });\n  }\n\n  private setFormValues(): void {\n    if (!this.existing) {\n      return;\n    }\n\n    let specialSmallBlockSize = getFieldValue(this.existing.special_small_block_size, this.parent) as (number | 'INHERIT');\n    if (specialSmallBlockSize !== 'INHERIT') {\n      specialSmallBlockSize = this.formatter.convertHumanStringToNum(specialSmallBlockSize.toString());\n    }\n\n    this.form.patchValue({\n      comments: this.existing.comments?.source === ZfsPropertySource.Local ? this.existing.comments.value : '',\n      sync: getFieldValue(this.existing.sync, this.parent),\n      compression: getFieldValue(this.existing.compression, this.parent),\n      atime: getFieldValue(this.existing.atime, this.parent),\n      deduplication: getFieldValue(this.existing.deduplication, this.parent),\n      checksum: getFieldValue(this.existing.checksum, this.parent),\n      readonly: getFieldValue(this.existing.readonly, this.parent),\n      exec: getFieldValue(this.existing.exec, this.parent),\n      recordsize: getFieldValue(this.existing.recordsize, this.parent),\n      snapdir: this.existing.snapdir?.value,\n      snapdev: getFieldValue(this.existing.snapdev, this.parent),\n      copies: this.existing.copies\n        ? Number(this.existing.copies.value)\n        : null,\n      acltype: getFieldValue(this.existing.acltype, this.parent) as DatasetAclType,\n      aclmode: getFieldValue(this.existing.aclmode, this.parent) as AclMode,\n      casesensitivity: this.existing.casesensitivity?.value,\n      special_small_block_size: this.existing.special_small_block_size\n        ? specialSmallBlockSize\n        : null,\n    });\n  }\n\n  private updateAclMode(): void {\n    const aclModeControl = this.form.controls.aclmode;\n    const aclTypeControl = this.form.controls.acltype;\n\n    const invalidPosixOrOffAclType = (aclTypeControl.value === DatasetAclType.Posix\n      || aclTypeControl.value === DatasetAclType.Off) && aclModeControl.value !== AclMode.Discard;\n\n    const invalidInheritAclType = aclTypeControl.value === DatasetAclType.Inherit\n      && aclModeControl.value !== AclMode.Inherit;\n\n    if (!!this.existing && (invalidPosixOrOffAclType || invalidInheritAclType) && !aclTypeControl.touched) {\n      return;\n    }\n\n    if (!this.parent) {\n      aclModeControl.disable({ emitEvent: false });\n      aclTypeControl.disable({ emitEvent: false });\n      return;\n    }\n\n    switch (aclTypeControl.value) {\n      case DatasetAclType.Nfsv4:\n        if (!this.existing) {\n          aclModeControl.setValue(AclMode.Passthrough);\n        }\n        aclModeControl.enable();\n        break;\n      case DatasetAclType.Posix:\n      case DatasetAclType.Off:\n        aclModeControl.setValue(AclMode.Discard);\n        aclModeControl.disable();\n        break;\n      case DatasetAclType.Inherit:\n        aclModeControl.setValue(AclMode.Inherit);\n        aclModeControl.disable();\n        break;\n    }\n  }\n\n  private setSelectOptions(): void {\n    if (!this.parent) {\n      this.syncOptions$ = this.defaultSyncOptions$;\n      this.compressionOptions$ = this.defaultCompressionOptions$;\n      this.atimeOptions$ = this.defaultAtimeOptions$;\n      this.deduplicationOptions$ = this.defaultDeduplicationOptions$;\n      this.checksumOptions$ = this.defaultChecksumOptions$;\n      this.readonlyOptions$ = this.onOffOptions$;\n      this.execOptions$ = this.onOffOptions$;\n      this.snapdevOptions$ = this.defaultSnapdevOptions$;\n      this.recordsizeOptions$ = this.defaultRecordSizeOptions$;\n      this.specialSmallBlockSizeOptions$ = this.defaultSpecialSmallBlockSizeOptions$;\n\n      return;\n    }\n\n    this.syncOptions$ = this.defaultSyncOptions$.pipe(\n      this.datasetFormService.addInheritOption(this.parent.sync.value),\n    );\n    this.compressionOptions$ = this.defaultCompressionOptions$.pipe(\n      this.datasetFormService.addInheritOption(this.parent.compression.value),\n    );\n    this.atimeOptions$ = this.defaultAtimeOptions$.pipe(\n      this.datasetFormService.addInheritOption(this.parent.atime.value),\n    );\n    this.deduplicationOptions$ = this.defaultDeduplicationOptions$.pipe(\n      this.datasetFormService.addInheritOption(this.parent.deduplication.value),\n    );\n    this.checksumOptions$ = this.defaultChecksumOptions$.pipe(\n      this.datasetFormService.addInheritOption(this.parent.checksum.value),\n    );\n    this.readonlyOptions$ = this.onOffOptions$.pipe(\n      this.datasetFormService.addInheritOption(this.parent.readonly.value),\n    );\n    this.execOptions$ = this.onOffOptions$.pipe(\n      this.datasetFormService.addInheritOption(this.parent.exec.value),\n    );\n    this.snapdevOptions$ = this.defaultSnapdevOptions$.pipe(\n      this.datasetFormService.addInheritOption(this.parent.snapdev.value),\n    );\n\n    this.recordsizeOptions$ = this.defaultRecordSizeOptions$.pipe(\n      this.datasetFormService.addInheritOption(\n        buildNormalizedFileSize(this.parent.recordsize.parsed),\n      ),\n    );\n    this.specialSmallBlockSizeOptions$ = this.defaultSpecialSmallBlockSizeOptions$.pipe(\n      this.datasetFormService.addInheritOption(this.parent.special_small_block_size.value),\n    );\n  }\n\n  private setUpDatasetPresetSelect(): void {\n    if (!this.datasetPreset || this.existing) {\n      return;\n    }\n\n    if (this.datasetPreset === DatasetPreset.Smb) {\n      this.form.patchValue({\n        aclmode: AclMode.Restricted,\n        casesensitivity: DatasetCaseSensitivity.Insensitive,\n      });\n      this.form.controls.aclmode.disable();\n      this.form.controls.casesensitivity.disable();\n    } else {\n      this.form.patchValue({\n        aclmode: AclMode.Passthrough,\n        casesensitivity: DatasetCaseSensitivity.Sensitive,\n      });\n      this.form.controls.aclmode.enable();\n      this.form.controls.casesensitivity.enable();\n    }\n  }\n\n  private setUpDedupWarning(): void {\n    this.form.controls.deduplication.valueChanges.pipe(untilDestroyed(this)).subscribe((dedup) => {\n      if (!dedup || [DeduplicationSetting.Off, inherit].includes(dedup)) {\n        this.cdr.markForCheck();\n        return;\n      }\n\n      this.dialogService.confirm({\n        title: this.translate.instant('Warning'),\n        message: this.translate.instant(helptextDatasetForm.deduplicationWarning),\n        hideCheckbox: true,\n      })\n        .pipe(untilDestroyed(this))\n        .subscribe((confirmed) => {\n          if (confirmed) {\n            this.checkDedupChecksum();\n          } else {\n            this.form.patchValue({\n              deduplication: inherit,\n            });\n          }\n        });\n    });\n  }\n\n  private checkDedupChecksum(): void {\n    const dedup = this.form.controls.deduplication.value;\n    if (!dedup || [DeduplicationSetting.Off, inherit].includes(dedup)) {\n      return;\n    }\n\n    const checksum = this.form.controls.checksum.value;\n    if (\n      this.wasDedupChecksumWarningShown\n      || !checksum\n      || checksum === DatasetChecksum.Sha512\n      || checksum !== DatasetChecksum.Sha256\n    ) {\n      return;\n    }\n\n    this.showDedupChecksumWarning();\n    this.form.patchValue({\n      checksum: DatasetChecksum.Sha512,\n    });\n  }\n\n  private setUpAclTypeWarning(): void {\n    this.form.controls.acltype.valueChanges\n      .pipe(take(1), untilDestroyed(this))\n      .subscribe(() => {\n        this.dialogService.warn(\n          this.translate.instant('ACL Types & ACL Modes'),\n          helptextDatasetForm.acl_type_change_warning,\n        );\n      });\n  }\n\n  private showDedupChecksumWarning(): void {\n    this.wasDedupChecksumWarningShown = true;\n    this.dialogService.confirm({\n      hideCancel: true,\n      title: this.translate.instant('Default Checksum Warning'),\n      hideCheckbox: true,\n      message: this.translate.instant(helptextDatasetForm.deduplicationChecksumWarning),\n      buttonText: this.translate.instant('OK'),\n    });\n  }\n\n  private disableCaseSensitivityOnEdit(): void {\n    if (!this.existing) {\n      return;\n    }\n\n    this.form.controls.casesensitivity.disable();\n  }\n\n  private setUpRecordsizeWarning(): void {\n    if (!this.parent) {\n      return;\n    }\n\n    const root = this.parent.id.split('/')[0];\n    combineLatest([\n      this.form.controls.recordsize.valueChanges.pipe(startWith(this.form.controls.recordsize.value)),\n      this.ws.call('pool.dataset.recommended_zvol_blocksize', [root]),\n    ])\n      .pipe(untilDestroyed(this))\n      .subscribe(([recordsizeValue, recommendedAsString]) => {\n        const recordsizeAsString = recordsizeValue === '512' ? '512B' : recordsizeValue;\n        const recordsize = this.formatter.memorySizeParsing(recordsizeAsString);\n        const recommended = this.formatter.memorySizeParsing(recommendedAsString);\n\n        this.hasRecordsizeWarning = recordsize && recommended\n          && recordsizeAsString !== inherit\n          && recordsize < recommended;\n        this.minimumRecommendedRecordsize = recommendedAsString;\n\n        if (this.hasRecordsizeWarning) {\n          this.advancedModeChange.emit();\n        }\n        this.cdr.markForCheck();\n      });\n  }\n\n  private listenForSyncChanges(): void {\n    this.form.controls.sync.valueChanges.pipe(untilDestroyed(this)).subscribe((value) => {\n      if (value === DatasetSync.Disabled && this.form.controls.sync.dirty) {\n        this.dialogService.confirm({\n          title: this.translate.instant('Warning'),\n          message: helptextDatasetForm.dataset_form_sync_disabled_warning,\n          buttonText: this.translate.instant('Okay'),\n          hideCheckbox: true,\n          hideCancel: true,\n        });\n      }\n    });\n  }\n}\n"],"version":3}