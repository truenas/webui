{"file":"/Users/macbook/karpov-work/TrueNAS/webui/src/app/directives/if-nightly/if-nightly.directive.ts","mappings":";;;;;;;;;AAAA,wCAGuB;AACvB,yDAAqE;AACrE,uCAAoC;AAEpC,uFAAgF;AAOzE,IAAM,kBAAkB,GAAxB,MAAM,kBAAkB;IAG7B,YACU,WAAiC,EACjC,aAA+B,EAC/B,GAAsB,EACtB,MAAuB;QAHvB,gBAAW,GAAX,WAAW,CAAsB;QACjC,kBAAa,GAAb,aAAa,CAAkB;QAC/B,QAAG,GAAH,GAAG,CAAmB;QACtB,WAAM,GAAN,MAAM,CAAiB;QANzB,cAAS,GAAG,KAAK,CAAC;IAOtB,CAAC;IAEL,QAAQ;QACN,IAAI,CAAC,MAAM,CAAC,IAAI,CACd,yCAAiB,EACjB,IAAA,8BAAc,EAAC,IAAI,CAAC,CACrB;aACE,SAAS,CAAC,CAAC,UAAU,EAAE,EAAE;YACxB,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;YAC3B,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC;YAExB,IAAI,CAAC,SAAS,GAAG,UAAU,CAAC,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;YACvD,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC;gBACpB,OAAO;YACT,CAAC;YAED,IAAI,CAAC,aAAa,CAAC,kBAAkB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YACxD,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC;QAC1B,CAAC,CAAC,CAAC;IACP,CAAC;;AA3BU,gDAAkB;;;;;;;6BAAlB,kBAAkB;IAL9B,IAAA,4BAAY,GAAE;IACd,IAAA,gBAAS,EAAC;QACT,QAAQ,EAAE,eAAe;QACzB,UAAU,EAAE,IAAI;KACjB,CAAC;GACW,kBAAkB,CA4B9B","names":[],"sources":["/Users/macbook/karpov-work/TrueNAS/webui/src/app/directives/if-nightly/if-nightly.directive.ts"],"sourcesContent":["import {\n  ChangeDetectorRef,\n  Directive, OnInit, TemplateRef, ViewContainerRef,\n} from '@angular/core';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\nimport { Store } from '@ngrx/store';\nimport { AppState } from 'app/store';\nimport { waitForSystemInfo } from 'app/store/system-info/system-info.selectors';\n\n@UntilDestroy()\n@Directive({\n  selector: '[ixIfNightly]',\n  standalone: true,\n})\nexport class IfNightlyDirective implements OnInit {\n  private isNightly = false;\n\n  constructor(\n    private templateRef: TemplateRef<unknown>,\n    private viewContainer: ViewContainerRef,\n    private cdr: ChangeDetectorRef,\n    private store$: Store<AppState>,\n  ) { }\n\n  ngOnInit(): void {\n    this.store$.pipe(\n      waitForSystemInfo,\n      untilDestroyed(this),\n    )\n      .subscribe((systemInfo) => {\n        this.viewContainer.clear();\n        this.cdr.markForCheck();\n\n        this.isNightly = systemInfo.version.includes('MASTER');\n        if (!this.isNightly) {\n          return;\n        }\n\n        this.viewContainer.createEmbeddedView(this.templateRef);\n        this.cdr.markForCheck();\n      });\n  }\n}\n"],"version":3}