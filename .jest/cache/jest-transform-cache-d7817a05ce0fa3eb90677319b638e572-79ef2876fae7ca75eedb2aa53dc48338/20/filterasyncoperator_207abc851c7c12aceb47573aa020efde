0d9bdfa1317983dcc1e18f3686ec494d
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.filterAsync = filterAsync;
const rxjs_1 = require("rxjs");
/**
 * Similar to filter(), but accepts an observable.
 */
function filterAsync(predicateFactory) {
    return (source$) => source$.pipe((0, rxjs_1.switchMap)((value) => {
        const predicate$ = predicateFactory(value);
        return predicate$.pipe((0, rxjs_1.take)(1), (0, rxjs_1.filter)((result) => result), (0, rxjs_1.map)(() => value));
    }));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL21hY2Jvb2sva2FycG92LXdvcmsvVHJ1ZU5BUy93ZWJ1aS9zcmMvYXBwL2hlbHBlcnMvb3BlcmF0b3JzL2ZpbHRlci1hc3luYy5vcGVyYXRvci50cyIsIm1hcHBpbmdzIjoiOztBQU9BLGtDQVdDO0FBbEJELCtCQUVjO0FBRWQ7O0dBRUc7QUFDSCxTQUFnQixXQUFXLENBQUksZ0JBQW1EO0lBQ2hGLE9BQU8sQ0FBQyxPQUFzQixFQUFFLEVBQUUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUM3QyxJQUFBLGdCQUFTLEVBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRTtRQUNsQixNQUFNLFVBQVUsR0FBRyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMzQyxPQUFPLFVBQVUsQ0FBQyxJQUFJLENBQ3BCLElBQUEsV0FBSSxFQUFDLENBQUMsQ0FBQyxFQUNQLElBQUEsYUFBTSxFQUFDLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsRUFDMUIsSUFBQSxVQUFHLEVBQUMsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQ2pCLENBQUM7SUFDSixDQUFDLENBQUMsQ0FDSCxDQUFDO0FBQ0osQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvbWFjYm9vay9rYXJwb3Ytd29yay9UcnVlTkFTL3dlYnVpL3NyYy9hcHAvaGVscGVycy9vcGVyYXRvcnMvZmlsdGVyLWFzeW5jLm9wZXJhdG9yLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIGZpbHRlciwgbWFwLCBPYnNlcnZhYmxlLCBPcGVyYXRvckZ1bmN0aW9uLCBzd2l0Y2hNYXAsIHRha2UsXG59IGZyb20gJ3J4anMnO1xuXG4vKipcbiAqIFNpbWlsYXIgdG8gZmlsdGVyKCksIGJ1dCBhY2NlcHRzIGFuIG9ic2VydmFibGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJBc3luYzxUPihwcmVkaWNhdGVGYWN0b3J5OiAodmFsdWU6IFQpID0+IE9ic2VydmFibGU8Ym9vbGVhbj4pOiBPcGVyYXRvckZ1bmN0aW9uPFQsIFQ+IHtcbiAgcmV0dXJuIChzb3VyY2UkOiBPYnNlcnZhYmxlPFQ+KSA9PiBzb3VyY2UkLnBpcGUoXG4gICAgc3dpdGNoTWFwKCh2YWx1ZSkgPT4ge1xuICAgICAgY29uc3QgcHJlZGljYXRlJCA9IHByZWRpY2F0ZUZhY3RvcnkodmFsdWUpO1xuICAgICAgcmV0dXJuIHByZWRpY2F0ZSQucGlwZShcbiAgICAgICAgdGFrZSgxKSxcbiAgICAgICAgZmlsdGVyKChyZXN1bHQpID0+IHJlc3VsdCksXG4gICAgICAgIG1hcCgoKSA9PiB2YWx1ZSksXG4gICAgICApO1xuICAgIH0pLFxuICApO1xufVxuIl0sInZlcnNpb24iOjN9