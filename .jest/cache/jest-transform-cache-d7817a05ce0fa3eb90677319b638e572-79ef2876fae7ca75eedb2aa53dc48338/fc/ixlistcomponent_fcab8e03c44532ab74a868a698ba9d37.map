{"file":"/Users/macbook/karpov-work/TrueNAS/webui/src/app/modules/forms/ix-forms/components/ix-list/ix-list.component.ts","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,wCAMuB;AAEvB,qDAAqD;AACrD,8CAAsD;AAEtD,6GAAwG;AACxG,0GAAqG;AACrG,uEAAmE;;AAgB5D,IAAM,eAAe,GAArB,MAAM,eAAe;IAgB1B,YACU,GAAsB;QAAtB,QAAG,GAAH,GAAG,CAAmB;QAXvB,WAAM,GAAG,IAAI;QAMb,QAAG,GAAG,IAAA,aAAM,GAAqB;QAE1C,eAAU,GAAG,KAAK,CAAC;IAIhB,CAAC;IAEJ,eAAe;;QACb,IAAI,CAAC,IAAI,CAAC,UAAU,IAAI,CAAA,MAAA,IAAI,CAAC,OAAO,0CAAE,MAAM,IAAG,CAAC,EAAE,CAAC;YACjD,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC5B,CAAC;IACH,CAAC;IAED,OAAO,CAAC,MAA0B;QAChC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IACxB,CAAC;IAED,gBAAgB,CAAC,UAAmB;QAClC,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;IAC/B,CAAC;IAEO,kBAAkB;QACxB,UAAU,CAAC,GAAG,EAAE;YACd,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,YAAmB,EAAE,EAAE;gBAC3C,IAAI,CAAC,OAAO,CACV,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,IAAqB,EAAE,EAAE;;oBAC7C,uCACK,IAAI,KACP,MAAM,kCACD,IAAI,CAAC,MAAM,KACd,OAAO,EAAE,MAAA,YAAY,aAAZ,YAAY,uBAAZ,YAAY,CAAG,IAAI,CAAC,QAAQ,CAAC,mCAAI,CAAC,OAAO,YAAY,KAAK,QAAQ,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,OAEnH;gBACJ,CAAC,CAAC,CACH,CAAC;YACJ,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC;QAC1B,CAAC,CAAC,CAAC;IACL,CAAC;;AApDU,0CAAe;;;;;wBACzB,YAAK;oBACL,YAAK;sBACL,YAAK;oBACL,YAAK;uBACL,YAAK;qBACL,YAAK;sBACL,YAAK;0BAEL,YAAK;yBACL,YAAK;;;0BAVK,eAAe;IAd3B,IAAA,gBAAS,EAAC;QACT,QAAQ,EAAE,SAAS;QACnB,6CAAuC;QAEvC,eAAe,EAAE,8BAAuB,CAAC,MAAM;QAC/C,UAAU,EAAE,IAAI;QAChB,OAAO,EAAE;YACP,qCAAgB;YAChB,kBAAS;YACT,uCAAiB;YACjB,sBAAe;YACf,8BAAa;SACd;KACF,CAAC;GACW,eAAe,CAqD3B","names":[],"sources":["/Users/macbook/karpov-work/TrueNAS/webui/src/app/modules/forms/ix-forms/components/ix-list/ix-list.component.ts"],"sourcesContent":["import {\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  Input, output,\n} from '@angular/core';\nimport { AbstractControl } from '@angular/forms';\nimport { MatButton } from '@angular/material/button';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { ChartSchemaNode } from 'app/interfaces/app.interface';\nimport { IxErrorsComponent } from 'app/modules/forms/ix-forms/components/ix-errors/ix-errors.component';\nimport { IxLabelComponent } from 'app/modules/forms/ix-forms/components/ix-label/ix-label.component';\nimport { TestDirective } from 'app/modules/test-id/test.directive';\n\n@Component({\n  selector: 'ix-list',\n  templateUrl: './ix-list.component.html',\n  styleUrls: ['./ix-list.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  standalone: true,\n  imports: [\n    IxLabelComponent,\n    MatButton,\n    IxErrorsComponent,\n    TranslateModule,\n    TestDirective,\n  ],\n})\nexport class IxListComponent implements AfterViewInit {\n  @Input() formArray: AbstractControl;\n  @Input() label: string;\n  @Input() tooltip: string;\n  @Input() empty: boolean;\n  @Input() required: boolean;\n  @Input() canAdd = true;\n  @Input() default: unknown[];\n  // TODO: Does not belong to the scope of this component.\n  @Input() itemsSchema: ChartSchemaNode[];\n  @Input() isEditMode: boolean;\n\n  readonly add = output<ChartSchemaNode[]>();\n\n  isDisabled = false;\n\n  constructor(\n    private cdr: ChangeDetectorRef,\n  ) {}\n\n  ngAfterViewInit(): void {\n    if (!this.isEditMode && this.default?.length > 0) {\n      this.handleListDefaults();\n    }\n  }\n\n  addItem(schema?: ChartSchemaNode[]): void {\n    this.add.emit(schema);\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.isDisabled = isDisabled;\n  }\n\n  private handleListDefaults(): void {\n    setTimeout(() => {\n      this.default.forEach((defaultValue: never) => {\n        this.addItem(\n          this.itemsSchema.map((item: ChartSchemaNode) => {\n            return {\n              ...item,\n              schema: {\n                ...item.schema,\n                default: defaultValue?.[item.variable] ?? (typeof defaultValue !== 'object' ? defaultValue : item.schema.default),\n              },\n            };\n          }),\n        );\n      });\n\n      this.cdr.markForCheck();\n    });\n  }\n}\n"],"version":3}