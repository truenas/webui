{"file":"/Users/macbook/karpov-work/TrueNAS/webui/src/app/classes/job-progress-dialog-ref.class.ts","mappings":";;;AAAA,6DAAgE;AAGhE,+BAEc;AAId,MAAa,oBAAoB;IAC/B,YACW,YAAyD,EACzD,SAA2B;QAD3B,iBAAY,GAAZ,YAAY,CAA6C;QACzD,cAAS,GAAT,SAAS,CAAkB;IACnC,CAAC;IAEJ,WAAW;QACT,OAAO,IAAA,YAAK,EACV,IAAA,iCAAkB,EAAC,IAAI,CAAC,YAAY,CAAC,iBAAiB,CAAC,UAAU,CAAC,EAClE,IAAA,iCAAkB,EAAC,IAAI,CAAC,YAAY,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC,IAAI,CACrE,IAAA,gBAAS,EAAC,GAAG,EAAE,CAAC,IAAA,iBAAU,EAAC,GAAG,EAAE,CAAC,IAAI,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CACpF,EACD,IAAA,iCAAkB,EAAC,IAAI,CAAC,YAAY,CAAC,iBAAiB,CAAC,UAAU,CAAC;aAC/D,IAAI,CAAC,IAAA,gBAAS,EAAC,CAAC,KAAK,EAAE,EAAE,CAAC,IAAA,iBAAU,EAAC,GAAG,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CACvD,CAAC,IAAI,CAAC,IAAA,WAAI,EAAC,CAAC,CAAC,CAAC,CAAC;IAClB,CAAC;CACF;AAhBD,oDAgBC","names":[],"sources":["/Users/macbook/karpov-work/TrueNAS/webui/src/app/classes/job-progress-dialog-ref.class.ts"],"sourcesContent":["import { outputToObservable } from '@angular/core/rxjs-interop';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport { TranslateService } from '@ngx-translate/core';\nimport {\n  merge, Observable, switchMap, take, throwError,\n} from 'rxjs';\nimport { Job } from 'app/interfaces/job.interface';\nimport { JobProgressDialogComponent } from 'app/modules/dialog/components/job-progress/job-progress-dialog.component';\n\nexport class JobProgressDialogRef<T> {\n  constructor(\n    readonly matDialogRef: MatDialogRef<JobProgressDialogComponent<T>>,\n    readonly translate: TranslateService,\n  ) {}\n\n  afterClosed(): Observable<Job<T>> {\n    return merge(\n      outputToObservable(this.matDialogRef.componentInstance.jobSuccess),\n      outputToObservable(this.matDialogRef.componentInstance.jobAborted).pipe(\n        switchMap(() => throwError(() => new Error(this.translate.instant('Job aborted')))),\n      ),\n      outputToObservable(this.matDialogRef.componentInstance.jobFailure)\n        .pipe(switchMap((error) => throwError(() => error))),\n    ).pipe(take(1));\n  }\n}\n"],"version":3}