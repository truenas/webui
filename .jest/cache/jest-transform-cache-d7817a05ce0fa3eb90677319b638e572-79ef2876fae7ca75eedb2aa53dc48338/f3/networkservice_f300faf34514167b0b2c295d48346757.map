{"file":"/Users/macbook/karpov-work/TrueNAS/webui/src/app/services/network.service.ts","mappings":"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","names":[],"sources":["/Users/macbook/karpov-work/TrueNAS/webui/src/app/services/network.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\nimport { Choices } from 'app/interfaces/choices.interface';\nimport { Option } from 'app/interfaces/option.interface';\nimport { AllNetworkInterfacesUpdate } from 'app/interfaces/reporting.interface';\nimport { WebSocketService } from 'app/services/ws.service';\n\n@Injectable({ providedIn: 'root' })\nexport class NetworkService {\n  macRegex = /\\b([0-9A-F]{2}[:-]){5}([0-9A-F]){2}\\b/i;\n\n  ipv4Regex = /^((25[0-5]|2[0-4][0-9]|1?[0-9]{1,2})\\.){3}(25[0-5]|2[0-4][0-9]|1?[0-9]{1,2})$/;\n  ipv4CidrRegex = /^((25[0-5]|2[0-4][0-9]|1?[0-9]{1,2})\\.){3}(25[0-5]|2[0-4][0-9]|1?[0-9]{1,2})(\\/(3[0-2]|[1-2][0-9]|[0-9]))$/;\n  ipv4CidrOptionalRegex = /^((25[0-5]|2[0-4][0-9]|1?[0-9]{1,2})\\.){3}(25[0-5]|2[0-4][0-9]|1?[0-9]{1,2})(\\/(3[0-2]|[1-2][0-9]|[0-9]))?$/;\n\n  ipv6Regex = /^([0-9a-f]|:){1,4}(:([0-9a-f]{0,4})*){1,7}(:((25[0-5]|2[0-4][0-9]|1?[0-9]{1,2})\\.){3}(25[0-5]|2[0-4][0-9]|1?[0-9]{1,2}))?$/i;\n  ipv6CidrRegex = /^([0-9a-f]|:){1,4}(:([0-9a-f]{0,4})*){1,7}(:((25[0-5]|2[0-4][0-9]|1?[0-9]{1,2})\\.){3}(25[0-5]|2[0-4][0-9]|1?[0-9]{1,2}))?(\\/(12[0-8]|1[0-1][0-9]|[1-9][0-9]|[0-9]))$/i;\n  ipv6CidrOptionalRegex = /^([0-9a-f]|:){1,4}(:([0-9a-f]{0,4})*){1,7}(:((25[0-5]|2[0-4][0-9]|1?[0-9]{1,2})\\.){3}(25[0-5]|2[0-4][0-9]|1?[0-9]{1,2}))?(\\/(12[0-8]|1[0-1][0-9]|[1-9][0-9]|[0-9]))?$/i;\n\n  ipv4OrIpv6 = new RegExp('(' + this.ipv6Regex.source + ')|(' + this.ipv4Regex.source + ')');\n  ipv4OrIpv6Cidr = new RegExp('(' + this.ipv6CidrRegex.source + ')|(' + this.ipv4CidrRegex.source + ')');\n  ipv4OrIpv6CidrOptional = new RegExp('(' + this.ipv6CidrOptionalRegex.source + ')|(' + this.ipv4CidrOptionalRegex.source + ')');\n\n  hostnameRegex = /^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9])\\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9-]*[A-Za-z0-9])$/;\n\n  constructor(protected ws: WebSocketService) {}\n\n  getVlanParentInterfaceChoices(): Observable<Choices> {\n    return this.ws.call('interface.vlan_parent_interface_choices');\n  }\n\n  getLaggPortsChoices(id: string = null): Observable<Choices> {\n    return this.ws.call('interface.lag_ports_choices', [id]);\n  }\n\n  getLaggProtocolChoices(): Observable<string[]> {\n    return this.ws.call('interface.lag_supported_protocols');\n  }\n\n  getBridgeMembersChoices(id: string = null): Observable<Choices> {\n    return this.ws.call('interface.bridge_members_choices', [id]);\n  }\n\n  getV4Netmasks(): Option[] {\n    return Array(34).fill(0).map(\n      (_, i) => {\n        if (i === 0) {\n          return { label: '---------', value: '' };\n        }\n        return { label: String(33 - i), value: String(33 - i) };\n      },\n    );\n  }\n\n  getV6PrefixLength(): Option[] {\n    return Array(34).fill(0).map(\n      (_, i) => {\n        if (i === 0) {\n          return { label: '---------', value: '' };\n        }\n        return { label: String((33 - i) * 4), value: String((33 - i) * 4) };\n      },\n    );\n  }\n\n  subscribeToInOutUpdates(): Observable<AllNetworkInterfacesUpdate> {\n    return this.ws.subscribe('reporting.realtime').pipe(\n      map((event) => event.fields?.interfaces),\n      filter(Boolean),\n    );\n  }\n}\n"],"version":3}