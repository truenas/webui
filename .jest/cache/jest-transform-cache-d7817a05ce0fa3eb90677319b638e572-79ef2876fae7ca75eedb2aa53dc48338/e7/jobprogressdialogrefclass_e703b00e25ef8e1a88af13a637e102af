1568fba8faa2e99daabeb559f424cbff
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.JobProgressDialogRef = void 0;
const rxjs_interop_1 = require("@angular/core/rxjs-interop");
const rxjs_1 = require("rxjs");
class JobProgressDialogRef {
    constructor(matDialogRef, translate) {
        this.matDialogRef = matDialogRef;
        this.translate = translate;
    }
    afterClosed() {
        return (0, rxjs_1.merge)((0, rxjs_interop_1.outputToObservable)(this.matDialogRef.componentInstance.jobSuccess), (0, rxjs_interop_1.outputToObservable)(this.matDialogRef.componentInstance.jobAborted).pipe((0, rxjs_1.switchMap)(() => (0, rxjs_1.throwError)(() => new Error(this.translate.instant('Job aborted'))))), (0, rxjs_interop_1.outputToObservable)(this.matDialogRef.componentInstance.jobFailure)
            .pipe((0, rxjs_1.switchMap)((error) => (0, rxjs_1.throwError)(() => error)))).pipe((0, rxjs_1.take)(1));
    }
}
exports.JobProgressDialogRef = JobProgressDialogRef;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL21hY2Jvb2sva2FycG92LXdvcmsvVHJ1ZU5BUy93ZWJ1aS9zcmMvYXBwL2NsYXNzZXMvam9iLXByb2dyZXNzLWRpYWxvZy1yZWYuY2xhc3MudHMiLCJtYXBwaW5ncyI6Ijs7O0FBQUEsNkRBQWdFO0FBR2hFLCtCQUVjO0FBSWQsTUFBYSxvQkFBb0I7SUFDL0IsWUFDVyxZQUF5RCxFQUN6RCxTQUEyQjtRQUQzQixpQkFBWSxHQUFaLFlBQVksQ0FBNkM7UUFDekQsY0FBUyxHQUFULFNBQVMsQ0FBa0I7SUFDbkMsQ0FBQztJQUVKLFdBQVc7UUFDVCxPQUFPLElBQUEsWUFBSyxFQUNWLElBQUEsaUNBQWtCLEVBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLENBQUMsRUFDbEUsSUFBQSxpQ0FBa0IsRUFBQyxJQUFJLENBQUMsWUFBWSxDQUFDLGlCQUFpQixDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FDckUsSUFBQSxnQkFBUyxFQUFDLEdBQUcsRUFBRSxDQUFDLElBQUEsaUJBQVUsRUFBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FDcEYsRUFDRCxJQUFBLGlDQUFrQixFQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsaUJBQWlCLENBQUMsVUFBVSxDQUFDO2FBQy9ELElBQUksQ0FBQyxJQUFBLGdCQUFTLEVBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLElBQUEsaUJBQVUsRUFBQyxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQ3ZELENBQUMsSUFBSSxDQUFDLElBQUEsV0FBSSxFQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDbEIsQ0FBQztDQUNGO0FBaEJELG9EQWdCQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvbWFjYm9vay9rYXJwb3Ytd29yay9UcnVlTkFTL3dlYnVpL3NyYy9hcHAvY2xhc3Nlcy9qb2ItcHJvZ3Jlc3MtZGlhbG9nLXJlZi5jbGFzcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBvdXRwdXRUb09ic2VydmFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlL3J4anMtaW50ZXJvcCc7XG5pbXBvcnQgeyBNYXREaWFsb2dSZWYgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9kaWFsb2cnO1xuaW1wb3J0IHsgVHJhbnNsYXRlU2VydmljZSB9IGZyb20gJ0BuZ3gtdHJhbnNsYXRlL2NvcmUnO1xuaW1wb3J0IHtcbiAgbWVyZ2UsIE9ic2VydmFibGUsIHN3aXRjaE1hcCwgdGFrZSwgdGhyb3dFcnJvcixcbn0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBKb2IgfSBmcm9tICdhcHAvaW50ZXJmYWNlcy9qb2IuaW50ZXJmYWNlJztcbmltcG9ydCB7IEpvYlByb2dyZXNzRGlhbG9nQ29tcG9uZW50IH0gZnJvbSAnYXBwL21vZHVsZXMvZGlhbG9nL2NvbXBvbmVudHMvam9iLXByb2dyZXNzL2pvYi1wcm9ncmVzcy1kaWFsb2cuY29tcG9uZW50JztcblxuZXhwb3J0IGNsYXNzIEpvYlByb2dyZXNzRGlhbG9nUmVmPFQ+IHtcbiAgY29uc3RydWN0b3IoXG4gICAgcmVhZG9ubHkgbWF0RGlhbG9nUmVmOiBNYXREaWFsb2dSZWY8Sm9iUHJvZ3Jlc3NEaWFsb2dDb21wb25lbnQ8VD4+LFxuICAgIHJlYWRvbmx5IHRyYW5zbGF0ZTogVHJhbnNsYXRlU2VydmljZSxcbiAgKSB7fVxuXG4gIGFmdGVyQ2xvc2VkKCk6IE9ic2VydmFibGU8Sm9iPFQ+PiB7XG4gICAgcmV0dXJuIG1lcmdlKFxuICAgICAgb3V0cHV0VG9PYnNlcnZhYmxlKHRoaXMubWF0RGlhbG9nUmVmLmNvbXBvbmVudEluc3RhbmNlLmpvYlN1Y2Nlc3MpLFxuICAgICAgb3V0cHV0VG9PYnNlcnZhYmxlKHRoaXMubWF0RGlhbG9nUmVmLmNvbXBvbmVudEluc3RhbmNlLmpvYkFib3J0ZWQpLnBpcGUoXG4gICAgICAgIHN3aXRjaE1hcCgoKSA9PiB0aHJvd0Vycm9yKCgpID0+IG5ldyBFcnJvcih0aGlzLnRyYW5zbGF0ZS5pbnN0YW50KCdKb2IgYWJvcnRlZCcpKSkpLFxuICAgICAgKSxcbiAgICAgIG91dHB1dFRvT2JzZXJ2YWJsZSh0aGlzLm1hdERpYWxvZ1JlZi5jb21wb25lbnRJbnN0YW5jZS5qb2JGYWlsdXJlKVxuICAgICAgICAucGlwZShzd2l0Y2hNYXAoKGVycm9yKSA9PiB0aHJvd0Vycm9yKCgpID0+IGVycm9yKSkpLFxuICAgICkucGlwZSh0YWtlKDEpKTtcbiAgfVxufVxuIl0sInZlcnNpb24iOjN9