0ad155ad4dcf3036b486f51e61944cf8
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.UserComboboxProvider = void 0;
const operators_1 = require("rxjs/operators");
class UserComboboxProvider {
    fetch(filterValue) {
        this.page = 0;
        const offset = this.page * this.pageSize;
        return this.userService.userQueryDsCache(filterValue, offset)
            .pipe((0, operators_1.map)((users) => this.userQueryResToOptions(users)));
    }
    userQueryResToOptions(users) {
        return users.map((user) => {
            return { label: user.username, value: user[this.optionsValueField] };
        });
    }
    nextPage(filterValue) {
        this.page++;
        const offset = this.page * this.pageSize;
        return this.userService.userQueryDsCache(filterValue, offset)
            .pipe((0, operators_1.map)((users) => this.userQueryResToOptions(users)));
    }
    constructor(userService, optionsValueField = 'username') {
        this.userService = userService;
        this.optionsValueField = optionsValueField;
        this.page = 1;
        this.pageSize = 50;
    }
}
exports.UserComboboxProvider = UserComboboxProvider;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL21hY2Jvb2sva2FycG92LXdvcmsvVHJ1ZU5BUy93ZWJ1aS9zcmMvYXBwL21vZHVsZXMvZm9ybXMvaXgtZm9ybXMvY2xhc3Nlcy91c2VyLWNvbWJvYm94LXByb3ZpZGVyLnRzIiwibWFwcGluZ3MiOiI7OztBQUNBLDhDQUFxQztBQU1yQyxNQUFhLG9CQUFvQjtJQUkvQixLQUFLLENBQUMsV0FBbUI7UUFDdkIsSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUM7UUFDZCxNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUM7UUFFekMsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLGdCQUFnQixDQUFDLFdBQVcsRUFBRSxNQUFNLENBQUM7YUFDMUQsSUFBSSxDQUNILElBQUEsZUFBRyxFQUFDLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMscUJBQXFCLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FDbEQsQ0FBQztJQUNOLENBQUM7SUFFRCxxQkFBcUIsQ0FBQyxLQUFhO1FBQ2pDLE9BQU8sS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFO1lBQ3hCLE9BQU8sRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLENBQUM7UUFDdkUsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsUUFBUSxDQUFDLFdBQW1CO1FBQzFCLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNaLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQztRQUN6QyxPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsZ0JBQWdCLENBQUMsV0FBVyxFQUFFLE1BQU0sQ0FBQzthQUMxRCxJQUFJLENBQ0gsSUFBQSxlQUFHLEVBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUNsRCxDQUFDO0lBQ04sQ0FBQztJQUVELFlBQ1ksV0FBd0IsRUFDeEIsb0JBQStDLFVBQVU7UUFEekQsZ0JBQVcsR0FBWCxXQUFXLENBQWE7UUFDeEIsc0JBQWlCLEdBQWpCLGlCQUFpQixDQUF3QztRQTlCM0QsU0FBSSxHQUFHLENBQUMsQ0FBQztRQUNWLGFBQVEsR0FBRyxFQUFFLENBQUM7SUE4QnBCLENBQUM7Q0FDTDtBQWpDRCxvREFpQ0MiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL21hY2Jvb2sva2FycG92LXdvcmsvVHJ1ZU5BUy93ZWJ1aS9zcmMvYXBwL21vZHVsZXMvZm9ybXMvaXgtZm9ybXMvY2xhc3Nlcy91c2VyLWNvbWJvYm94LXByb3ZpZGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IG1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IE9wdGlvbiB9IGZyb20gJ2FwcC9pbnRlcmZhY2VzL29wdGlvbi5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgVXNlciB9IGZyb20gJ2FwcC9pbnRlcmZhY2VzL3VzZXIuaW50ZXJmYWNlJztcbmltcG9ydCB7IEl4Q29tYm9ib3hQcm92aWRlciB9IGZyb20gJ2FwcC9tb2R1bGVzL2Zvcm1zL2l4LWZvcm1zL2NvbXBvbmVudHMvaXgtY29tYm9ib3gvaXgtY29tYm9ib3gtcHJvdmlkZXInO1xuaW1wb3J0IHsgVXNlclNlcnZpY2UgfSBmcm9tICdhcHAvc2VydmljZXMvdXNlci5zZXJ2aWNlJztcblxuZXhwb3J0IGNsYXNzIFVzZXJDb21ib2JveFByb3ZpZGVyIGltcGxlbWVudHMgSXhDb21ib2JveFByb3ZpZGVyIHtcbiAgcHJvdGVjdGVkIHBhZ2UgPSAxO1xuICByZWFkb25seSBwYWdlU2l6ZSA9IDUwO1xuXG4gIGZldGNoKGZpbHRlclZhbHVlOiBzdHJpbmcpOiBPYnNlcnZhYmxlPE9wdGlvbltdPiB7XG4gICAgdGhpcy5wYWdlID0gMDtcbiAgICBjb25zdCBvZmZzZXQgPSB0aGlzLnBhZ2UgKiB0aGlzLnBhZ2VTaXplO1xuXG4gICAgcmV0dXJuIHRoaXMudXNlclNlcnZpY2UudXNlclF1ZXJ5RHNDYWNoZShmaWx0ZXJWYWx1ZSwgb2Zmc2V0KVxuICAgICAgLnBpcGUoXG4gICAgICAgIG1hcCgodXNlcnMpID0+IHRoaXMudXNlclF1ZXJ5UmVzVG9PcHRpb25zKHVzZXJzKSksXG4gICAgICApO1xuICB9XG5cbiAgdXNlclF1ZXJ5UmVzVG9PcHRpb25zKHVzZXJzOiBVc2VyW10pOiBPcHRpb25bXSB7XG4gICAgcmV0dXJuIHVzZXJzLm1hcCgodXNlcikgPT4ge1xuICAgICAgcmV0dXJuIHsgbGFiZWw6IHVzZXIudXNlcm5hbWUsIHZhbHVlOiB1c2VyW3RoaXMub3B0aW9uc1ZhbHVlRmllbGRdIH07XG4gICAgfSk7XG4gIH1cblxuICBuZXh0UGFnZShmaWx0ZXJWYWx1ZTogc3RyaW5nKTogT2JzZXJ2YWJsZTxPcHRpb25bXT4ge1xuICAgIHRoaXMucGFnZSsrO1xuICAgIGNvbnN0IG9mZnNldCA9IHRoaXMucGFnZSAqIHRoaXMucGFnZVNpemU7XG4gICAgcmV0dXJuIHRoaXMudXNlclNlcnZpY2UudXNlclF1ZXJ5RHNDYWNoZShmaWx0ZXJWYWx1ZSwgb2Zmc2V0KVxuICAgICAgLnBpcGUoXG4gICAgICAgIG1hcCgodXNlcnMpID0+IHRoaXMudXNlclF1ZXJ5UmVzVG9PcHRpb25zKHVzZXJzKSksXG4gICAgICApO1xuICB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJvdGVjdGVkIHVzZXJTZXJ2aWNlOiBVc2VyU2VydmljZSxcbiAgICBwcm90ZWN0ZWQgb3B0aW9uc1ZhbHVlRmllbGQ6ICd1c2VybmFtZScgfCAndWlkJyB8ICdpZCcgPSAndXNlcm5hbWUnLFxuICApIHt9XG59XG4iXSwidmVyc2lvbiI6M30=