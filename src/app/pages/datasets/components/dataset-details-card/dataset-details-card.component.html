<mat-card class="card">
  <mat-card-header>
    <h3 *ngIf="isFilesystem" mat-card-title>
      {{ 'Dataset Details' | translate }}
    </h3>
    <ng-container *ngIf="isFilesystem">
      <button
        *ixRequiresRoles="[Role.DatasetWrite]"
        mat-button
        ixTest="edit-dataset"
        (click)="editDataset()"
      >
        {{ 'Edit' | translate }}
      </button>
    </ng-container>

    <h3 *ngIf="isZvol" mat-card-title>{{ 'Zvol Details' | translate }}</h3>
    <ng-container *ngIf="isZvol">
      <button
        *ixRequiresRoles="[Role.DatasetWrite]"
        mat-button
        ixTest="edit-zvol"
        (click)="editZvol()"
      >
        {{ 'Edit Zvol' | translate }}
      </button>
    </ng-container>
  </mat-card-header>
  <mat-card-content>
    <div class="details-item">
      <div class="label">{{ 'Type' | translate }}:</div>
      <div class="value">
        <ng-container *ngIf="dataset.type; else notAvailable">
          {{ dataset.type }}
        </ng-container>
      </div>
    </div>
    <div class="details-item">
      <div class="label">{{ 'Sync' | translate }}:</div>
      <div class="value">
        <ng-container *ngIf="dataset?.sync?.value; else notAvailable">
          {{ dataset.sync.value }}
        </ng-container>
      </div>
    </div>
    <div class="details-item">
      <div class="label">{{ 'Compression Level' | translate }}:</div>
      <div class="value">
        <ng-container *ngIf="datasetCompression; else notAvailable">
          {{ datasetCompression }}
        </ng-container>
      </div>
    </div>
    @if (!isZvol) {
      <div class="details-item">
        <div class="label">{{ 'Enable Atime' | translate }}:</div>
        <div class="value">
          {{ (dataset.atime ? OnOff.On : OnOff.Off) | translate }}
        </div>
      </div>
    }
    <div class="details-item">
      <div class="label">{{ 'ZFS Deduplication' | translate }}:</div>
      <div class="value">
        <ng-container *ngIf="dataset?.deduplication?.value; else notAvailable">
          {{ dataset.deduplication.value }}
        </ng-container>
      </div>
    </div>
    <div class="details-item">
      <div class="label">{{ 'Case Sensitivity' | translate }}:</div>
      <div class="value">
        {{ (dataset.casesensitive ? OnOff.On : OnOff.Off) | translate }}
      </div>
    </div>
    <div class="details-item">
      <div class="label">{{ 'Path' | translate }}:</div>
      @if (!isLoading) {
        <div
          matTooltipPosition="above"
          class="value dataset-path"
          [matTooltip]="dataset.name"
          [matTooltipClass]="['dataset-path-tooltip']"
        >
          {{ dataset.name }}
        </div>
      }
      <ix-copy-button [text]="dataset.name"></ix-copy-button>
    </div>
    @if (!isLoading && hasComments) {
      <div class="details-item">
        <div class="label">{{ 'Comments' | translate }}:</div>
        <div class="value dataset-comments">{{ dataset.comments.value }}</div>
      </div>
    }
  </mat-card-content>
  @if (dataset.id !== dataset.pool) {
    <mat-card-actions>
      @if (canBePromoted) {
        <button
          *ixRequiresRoles="[Role.FullAdmin]"
          mat-button
          ixTest="promote-dataset"
          (click)="promoteDataset()"
        >
          {{ 'Promote' | translate }}
        </button>
      }
      <button
        *ixRequiresRoles="[Role.DatasetDelete]"
        mat-button
        ixTest="delete-dataset"
        (click)="deleteDataset()"
      >
        {{ 'Delete' | translate }}
      </button>
    </mat-card-actions>
  }
</mat-card>

<ng-template #notAvailable>
  {{ 'N/A' | translate }}
</ng-template>
