@if (advancedMode()) {
  <ix-fieldset [title]="'Other Options' | translate" [formGroup]="form">
    <ix-input
      formControlName="comments"
      [label]="'Comments' | translate"
    ></ix-input>

    <ix-select
      formControlName="sync"
      [required]="true"
      [options]="syncOptions$"
      [label]="'Sync' | translate"
      [tooltip]="helptext.syncTooltip | translate"
    ></ix-select>

    <ix-select
      formControlName="compression"
      [required]="true"
      [options]="compressionOptions$"
      [label]="'Compression Level' | translate"
      [tooltip]="helptext.compressionTooltip | translate"
    ></ix-select>

    <ix-select
      formControlName="atime"
      [required]="true"
      [options]="atimeOptions$"
      [label]="'Enable Atime' | translate"
      [tooltip]="helptext.atimeTooltip | translate"
    ></ix-select>

    @if (hasDeduplication) {
      <ix-select
        formControlName="deduplication"
        [label]="'ZFS Deduplication' | translate"
        [required]="true"
        [options]="deduplicationOptions$"
        [tooltip]="helptext.deduplicationTooltip | translate"
      ></ix-select>
    }

    <ix-select
      formControlName="casesensitivity"
      [label]="'Case Sensitivity' | translate"
      [required]="true"
      [options]="caseSensitivityOptions$"
      [tooltip]="helptext.caseSensitivityTooltip | translate"
    ></ix-select>

    <ix-select
      formControlName="checksum"
      [required]="true"
      [options]="checksumOptions$"
      [label]="'Checksum' | translate"
    ></ix-select>

    @if (hasChecksumWarning) {
      <ix-warning [message]="helptext.deduplicationChecksumInlineWarning"></ix-warning>
    }

    <ix-select
      formControlName="readonly"
      [label]="'Read-only' | translate"
      [required]="true"
      [options]="readonlyOptions$"
    ></ix-select>

    <ix-select
      formControlName="exec"
      [label]="'Exec' | translate"
      [required]="true"
      [options]="execOptions$"
      [tooltip]="helptext.execTooltip | translate"
    ></ix-select>

    <ix-select
      formControlName="snapdir"
      [label]="'Snapshot Directory' | translate"
      [tooltip]="helptext.snapdirTooltip | translate"
      [options]="snapdirOptions$"
    ></ix-select>

    <ix-select
      formControlName="snapdev"
      [label]="'Snapdev' | translate"
      [required]="true"
      [tooltip]="helptext.snapdevTooltip | translate"
      [options]="snapdevOptions$"
    ></ix-select>

    <ix-select
      formControlName="copies"
      [label]="'Copies' | translate"
      [tooltip]="helptext.copiesTooltip | translate"
      [options]="copiesOptions$"
    ></ix-select>

    <ix-select
      formControlName="recordsize"
      [label]="'Record Size' | translate"
      [required]="true"
      [options]="recordsizeOptions$"
      [tooltip]="helptext.recordsizeTooltip | translate"
    ></ix-select>

    @if (hasRecordsizeWarning) {
      <div class="recordsize-warning">
        {{ helptext.recordsizeWarning | translate: { size: minimumRecommendedRecordsize } }}
      </div>
    }

    <ix-select
      formControlName="acltype"
      [label]="'ACL Type' | translate"
      [required]="true"
      [options]="aclTypeOptions$"
    ></ix-select>

    <ix-select
      formControlName="aclmode"
      [label]="'ACL Mode' | translate"
      [required]="true"
      [tooltip]="helptext.aclmodeTooltip | translate"
      [options]="aclModeOptions$"
    ></ix-select>

    <ix-select
      formControlName="special_small_block_size"
      [label]="'Use Metadata (Special) VDEVs' | translate"
      [tooltip]="helptext.useSpecialVdevsTooltip | translate"
      [options]="specialSmallBlockSizeOptions$"
      [required]="true"
    ></ix-select>

    @if (form.value.special_small_block_size === 'ON') {
      <button
        type="button"
        class="customize-link"
        [attr.aria-label]="
          showCustomizeSpecialSmallBlockSize
            ? ('Hide special vdev threshold customization' | translate)
            : form.value.special_small_block_size_custom
              ? ('Set special vdev threshold, current value is ' + (form.value.special_small_block_size_custom | ixFileSize) | translate)
              : ('Set special vdev threshold' | translate)
        "
        (click)="toggleCustomizeSpecialSmallBlockSize()"
      >
        @if (showCustomizeSpecialSmallBlockSize) {
          {{ 'Hide Threshold' | translate }}
        } @else if (form.value.special_small_block_size_custom) {
          {{ 'Set Threshold' | translate }} ({{ form.value.special_small_block_size_custom | ixFileSize }})
        } @else {
          {{ 'Set Threshold' | translate }}
        }
      </button>
    }

    @if (form.value.special_small_block_size === 'ON' && showCustomizeSpecialSmallBlockSize) {
      <ix-input
        formControlName="special_small_block_size_custom"
        [label]="'Threshold' | translate"
        [tooltip]="helptext.specialSmallBlocksCustomTooltip | translate"
        [required]="true"
        [parse]="formatter.memorySizeParsing"
        [format]="formatter.memorySizeFormatting"
      ></ix-input>
    }
  </ix-fieldset>
}
