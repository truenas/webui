<div class="tree-node-grid">
  <div class="cell cell-name">
    <span class="name">{{ ownName() }}</span>
  </div>
  <div class="cell cell-status" [style.background-color]="statusColor()">
    <span>{{ topologyItem().status | titlecase }}</span>
    @if (!isDisk() && !isMirror() && poolInstance()?.status_detail) {
      <tn-icon
        name="information-outline"
        library="mdi"
        [tnTooltip]="poolInstance().status_detail"
      ></tn-icon>
    }
  </div>
  <div class="cell">
    <span>{{ topologyItem()?.stats?.read_errors || 0 }}</span>
  </div>
  <div class="cell">
    <span>{{ topologyItem()?.stats?.write_errors || 0 }}</span>
  </div>
  <div class="cell">
    <span>{{ topologyItem()?.stats?.checksum_errors || 0 }}</span>
  </div>
  <div class="cell">
    <span>{{ errors() }}</span>
  </div>
  <div class="cell cell-actions">
    @if (isDisk() || isMirror()) {
      <button
        mat-icon-button
        [matTooltip]="'Actions' | translate"
        [attr.aria-label]="'Actions' | translate"
        [ixTest]="[ownName(), 'actions']"
        [matMenuTriggerFor]="menu"
      >
        <tn-icon name="dots-vertical" library="mdi"></tn-icon>
      </button>
    }
    <mat-menu #menu="matMenu">
      <button *ixRequiresRoles="requiredRoles" mat-menu-item ixTest="replace" (click)="replace()">
        <tn-icon name="file-replace" library="mdi"></tn-icon>
        <span>{{ 'Replace' | translate }}</span>
      </button>
      <ng-container *ixRequiresRoles="requiredRoles">
        @if (isDisk() && oneDisk()) {
          <button mat-menu-item ixTest="attach" (click)="attach()">
            <tn-icon name="attachment-plus" library="mdi"></tn-icon>
            <span>{{ 'Attach' | translate }}</span>
          </button>
        }
      </ng-container>
      <ng-container *ixRequiresRoles="requiredRoles">
        @if (isMirror()) {
          <button mat-menu-item ixTest="detach" (click)="detach()">
            <tn-icon name="attachment-minus" library="mdi"></tn-icon>
            <span>{{ 'Detach' | translate }}</span>
          </button>
        }
      </ng-container>
    </mat-menu>
  </div>
</div>
