<form [formGroup]="form">
  <ix-fieldset class="title" [title]="'Allow Access' | translate">
    <div>
      <mat-checkbox
        formControlName="smb"
        color="primary"
        ixTest="smb-access"
      >
        <span class="access-checkbox">
          <tn-icon name="tn-smb-share"></tn-icon>
          {{ 'SMB Access' | translate }}
        </span>
      </mat-checkbox>

      <ix-errors
        [label]="'SMB Access' | translate"
        [control]="form.controls.smb"
      ></ix-errors>

      @if (form.hasError('smb')) {
        <div class="smb-access-error">
          {{ form.getError('smb')?.message | translate }}
        </div>
      }
    </div>

    <div>
      <mat-checkbox
        formControlName="webshare"
        color="primary"
        ixTest="webshare-access"
      >
        <span class="access-checkbox">
          <tn-icon name="share-variant" library="mdi"></tn-icon>
          {{ 'WebShare Access' | translate }}
        </span>
      </mat-checkbox>
      <ix-errors [label]="'WebShare Access' | translate" [control]="form.controls.webshare"></ix-errors>
    </div>

    <div class="truenas-access-field">
      <mat-checkbox
        formControlName="truenas_access"
        color="primary"
        ixTest="truenas-access"
      >
        <span class="access-checkbox">
          <tn-icon name="tn-truenas-logo-mark"></tn-icon>
          {{ 'TrueNAS Access' | translate }}
        </span>
      </mat-checkbox>
      <ix-errors [label]="'TrueNAS Access' | translate" [control]="form.controls.truenas_access"></ix-errors>

      <div class="role-container">
        @if (showAccessRoleControl()) {
          <ix-select
            class="role"
            formControlName="role"
            [options]="roles$"
            [required]="false"
            [emptyLabel]="'Select Role' | translate"
          ></ix-select>

          <p class="role-hint">
            {{ 'Learn about' | translate }}
            <a href="https://www.truenas.com/docs/scale/25.04/scaletutorials/credentials/adminroles/" ixTest="custom-roles-link" target="_blank">{{ 'custom roles.' | translate }}</a>
          </p>
        }
      </div>
    </div>

    <div>
      <mat-checkbox
        formControlName="shell_access"
        color="primary"
        ixTest="shell-access"
      >
        <span class="access-checkbox">
          <tn-icon name="console-line" library="mdi"></tn-icon>
          {{ 'Shell Access' | translate }}
        </span>
      </mat-checkbox>
      <ix-errors [label]="'Shell Access' | translate" [control]="form.controls.shell_access"></ix-errors>
    </div>

    <div>
      <mat-checkbox
        formControlName="ssh_access"
        color="primary"
        ixTest="ssh-access"
      >
        <span class="access-checkbox">
          <tn-icon name="ssh" library="mdi"></tn-icon>
          {{ 'SSH Access' | translate }}
        </span>
      </mat-checkbox>
      <ix-errors [label]="'SSH Access' | translate" [control]="form.controls.ssh_access"></ix-errors>
    </div>

    @if (!editingUser()) {
      <p class="api-access-hint">{{ 'Access to API can be granted after user has been created.' | translate }}</p>
    }
  </ix-fieldset>
</form>
