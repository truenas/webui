<div class="header-card item-search">
  <ix-fake-progress-bar
    class="loader-bar"
    [loading]="dataProvider()?.isLoading$ | async"
  ></ix-fake-progress-bar>

  <div class="actions-bar">
    <div class="search-container">
      <ix-search-input
        #searchInput
        class="search-input"
        [properties]="searchProperties()"
        [filterPresets]="userPresets()"
        [advancedSearchPlaceholder]="advancedSearchPlaceholder"
        [query]="searchQuery()"
        (runSearch)="onSearch(searchInput.query()); searchInput.advancedSearch()?.hideDatePicker()"
        (queryChange)="onQueryChange($event)"
      ></ix-search-input>
      <div class="search-button-wrapper">
        <button
          mat-button
          type="button"
          color="primary"
          ixTest="search"
          (click)="onSearch(searchInput.query()); searchInput.advancedSearch()?.hideDatePicker()"
        >
          {{ 'Search' | translate }}
        </button>
      </div>
    </div>
    @if (searchQuery()?.isBasicQuery) {
      <div class="user-type-filter">
        <ix-select
          class="user-type-select"
          [label]="'Filter by Type' | translate"
          [multiple]="true"
          [options]="userTypeOptions$"
          [showSelectAll]="false"
          [ngModel]="selectedUserTypes()"
          (ngModelChange)="onUserTypeChange($event)"
        ></ix-select>
        <mat-slide-toggle
          class="builtin-toggle"
          color="primary"
          ixTest="show-built-in-users"
          [disabled]="!isBuiltinCheckboxEnabled()"
          [checked]="showBuiltinUsers"
          [attr.aria-label]="isBuiltinCheckboxEnabled() ? ('Toggle to show or hide built-in system users' | translate) : ('Available only when Local users are selected' | translate)"
          (change)="onShowBuiltinChange($event.checked)"
        >
          {{ 'Show Built-in Users' | translate }}
        </mat-slide-toggle>
      </div>
    }
  </div>
</div>
