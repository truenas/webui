<mat-card class="card">
  <mat-progress-bar *ngIf="isFormLoading" mode="indeterminate"></mat-progress-bar>
  <mat-card-content>
    <form [formGroup]="form" class="ix-form-container" (submit)="onSubmit()">
      <div class="two-columns">
        <ix-fieldset [title]="helptext.ups_fieldset_general">
          <ix-input
            formControlName="identifier"
            [label]="labels.identifier"
            [tooltip]="tooltips.identifier"
            [required]="true"
          ></ix-input>
          <ix-select
            formControlName="mode"
            [label]="labels.mode"
            [options]="modeOptions$"
            [tooltip]="tooltips.mode"
          ></ix-select>
          <ix-input
            *ngIf="!isMasterMode"
            formControlName="remotehost"
            [label]="labels.remotehost"
            [tooltip]="tooltips.remotehost"
            [required]="true"
          ></ix-input>
          <ix-input
            *ngIf="!isMasterMode"
            formControlName="remoteport"
            [label]="labels.remoteport"
            [tooltip]="tooltips.remoteport"
            [required]="true"
            type="number"
          ></ix-input>
          <ix-combobox
            *ngIf="isMasterMode"
            formControlName="driver"
            [label]="labels.driver"
            [tooltip]="tooltips.driver"
            [options]="driverOptions$"
            [required]="true"
          ></ix-combobox>
          <ix-combobox
            formControlName="port"
            [label]="labels.port"
            [tooltip]="tooltips.port"
            [options]="portOptions$"
            [required]="true"
          ></ix-combobox>
        </ix-fieldset>
        <ix-fieldset [title]="helptext.ups_fieldset_monitor">
          <ix-input
            formControlName="monuser"
            [label]="labels.monuser"
            [tooltip]="tooltips.monuser"
            [required]="true"
          ></ix-input>
          <ix-input
            formControlName="monpwd"
            [label]="labels.monpwd"
            [tooltip]="tooltips.monpwd"
            [required]="true"
            type="password"
          ></ix-input>
          <ix-textarea
            formControlName="extrausers"
            [label]="labels.extrausers"
            [tooltip]="tooltips.extrausers"
          ></ix-textarea>
          <ix-checkbox
            formControlName="rmonitor"
            [label]="labels.rmonitor"
            [tooltip]="tooltips.rmonitor"
          ></ix-checkbox>
        </ix-fieldset>
      </div>

      <div class="one-column">
        <ix-fieldset [title]="helptext.ups_fieldset_shutdown">
          <ix-select
            formControlName="shutdown"
            [label]="labels.shutdown"
            [options]="shutdownOptions$"
            [tooltip]="tooltips.shutdown"
          ></ix-select>
          <ix-input
            formControlName="shutdowntimer"
            [label]="labels.shutdowntimer"
            [tooltip]="tooltips.shutdowntimer"
            type="number"
          ></ix-input>
          <ix-input
            formControlName="shutdowncmd"
            [label]="labels.shutdowncmd"
            [tooltip]="tooltips.shutdowncmd"
          ></ix-input>
          <ix-checkbox
            formControlName="powerdown"
            [label]="labels.powerdown"
            [tooltip]="tooltips.powerdown"
          ></ix-checkbox>
        </ix-fieldset>
      </div>

      <div class="one-column">
        <ix-fieldset [title]="helptext.ups_fieldset_other">
          <ix-input
            formControlName="nocommwarntime"
            [label]="labels.nocommwarntime"
            [tooltip]="tooltips.nocommwarntime"
            type="number"
          ></ix-input>
          <ix-input
            formControlName="hostsync"
            [label]="labels.hostsync"
            [tooltip]="tooltips.hostsync"
            type="number"
          ></ix-input>
          <ix-input
            formControlName="description"
            [label]="labels.description"
            [tooltip]="tooltips.description"
          ></ix-input>
          <ix-textarea
            formControlName="options"
            [label]="labels.options"
            [tooltip]="tooltips.options"
          ></ix-textarea>
          <ix-textarea
            formControlName="optionsupsd"
            [label]="labels.optionsupsd"
            [tooltip]="tooltips.optionsupsd"
          ></ix-textarea>
        </ix-fieldset>
      </div>

      <div class="form-actions">
        <button
          mat-button
          type="submit"
          [disabled]="form.invalid || isFormLoading"
          color="primary"
        >{{ 'Save' | translate }}</button>
        <button
          mat-button
          color="accent"
          (click)="onCancel()"
        >{{ 'Cancel' | translate }}</button>
      </div>
    </form>
  </mat-card-content>
</mat-card>
