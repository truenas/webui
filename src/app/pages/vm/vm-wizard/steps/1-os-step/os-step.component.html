<form [formGroup]="form">
  <ix-select
    formControlName="os"
    [label]="'Guest Operating System' | translate"
    [required]="true"
    [options]="osOptions$"
    [tooltip]="helptext.os_tooltip | translate"
  ></ix-select>

  @if (form.controls.os.value === VmOs.Windows) {
    <ix-checkbox
      formControlName="hyperv_enlightenments"
      [label]="'Enable Hyper-V Enlightenments' | translate"
      [tooltip]="helptext.hyperv_enlightenments_tooltip | translate"
    ></ix-checkbox>
  }

  <ix-input
    formControlName="name"
    [label]="'Name' | translate"
    [required]="true"
    [tooltip]="helptext.name_tooltip | translate"
  ></ix-input>

  <ix-input
    formControlName="description"
    [label]="'Description' | translate"
    [tooltip]="helptext.description_tooltip | translate"
  ></ix-input>

  <ix-select
    formControlName="time"
    [label]="'System Clock' | translate"
    [required]="true"
    [options]="timeOptions$"
    [tooltip]="helptext.time_tooltip | translate"
  ></ix-select>

  <ix-select
    formControlName="bootloader"
    [label]="'Boot Method' | translate"
    [options]="bootloaderOptions$"
    [required]="true"
    [tooltip]="helptext.bootloader_tooltip | translate"
  ></ix-select>

  <ix-checkbox
    formControlName="enable_secure_boot"
    [label]="'Enable Secure Boot' | translate"
    [tooltip]="helptext.enableSecureBoot | translate"
  ></ix-checkbox>

  <ix-checkbox
    formControlName="trusted_platform_module"
    [label]="'Enable Trusted Platform Module (TPM)' | translate"
    [tooltip]="helptext.enableTrustedPlatformModule | translate"
  ></ix-checkbox>

  <ix-input
    formControlName="shutdown_timeout"
    type="number"
    [label]="'Shutdown Timeout' | translate"
    [tooltip]="helptext.shutdown_timeout.tooltip | translate"
  ></ix-input>

  <ix-checkbox
    formControlName="autostart"
    [label]="'Start on Boot' | translate"
    [tooltip]="helptext.autostart_tooltip | translate"
  ></ix-checkbox>

  <ix-checkbox
    formControlName="enable_display"
    [label]="'Enable SPICE Display' | translate"
    [tooltip]="helptext.enable_display_tooltip | translate"
  ></ix-checkbox>

  @if (form.value.enable_display) {
    <ix-select
      formControlName="bind"
      [label]="'Bind' | translate"
      [options]="bindOptions$"
      [required]="true"
      [tooltip]="helptext.display_bind_tooltip | translate"
    ></ix-select>

    <ix-input
      formControlName="password"
      type="password"
      [label]="'Password' | translate"
      [required]="true"
      [tooltip]="helptext.password_tooltip | translate"
    ></ix-input>
  }

  <ix-checkbox
    formControlName="enable_vnc"
    [label]="'Enable VNC' | translate"
    [tooltip]="helptext.enable_vnc_tooltip | translate"
  ></ix-checkbox>

  @if (form.value.enable_vnc) {
    <ix-select
      formControlName="vnc_bind"
      [label]="'VNC Bind' | translate"
      [options]="bindOptions$"
      [required]="true"
      [tooltip]="helptext.vnc_bind_tooltip | translate"
    ></ix-select>

    <ix-input
      formControlName="vnc_password"
      type="password"
      [label]="'VNC Password' | translate"
      [required]="true"
      [tooltip]="helptext.vnc_password_tooltip | translate"
    ></ix-input>

    <div class="vnc-warning">
      <p><strong>{{ 'Note' | translate }}:</strong> {{ 'VNC requires a separate client application and cannot be accessed through the web browser.' | translate }}</p>
    </div>
  }

  <ix-form-actions>
    <button
      mat-button
      matStepperNext
      color="primary"
      ixTest="next"
      [disabled]="form.invalid"
    >{{ 'Next' | translate }}</button>
  </ix-form-actions>
</form>
