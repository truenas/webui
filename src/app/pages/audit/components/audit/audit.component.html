<ng-template ixPageHeader>
  <ix-page-title-header>
    <button mat-button color="primary" ixTest="manage-views">
      {{ 'Manage Views' | translate }}
    </button>
  </ix-page-title-header>
</ng-template>

<mat-card class="header-card item-search">
  <ix-fake-progress-bar
    class="loader-bar"
    [loading]="dataProvider.isLoading$ | async"
  ></ix-fake-progress-bar>

  <div class="search-bar">
    <ix-search-input2
      #searchInput
      class="search-input"
      [properties]="searchProperties"
      [query]="searchQuery"
    ></ix-search-input2>
    <button
      mat-button
      color="primary"
      ixTest="search"
      (click)="onSearch(searchInput.query); updateUrlOptions()"
    >
      {{ 'Search' | translate }}
    </button>
  </div>
</mat-card>

<div class="container" fxLayoutGap="16px">
  <div class="table-container">
    <div class="sticky-header">
      <thead
        class="audit-header-row"
        ix-table-head
        [columns]="columns"
        [dataProvider]="dataProvider"
      ></thead>
    </div>

    <ix-table2
      [ix-table2-empty]="!(dataProvider.currentPageCount$ | async)"
      [emptyConfig]="emptyService.defaultEmptyConfig(dataProvider.emptyType$ | async)"
    >
      <tbody
        ix-table-body
        [columns]="columns"
        [dataProvider]="dataProvider"
        [isLoading]="dataProvider.isLoading$ | async"
        (expanded)="expanded($event)"
      >
        <ng-template
          let-audit
          ix-table-cell
          [columnIndex]="1"
          [dataProvider]="dataProvider"
        >
          <div class="user-avatar">
            <div [innerHTML]="getUserAvatarForLog(audit)"></div>
            <span>{{audit.username}}</span>
          </div>
        </ng-template>
      </tbody>
    </ix-table2>
    <ix-table-pager
      [dataProvider]="dataProvider"
      [pageSize]="pagination.pageSize"
      [currentPage]="pagination.pageNumber"
    ></ix-table-pager>
  </div>

  <div
    ixDetailsHeight="rightside-content-hold"
    class="details-container"
    [class.details-container-mobile]="showMobileDetails"
  >
    <ix-log-details-panel
      *ngIf="dataProvider.expandedRow"
      [log]="dataProvider.expandedRow"
      (hide)="closeMobileDetails()"
    ></ix-log-details-panel>
  </div>
</div>













