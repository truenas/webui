<div *ixRequiresRoles="requiredRoles">
  <div
    class="button-wrapper"
    [matTooltip]="!canManage() && manageRestrictedExplanation() ? manageRestrictedExplanation()! : ''"
    [matTooltipDisabled]="canManage() || !manageRestrictedExplanation()"
  >
    <button
      mat-icon-button
      type="button"
      [ixTest]="['actions-for', deviceDescription()]"
      [matMenuTriggerFor]="menu"
      [disabled]="!canManage()"
      [class.disabled]="!canManage()"
      [attr.tabindex]="!canManage() ? -1 : 0"
      [matTooltip]="canManage() ? ('Actions for {device}' | translate: { device: deviceDescription() }) : ''"
      [attr.aria-label]="'Actions for {device}' | translate: { device: deviceDescription() }"
    >
      <ix-icon name="more_vert"></ix-icon>
    </button>
  </div>
</div>

<mat-menu #menu="matMenu">
  @if (showEdit()) {
    <button
      mat-menu-item
      type="button"
      [ixTest]="['edit', deviceDescription()]"
      (click)="editPressed()"
    >{{ 'Edit' | translate }}</button>
  }

  <button
    mat-menu-item
    type="button"
    [ixTest]="['delete', deviceDescription()]"
    (click)="deletePressed()"
  >{{ 'Delete' | translate }}</button>
</mat-menu>
