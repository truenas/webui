<div class="summary-row">
  <div class="summary-group">
    <h4>{{ 'General Info' | translate }}</h4>

    <div class="summary-item">
      <div class="label">{{ 'Pool Name' | translate }}</div>
      <div class="value">{{ state.name || ('Not Set' | translate) }}</div>
    </div>

    <div *ngIf="state.encryption" class="summary-item">
      <div class="label">{{ 'Encryption' | translate }}</div>
      <div class="value">{{ state.encryption }}</div>
    </div>
  </div>
  <div class="summary-group">
  </div>
</div>
<div class="summary-row">
  <div class="summary-group topology-summary">
    <h4>{{ 'Topology Summary' | translate }}</h4>

    <ng-container *ngIf="nonEmptyTopologyCategories.length; else noVdevs">
      <ng-container *ngFor="let category of nonEmptyTopologyCategories">
        <div class="summary-item">
          <div class="label">
            {{ category[0] | mapValue: vdevTypeLabels | translate }}
          </div>
          <div class="value">
            {{ category[1] | ixTopologyCategoryDescription }}
          </div>
        </div>
      </ng-container>
    </ng-container>

    <ng-template #noVdevs>
      {{ 'No VDEVs added.' | translate }}
    </ng-template>
  </div>

  <div class="summary-group">
    <h4>{{ 'Details' | translate }}</h4>

    <div class="summary-item">
      <div class="label">{{ 'Est. Usable Capacity' | translate }}</div>
      <div class="value">{{ totalCapacity$ | async | filesize: { standard: 'iec' } }}</div>
    </div>

    <div
      *ngIf="state.enclosureSettings.maximizeEnclosureDispersal || limitToEnclosureName"
      class="summary-item"
    >
      <div class="label">{{ 'Dispersal Strategy' | translate }}</div>
      <div class="value">
        <ng-container *ngIf="state.enclosureSettings.maximizeEnclosureDispersal">
          {{ 'Maximize Dispersal' | translate }}
        </ng-container>
        <ng-container *ngIf="limitToEnclosureName">
          {{ 'Limit To {name} Enclosure' | translate: { name: limitToEnclosureName } }}
        </ng-container>
      </div>
    </div>
  </div>

  <div *ngIf="errorsTotal || warningsTotal" class="summary-group">
    <h4>{{ 'Warnings' | translate }}</h4>

    <div *ngIf="wizardRequiredStepsStateForm.controls.general.value === false" class="summary-item error">
      {{ 'Name not added.' | translate }}
    </div>

    <div *ngIf="
      wizardRequiredStepsStateForm.controls.enclosure.validator &&
      wizardRequiredStepsStateForm.controls.enclosure.value === false"
      class="summary-item error"
    >
      {{ 'No Enclosure selected for a Limit Pool To A Single Enclosure.' | translate }}
    </div>

    <div *ngIf="wizardRequiredStepsStateForm.controls.data.value === false" class="summary-item error">
      {{ 'At least 1 data vdev is required.' | translate }}
    </div>

    <div *ngIf="disknumError" class="summary-item error" [innerHTML]="disknumError"></div>
    <div *ngIf="vdevtypeError" class="summary-item error" [innerHTML]="vdevtypeError"></div>
    <div *ngIf="stripeVdevTypeError" class="summary-item error" [innerHTML]="stripeVdevTypeError"></div>
    <div *ngIf="logVdevTypeWarning" class="summary-item warning" [innerHTML]="logVdevTypeWarning"></div>
    <div *ngIf="nonUniqueSerialDisks.length">
      <ix-warning [message]="nonUniqueSerialDisksWarning"></ix-warning>
    </div>
    <div *ngIf="disksWithExportedPools.length">
      <ix-warning [message]="exportedPoolsWarning"></ix-warning>
    </div>
  </div>
</div>

<div class="step-buttons">
  <button
    mat-button
    matStepperPrevious
    color="accent"
    type="button"
    ixTest="back"
  >
    {{ 'Back' | translate }}
  </button>

  <button
    *ngIf="hasVdevs"
    mat-button
    type="button"
    ixTest="inspect-vdevs"
    (click)="onInspectVdevsPressed()"
  >{{ 'Inspect VDEVs' | translate }}</button>

  <button
    mat-button
    matStepperNext
    color="primary"
    type="button"
    ixTest="create-pool"
    [disabled]="!!errorsTotal"
    (click)="createPool.emit()"
  >
    {{ 'Create Pool' | translate }}
  </button>
</div>
