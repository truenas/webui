<mat-card class="card">
  <mat-card-content class="card-content">
    <div [class]="['container', size()]">
      <div class="content-left fn-theme-contrast-lighter">
        <div class="product-logo-container">
          <ix-icon [name]="isIxHardware() ? 'ix:logo_truenas_scale_full' : 'ix:logo_truenas_scale_type'"></ix-icon>
        </div>

        <ix-product-image
          class="product-image"
          [systemProduct]="systemInfo()?.platform"
          [hasEnclosureSupport]="hasEnclosureSupport()"
          [isHaLicensed]="isHaLicensed()"
          [isEnterprise]="isEnterprise()"
          [isIxHardware]="isIxHardware()"
        >
          <span>{{ 'Active' | translate }}</span>
        </ix-product-image>

        <div class="card-action-container">
          @if (isUpdateRunning()) {
            <button
              mat-button
              color="primary"
              [ixTest]="['widget-sysinfo', 'update-running']"
              [disabled]="true"
            >{{ 'Update in Progress' | translate }}</button>
          } @else {
            <button
              mat-button
              color="primary"
              [ixTest]="['widget-sysinfo', 'update']"
              [routerLink]="['/system', 'update']"
            >
              @if (updateAvailable()) {
                {{ 'Updates Available' | translate }}
              } @else {
                {{ 'Check for Updates' | translate }}
              }
            </button>
          }
        </div>
      </div>

      <div class="content-right">
        <div class="header">
          <h3>{{ 'System Information' | translate }}</h3>

          <button
            mat-icon-button
            ixTest="system-go-to-reports"
            matTooltipPosition="above"
            [attr.aria-label]="'System Reports' | translate"
            [matTooltip]="'System Reports' | translate"
            [routerLink]="['/reportsdashboard', 'system']"
          >
            <ix-icon name="insert_chart"></ix-icon>
          </button>
        </div>

        <div class="overview">
          <strong>{{ 'Overview' | translate }}</strong>
        </div>

        <mat-list>
          <mat-list-item>
            <strong>{{ 'Platform' | translate }}:</strong>
            @if (isLoaded()) {
              <span>
                @if (systemInfo()?.platform && isIxHardware()) {
                  {{ systemInfo().platform }}
                } @else {
                  {{ 'Generic' }}
                }
              </span>
            } @else {
              <ngx-skeleton-loader
                class="inline-loader"
                [theme]="{
                  height: '20px',
                  background: 'var(--alt-bg2)',
                  opacity: 0.25,
                  margin: 0,
                }"
              ></ngx-skeleton-loader>
            }
          </mat-list-item>

          <mat-list-item>
            <strong>{{ 'Version' | translate }}:</strong>
            @if (isLoaded()) {
              <div class="copy-version">
                <div class="copy-version-text" [matTooltip]="version()">
                  <span>
                    {{ version() }}
                  </span>
                </div>
                <ix-copy-button [text]="version()"></ix-copy-button>
              </div>
            } @else {
              <ngx-skeleton-loader
                class="inline-loader"
                [theme]="{
                  height: '20px',
                  background: 'var(--alt-bg2)',
                  opacity: 0.25,
                  margin: 0,
                }"
              ></ngx-skeleton-loader>
            }
          </mat-list-item>

          <mat-list-item>
            <strong>{{ 'License' | translate }}:</strong>
            @if (isLoaded()) {
              @if (systemInfo()?.license) {
                <span>
                  {{
                    '{license} contract, expires {date}' | translate:
                    {
                      license: systemInfo().license.contract_type | titlecase,
                      date: systemInfo().license.contract_end.$value,
                    }
                  }}
                </span>
              } @else {
                <span>
                  {{ 'No License' | translate }}
                  <a
                    ixTest="add-license"
                    mat-icon-button
                    matTooltipPosition="above"
                    [matTooltip]="'Add License' | translate"
                    [routerLink]="['/system', 'support']"
                  >
                    <ix-icon name="add_circle"></ix-icon>
                  </a>
                </span>
              }
          } @else {
            <ngx-skeleton-loader
              class="inline-loader"
              [theme]="{
                height: '20px',
                background: 'var(--alt-bg2)',
                opacity: 0.25,
                margin: 0,
              }"
            ></ngx-skeleton-loader>
          }
          </mat-list-item>

          @if (systemInfo()?.system_serial && isIxHardware()) {
            <mat-list-item>
              <strong>{{ 'System Serial' | translate }}:</strong>
              <span>
                {{ systemInfo().system_serial }}
              </span>
            </mat-list-item>
          }

          <mat-list-item>
            <strong>{{ 'Hostname' | translate }}:</strong>
            @if (isLoaded()) {
              <span>
                {{ systemInfo().hostname }}
              </span>
            } @else {
              <ngx-skeleton-loader
                class="inline-loader"
                [theme]="{
                  height: '20px',
                  background: 'var(--alt-bg2)',
                  opacity: 0.25,
                  margin: 0,
                }"
              ></ngx-skeleton-loader>
            }
          </mat-list-item>

          <mat-list-item>
            <strong>{{ 'Uptime' | translate }}:</strong>
            @if (isLoaded()) {
              <span>
                {{ uptime() | uptime: (datetime() | formatDateTime:' ':'HH:mm') }}
              </span>
            } @else {
              <ngx-skeleton-loader
                class="inline-loader"
                [theme]="{
                  height: '20px',
                  background: 'var(--alt-bg2)',
                  opacity: 0.25,
                  margin: 0,
                }"
              ></ngx-skeleton-loader>
            }
          </mat-list-item>
        </mat-list>
      </div>
    </div>
  </mat-card-content>
</mat-card>

