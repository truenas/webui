<div mat-dialog-title>{{ 'Truenas Connect Service' }}</div>
<mat-divider></mat-divider>
<mat-dialog-content>
    <div>
        @if (tnc.config().status === TruenasConnectStatus.Configured) {
            <ix-icon
              class="status-connected"
              name="check_circle"
            ></ix-icon>
          }
          @else if (tnc.config().status === TruenasConnectStatus.Disabled) {
            <ix-icon
              class="status-disabled"
              name="pause_circle_filled"
            ></ix-icon>
          }
          @else if (
            tnc.config().status === TruenasConnectStatus.RegistrationFinalizationFailed ||
            tnc.config().status === TruenasConnectStatus.CertGenerationFailed
          ){
            <ix-icon
              class="status-failed"
              name="cancel"
            ></ix-icon>
          }
          @else {
            <ix-icon
            class="status-pending"
            name="pending"
          ></ix-icon>
          }
          <span>{{ tnc.config().status }}</span>
    </div>

      <div id="error">
      {{ tnc.config().status_reason }}
    </div>
</mat-dialog-content>
<div mat-dialog-actions>
    @if(tnc.config().status === TruenasConnectStatus.ClaimTokenMissing) {
      <button
        ixTest="tnc-generate-token"
        mat-button
        (click)="generateToken()"
      >
      {{'Generate Token'}}
      </button>
    }

  <!-- <button mat-button ixTest="tnc-reenable" (click)="reenable()">
    {{'Reenable'}}
  </button> -->
    @if (tnc.config().status === TruenasConnectStatus.RegistrationFinalizationWaiting) {
      <button
      ixTest="tnc-connect"
      mat-button
      color="primary"
      (click)="connect()"
    >
    {{'Connect'}}
    </button>
    }

    <button
      ixTest="tnc-generate-token"
      mat-button
      (click)="openTncFormDialog()"
    >
    {{'Edit'}}
    </button>
</div>