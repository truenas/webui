<span class="prefix-icon">
  <tn-icon name="magnify" library="mdi"></tn-icon>
</span>

<input
  #searchControl
  matInput
  ixTest="search"
  class="input"
  [placeholder]="placeholder() || ('Search' | translate)"
  [ngModel]="query()"
  (ngModelChange)="queryChange.emit($event)"
  (keydown.enter)="runSearch.emit()"
/>

@if (allowAdvanced()) {
  <span
    class="switch-link"
    ixTest="switch-to-advanced"
    tabindex="0"
    [matTooltip]="'Switch To Advanced' | translate"
    (click)="switchToAdvanced.emit()"
    (keydown.enter)="$event.preventDefault(); switchToAdvanced.emit()"
  >
    <tn-icon name="tune" library="mdi"></tn-icon>
    {{ 'Advanced' | translate }}
  </span>
}

@if (searchControl.value) {
  <span
    class="reset-icon reset-input"
    role="button"
    tabindex="0"
    ixTest="clear-search"
    [attr.aria-label]="'Clear search' | translate"
    [matTooltip]="'Clear search' | translate"
    (click)="resetInput()"
    (keydown.enter)="$event.preventDefault(); resetInput()"
  >
    <tn-icon name="close-circle" library="mdi"></tn-icon>
  </span>
}
