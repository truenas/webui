<mat-toolbar class="topbar">
  <mat-toolbar-row>
    <!-- Sidenav toggle button -->
    <button
      mat-icon-button
      id="sidenavToggle"
      (click)="toggleCollapse()"
      [matTooltip]="tooltips.toggle_collapse | translate"
      matTooltipPosition="right"
      ix-auto
      ix-auto-type="button"
      ix-auto-identifier="sidenavToggle"
    ><mat-icon>menu</mat-icon></button>

    <span fxFlex></span>

    <a class="mobile-logo" routerLink="/">
      <div class="mobile-logo-container">
        <ix-icon name="ix:truenas_scale_logomark_color" class="logomark"></ix-icon>
        <ix-icon name="ix:truenas_scale_logotype_color" class="logotype"></ix-icon>
      </div>
    </a>

    <div class="topbar-mobile-footer">
      <div class="ix-systems-logo-icon">
        <mat-icon
          (click)="openIx()"
          [svgIcon]="getLogoIcon()"
          alt="iXsystems logo"
          class="ix-logo {{ screenSize }} {{ getLogoIcon() }}"
          tabindex="0"
        ></mat-icon>
      </div>

      <ix-truecommand-button></ix-truecommand-button>

      <!-- finish update -->
      <button *ngIf="upgradeWaitingToFinish" mat-icon-button id="finish-update"
              [matTooltip]="tooltips.upgrade_waiting | translate" (click)="upgradePendingDialog()"
              class="topbar-button-right" ix-auto ix-auto-type="button" ix-auto-identifier="upgradeWaiting">
        <mat-icon class="movement">update</mat-icon>
      </button>
      <!--loading icon-->
      <button *ngIf="updateIsRunning" mat-icon-button id="update-running" [matTooltip]="tooltips.update | translate"
              (click)="showUpdateDialog()" class="topbar-button-right" ix-auto ix-auto-type="button"
              ix-auto-identifier="updateRunning">
        <mat-icon class="movement">system_update_alt</mat-icon>
      </button>
      <button *ngIf="pendingNetworkChanges" mat-icon-button id="network"
              [matTooltip]="tooltips.pending_network_changes | translate" (click)="showNetworkChangesPending()"
              class="topbar-button-right" ix-auto ix-auto-type="button" ix-auto-identifier="networkPending">
        <mat-icon class="movement">device_hub</mat-icon>
      </button>
      <button *ngIf="showResilvering" mat-icon-button id="resilver" [matTooltip]="tooltips.resilvering | translate"
              (click)="showResilveringDetails()" class="topbar-button-right" ix-auto ix-auto-type="button"
              ix-auto-identifier="resilvering">
        <mat-icon class="fa-spin">autorenew</mat-icon>
      </button>
      <!-- HA Status -->
      <span *ngIf="isFailoverLicensed && haStatusText">
        <button *ngIf="haDisabledReasons.length === 0" mat-icon-button id="ha" [matTooltip]="haStatusText | translate"
                class="topbar-button-right" (click)="showHaStatus()" ix-auto ix-auto-type="button" ix-auto-identifier="haStatus">
          <mat-icon svgIcon="ix:ha_enabled"></mat-icon>
        </button>
        <button *ngIf="haDisabledReasons.length > 0" mat-icon-button id="ha" [matTooltip]="haStatusText | translate"
                class="topbar-button-right" (click)="showHaStatus()" ix-auto ix-auto-type="button" ix-auto-identifier="haStatus">
          <mat-icon *ngIf="haDisabledReasons[0] === FailoverDisabledReason.NoSystemReady; else HADisabled" svgIcon="ix:ha_reconnecting">
          </mat-icon>
          <ng-template #HADisabled>
            <mat-icon svgIcon="ix:ha_disabled"></mat-icon>
          </ng-template>
        </button>
      </span>

      <ix-directory-services-indicator></ix-directory-services-indicator>
      <ix-jobs-indicator></ix-jobs-indicator>

      <!-- Alert toggle button -->
      <button
        mat-icon-button
        class="topbar-button-right overflow-visible"
        [matTooltip]="tooltips.alerts | translate"
        (click)="onAlertIndicatorPressed()"
      >
        <mat-icon
          *appLet="alertBadgeCount$ | async as alertBadgeCount"
          [matBadge]="alertBadgeCount"
          matBadgeSize="small"
          matBadgeColor="warn"
          [matBadgeHidden]="alertBadgeCount === 0"
        >notifications</mat-icon>
      </button>

      <ix-user-menu></ix-user-menu>
      <ix-power-menu></ix-power-menu>
    </div>

  </mat-toolbar-row>
</mat-toolbar>

