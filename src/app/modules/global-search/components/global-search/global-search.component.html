<div
  cdkTrapFocus
  class="search-box-wrapper"
  [class.sidenav-collapsed]="sidenavService.isMenuCollapsed"
  [class.sidenav-mobile]="sidenavService.isMobile"
  [cdkTrapFocusAutoCapture]="true"
>
  <div class="search-box">
    <ix-icon name="search" class="search-icon"></ix-icon>

    <input
      #searchInput
      matInput
      ixTest="global-search"
      class="search-input"
      [placeholder]="'Search' | translate"
      [formControl]="searchControl"
      (keydown)="handleKeyDown($event)"
    />

    <span
      *ngIf="searchControl.value"
      class="reset-icon reset-input"
      (click)="resetInput()"
    >
      <ix-icon
        name="mdi-close-circle"
        tabindex="0"
        (keydown.enter)="$event.preventDefault(); resetInput()"
      ></ix-icon>
    </span>
  </div>

  <ix-global-search-results
    #searchResultsList
    @fade
    [searchTerm]="searchControl.value"
    [results]="searchResults"
    [focusedIndex]="selectedIndex"
    (selected)="resetInput()"
    (keydown)="handleKeyDown($event)"
  ></ix-global-search-results>
</div>
